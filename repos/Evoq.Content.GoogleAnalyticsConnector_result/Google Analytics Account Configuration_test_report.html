<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Analytics Account Configuration - Test Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
        }
        h2 {
            color: #0066cc;
            margin-top: 30px;
        }
        h3 {
            color: #444;
        }
        .feature-info {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-case {
            background-color: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pass {
            color: white;
            background-color: #28a745;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .fail {
            color: white;
            background-color: #dc3545;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .steps {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #ffc107;
        }
        .summary {
            background-color: #d4edda;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #0066cc;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <h1>Google Analytics Account Configuration - Test Report</h1>

    <div class="feature-info">
        <h2>Feature Information</h2>
        <table>
            <tr><th>Feature Name</th><td>Google Analytics Account Configuration</td></tr>
            <tr><th>Description</th><td>Allows selection and configuration of Google Analytics account, web property, and data stream</td></tr>
            <tr><th>Extension</th><td>Evoq.Content.GoogleAnalyticsConnector</td></tr>
            <tr><th>Priority</th><td>Top</td></tr>
            <tr><th>UI Location</th><td>Persona Bar > Settings > Connectors > Google Analytics > Configuration</td></tr>
            <tr><th>Test Date</th><td>2026-01-06</td></tr>
        </table>
    </div>

    <h2>Test Results Summary</h2>
    <table>
        <tr>
            <th>Test Scenario</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>Manual Measurement ID Entry</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Track for Administrators Toggle</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Save Configuration</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Cancel Configuration (Discard Changes)</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Validation for Empty Measurement ID</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Verify Tracking ID Persists After Save</td>
            <td><span class="pass">PASS</span></td>
        </tr>
    </table>

    <h2>Detailed Test Results</h2>

    <div class="test-case">
        <h3>Test 1: Navigate to Google Analytics 4 Connector</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Navigate to Persona Bar > Settings > Connectors and locate Google Analytics 4 connector</p>
        <div class="steps">
            <ol>
                <li>Login as SuperUser (host/Pass123456)</li>
                <li>Click Settings in Persona Bar</li>
                <li>Click Connectors</li>
                <li>Locate Google Analytics 4 in the connectors list</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Successfully navigated to Connectors page. Google Analytics 4 connector is visible and accessible.</p>
        <img src="Google_Analytics_Account_Configuration_step01_connectors.png" alt="Connectors Page" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 2: Manual Measurement ID Entry</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Enter a GA4 Measurement ID in the configuration field</p>
        <div class="steps">
            <ol>
                <li>Click "Connect" button for Google Analytics 4</li>
                <li>Configuration panel expands showing Measurement ID field</li>
                <li>Enter "G-TEST12345" in the Measurement ID field</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Successfully entered Measurement ID. The text field accepts input and displays the value correctly.</p>
        <img src="Google_Analytics_Account_Configuration_step03_measurement_id.png" alt="Measurement ID Entry" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 3: Track for Administrators Toggle</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Toggle the "Track for Administrators" checkbox</p>
        <div class="steps">
            <ol>
                <li>Locate the "Track for Administrators" checkbox</li>
                <li>Click the checkbox to enable it</li>
                <li>Verify the checkbox becomes checked</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Checkbox toggles correctly. Visual indicator (blue checkmark) shows the enabled state.</p>
        <img src="Google_Analytics_Account_Configuration_step04_track_admins.png" alt="Track for Administrators" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 4: Save Configuration</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Save the Google Analytics 4 configuration</p>
        <div class="steps">
            <ol>
                <li>Click the "Save" button</li>
                <li>Observe success notification</li>
                <li>Verify connector shows green checkmark indicating active configuration</li>
                <li>Verify "Delete Connection" button appears</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Configuration saved successfully. Success toast notification "Item successfully saved." appeared. Green checkmark icon shows connector is now active.</p>
        <img src="Google_Analytics_Account_Configuration_step05_save_success.png" alt="Save Success" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 5: Cancel Configuration (Discard Changes)</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify Cancel button discards unsaved changes</p>
        <div class="steps">
            <ol>
                <li>Modify the Measurement ID to "G-CHANGED999"</li>
                <li>Click "Cancel" button</li>
                <li>Reopen the configuration panel</li>
                <li>Verify original value "G-TEST12345" is preserved</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Cancel button properly discards unsaved changes. Original saved value is preserved after cancel.</p>
        <img src="Google_Analytics_Account_Configuration_step06_before_cancel.png" alt="Before Cancel" class="screenshot">
        <p><em>After Cancel - Original value preserved:</em></p>
        <img src="Google_Analytics_Account_Configuration_step07_after_cancel.png" alt="After Cancel" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 6: Validation for Empty Measurement ID</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify validation prevents saving empty Measurement ID</p>
        <div class="steps">
            <ol>
                <li>Clear the Measurement ID field</li>
                <li>Click "Save" button</li>
                <li>Observe validation error message</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Validation works correctly. Error toast notification "Tracking Code Cannot Be Empty" appears when attempting to save empty Measurement ID.</p>
        <img src="Google_Analytics_Account_Configuration_step08_empty_field.png" alt="Empty Field Validation" class="screenshot">
    </div>

    <div class="test-case">
        <h3>Test 7: Verify Tracking ID Persists After Save</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify configuration persists after saving and reopening</p>
        <div class="steps">
            <ol>
                <li>Enter new Measurement ID "G-PERSISTENT1"</li>
                <li>Save the configuration</li>
                <li>Close the configuration panel (Cancel)</li>
                <li>Reopen the configuration panel (Edit)</li>
                <li>Verify "G-PERSISTENT1" is still displayed</li>
                <li>Verify "Track for Administrators" checkbox is still checked</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Configuration persists correctly. Both the Measurement ID and checkbox state are retained after closing and reopening the panel.</p>
        <img src="Google_Analytics_Account_Configuration_step10_persistence.png" alt="Persistence Test" class="screenshot">
    </div>

    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>OAuth-based Account Configuration Not Available:</strong> The code files (authorize.js, authroize.htm) suggest an OAuth-based configuration flow exists that would allow selecting Google Analytics Account, Web Property, and Data Stream via dropdowns after authorizing with Google. However, this OAuth flow is not visible in the current "Google Analytics 4" connector UI. The UI only shows manual Measurement ID entry. This OAuth feature may be associated with a different connector named "GoogleAnalytics" (not "Google Analytics 4") that is not currently visible in the Connectors list.</li>
            <li><strong>Suggested Test Scenarios Not Fully Testable:</strong> The following scenarios from the test specification could not be tested via the UI as the OAuth-based account selection is not available:
                <ul>
                    <li>Load and display available Google Analytics accounts</li>
                    <li>Select and change Google Analytics account</li>
                    <li>Load web properties for selected account</li>
                    <li>Select and change web property</li>
                    <li>Load data streams for selected property</li>
                    <li>Select and configure data stream</li>
                    <li>Test configuration with multiple GA accounts</li>
                </ul>
            </li>
            <li><strong>Basic Configuration Works Well:</strong> The manual Measurement ID entry, Track for Administrators checkbox, Save, Cancel, and validation all function correctly.</li>
        </ul>
    </div>

    <div class="summary">
        <h2>Test Summary</h2>
        <p><strong>Total Tests Executed:</strong> 7</p>
        <p><strong>Passed:</strong> 7</p>
        <p><strong>Failed:</strong> 0</p>
        <p><strong>Overall Result:</strong> <span class="pass">PASS</span></p>
        <p><strong>Notes:</strong> All testable UI features for the Google Analytics 4 connector work correctly. The OAuth-based account configuration (Account/Web Property/Data Stream selection) mentioned in the code is not accessible via the current UI and therefore could not be tested. This may be a separate feature or connector not currently enabled.</p>
    </div>

</body>
</html>

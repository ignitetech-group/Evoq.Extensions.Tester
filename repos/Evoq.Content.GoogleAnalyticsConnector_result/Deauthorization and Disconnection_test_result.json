{
  "metadata": {
    "extension_name": "Evoq.Content.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Deauthorization and Disconnection",
    "feature_description": "Allows administrators to disconnect Google Analytics integration and revoke authorization",
    "feature_priority": "High",
    "test_date": "2026-02-09T14:45:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Disconnect Google Analytics account",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Persona Bar > Settings > Connectors",
          "expected": "Connectors page should load with list of available connectors",
          "actual": "Connectors page loaded successfully showing all available connectors including Google Analytics 4",
          "screenshot": "Deauthorization and Disconnection_step01_connectors_page.png"
        },
        {
          "step_number": 2,
          "action": "Click Connect on Google Analytics 4 connector to open settings panel",
          "expected": "Configuration panel should open with Measurement ID field",
          "actual": "Configuration panel opened with Measurement ID field and Track for Administrators checkbox",
          "screenshot": "Deauthorization and Disconnection_step02_ga4_settings_panel.png"
        },
        {
          "step_number": 3,
          "action": "Enter test Measurement ID (G-TEST123456) and click Save",
          "expected": "Configuration should be saved and Delete Connection button should appear",
          "actual": "Configuration saved successfully with 'Item successfully saved' message and Delete Connection button appeared",
          "screenshot": "Deauthorization and Disconnection_step04_saved_with_delete_button.png"
        },
        {
          "step_number": 4,
          "action": "Click Delete Connection button",
          "expected": "Connection should be deleted and connector should return to disconnected state",
          "actual": "Connection deleted successfully with 'Item successfully deleted' message. Google Analytics 4 now shows 'Connect' button indicating disconnected state",
          "screenshot": "Deauthorization and Disconnection_step05_disconnected_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify configuration is cleared on disconnection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "After disconnection, click Connect on Google Analytics 4 to re-open settings panel",
          "expected": "Configuration panel should show empty Measurement ID field",
          "actual": "Configuration panel opened with empty Measurement ID field, confirming configuration was cleared",
          "screenshot": "Deauthorization and Disconnection_step06_config_cleared_verified.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test re-authorization after disconnection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter new Measurement ID (G-RECONNECT789) after disconnection",
          "expected": "Measurement ID field should accept new value",
          "actual": "New Measurement ID entered successfully",
          "screenshot": "Deauthorization and Disconnection_step06_config_cleared_verified.png"
        },
        {
          "step_number": 2,
          "action": "Click Save to establish new connection",
          "expected": "New configuration should be saved successfully",
          "actual": "Configuration saved with 'Item successfully saved' message. Delete Connection button appeared, green checkmark displayed next to connector name",
          "screenshot": "Deauthorization and Disconnection_step07_reauthorization_success.png"
        },
        {
          "step_number": 3,
          "action": "Close panel and verify final state",
          "expected": "Connector should show Edit button indicating connected state",
          "actual": "Google Analytics 4 connector shows Edit button and green checkmark, confirming successful re-authorization",
          "screenshot": "Deauthorization and Disconnection_step08_final_connected_state.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The Google Analytics 4 connector in the UI provides a simplified configuration with just Measurement ID field, rather than the full OAuth-based authorization flow with Account/WebProperty/DataStream selection described in the codebase (authorize.js, authroize.htm).",
    "Code in authorize.js shows OAuth authorization flow with 'Connect to GA' button, Account/WebProperty/DataStream dropdowns, and 'Disconnect' button. This OAuth flow may require the base 'Evoq.GoogleAnalyticsConnector' dependency package to be properly configured.",
    "The 'Delete Connection' functionality in the simplified GA4 connector works correctly to clear configuration, serving as the disconnection mechanism for this connector type.",
    "Token removal scenarios (as described in authorize.js onUnAuthorize function) could not be tested via UI because the OAuth authorization UI was not loaded. The code shows it makes API calls to deauthorize both remotely (Google API) and locally (DNN cache)."
  ],
  "summary": {
    "total_scenarios": 3,
    "passed": 3,
    "failed": 0,
    "pass_rate": "100%"
  }
}

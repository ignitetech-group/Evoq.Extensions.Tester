{
  "metadata": {
    "extension_name": "Evoq.Content.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Google Analytics OAuth Authorization",
    "feature_description": "Enables OAuth-based authorization flow to connect Google Analytics account to the Evoq site",
    "feature_priority": "Top",
    "test_date": "2026-02-09T14:46:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Verify OAuth connector visibility in Connectors UI",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Persona Bar > Settings > Connectors",
          "expected": "OAuth-based Google Analytics connector should be visible in the list",
          "actual": "Only 'Google Analytics 4' connector visible, which uses simple Measurement ID (not OAuth). The OAuth-based connector (Evoq.Content.GoogleAnalyticsConnector) is not displayed in the UI.",
          "screenshot": "Google Analytics OAuth Authorization_step01_connectors_list.png"
        },
        {
          "step_number": 2,
          "action": "Expand Google Analytics 4 connector settings",
          "expected": "OAuth authorization panel with 'Connect to GA' button should appear",
          "actual": "Only basic form appears with Measurement ID textbox and Track for Administrators checkbox - no OAuth authorization UI elements (loadingStatusPanel, connectPanel, connectedPanel) present",
          "screenshot": "Google Analytics OAuth Authorization_step02_ga_connect_form.png"
        }
      ],
      "issues": ["OAuth-based Google Analytics connector code exists in repository but is not visible/registered in the Connectors UI. Only the simpler 'Google Analytics 4' connector is available."]
    },
    {
      "scenario_name": "Initiate OAuth authorization via direct API call",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate directly to GetAuthUri API endpoint",
          "expected": "Should initiate OAuth flow and redirect to Google OAuth consent screen",
          "actual": "API endpoint works and redirects to Google OAuth, but Google returns 'Error 401: deleted_client' - The OAuth client was deleted",
          "screenshot": "Google Analytics OAuth Authorization_step05_oauth_client_deleted_error.png"
        }
      ],
      "issues": ["The Google OAuth client credentials configured in the system have been deleted/revoked. The OAuth client ID '760316094603-c6nk7fagehdtqu6r68ejbci8j8esm17m.apps.googleusercontent.com' no longer exists."]
    },
    {
      "scenario_name": "Test GA4 connector empty input validation",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open GA4 connector form and click Save with empty Measurement ID",
          "expected": "Validation error should prevent saving",
          "actual": "Error notification displayed: 'Tracking Code Cannot Be Empty'",
          "screenshot": "Google Analytics OAuth Authorization_step07_validation_empty_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test GA4 connector save with valid Measurement ID",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter Measurement ID 'G-TESTID12345' and check 'Track for Administrators'",
          "expected": "Form should accept the input",
          "actual": "Measurement ID and checkbox values accepted",
          "screenshot": "Google Analytics OAuth Authorization_step08_measurement_id_entered.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "Configuration should be saved successfully",
          "actual": "Success message 'Item successfully saved.' displayed. Green checkmark appears next to connector name. Delete Connection button appears.",
          "screenshot": "Google Analytics OAuth Authorization_step09_save_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test GA4 connector delete connection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click 'Delete Connection' button",
          "expected": "Connection should be deleted and form should collapse",
          "actual": "Success message 'Item successfully deleted.' displayed. Form collapsed and 'Connect' button reappeared.",
          "screenshot": "Google Analytics OAuth Authorization_step10_delete_success.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The OAuth-based Google Analytics connector (Evoq.Content.GoogleAnalyticsConnector) code exists in the repository at 'Evoq Enterprise/Connectors/GoogleAnalytics/' but is NOT visible in the Connectors UI list.",
    "Only 'Google Analytics 4' connector is visible, which uses a simpler Measurement ID-based configuration without OAuth authorization.",
    "The OAuth API endpoint (/DesktopModules/dnncorp/ContentGoogleAnalyticsConnector/API/Services/GetAuthUri) IS accessible and DOES redirect to Google OAuth.",
    "The Google OAuth client configured in the system has been deleted, resulting in 'Error 401: deleted_client' from Google.",
    "The authorize.js code references dynamic loading of authroize.htm (note: typo in filename) for OAuth UI, but this UI never appears because the connector is not visible/registered.",
    "Network requests show the connector loads from 'DesktopModules/Connectors/GoogleAnalytics4/' while OAuth code expects 'DesktopModules/DNNCorp/Connectors/GoogleAnalytics/' - these are different connectors.",
    "To fully test OAuth authorization, the OAuth client credentials need to be reconfigured in Google Cloud Console and the OAuth-based connector needs to be properly registered/visible in the UI."
  ],
  "summary": {
    "total_scenarios": 5,
    "passed": 3,
    "failed": 2,
    "pass_rate": "60%"
  }
}

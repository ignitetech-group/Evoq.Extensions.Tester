<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: User Search and Filtering</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
        }
        h2 {
            color: #0066cc;
            margin-top: 30px;
        }
        h3 {
            color: #444;
        }
        .summary {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-case {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .pass {
            color: #28a745;
            font-weight: bold;
        }
        .fail {
            color: #dc3545;
            font-weight: bold;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
        }
        .status-pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status-fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background: #fff3cd;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <h1>Test Report: User Search and Filtering</h1>

    <div class="summary">
        <h2>Summary</h2>
        <table>
            <tr>
                <th>Extension</th>
                <td>Evoq.PersonaBar.Users</td>
            </tr>
            <tr>
                <th>Feature</th>
                <td>User Search and Filtering</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>Search for users and filter by various status criteria</td>
            </tr>
            <tr>
                <th>UI Location</th>
                <td>Admin > Users > Search/Filter Controls</td>
            </tr>
            <tr>
                <th>Test Date</th>
                <td>January 6, 2026</td>
            </tr>
            <tr>
                <th>Total Tests</th>
                <td>9</td>
            </tr>
            <tr>
                <th>Passed</th>
                <td><span class="pass">9</span></td>
            </tr>
            <tr>
                <th>Failed</th>
                <td><span class="fail">0</span></td>
            </tr>
        </table>
    </div>

    <h2>Test Results</h2>

    <!-- Test 1 -->
    <div class="test-case">
        <h3>Test 1: Search Users by Name/Email</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to Users page (Manage > Users)</li>
                <li>Enter "testuser7" in the search box and press Enter</li>
                <li>Verify only matching user is displayed</li>
                <li>Clear search and enter "testuser5@test.com" and press Enter</li>
                <li>Verify only matching user is displayed</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Search by name and email both work correctly. Users matching the search term are displayed.</p>
        <img src="User_Search_and_Filtering_step02_search_by_name.png" alt="Search by name">
        <img src="User_Search_and_Filtering_step03_search_by_email.png" alt="Search by email">
    </div>

    <!-- Test 2 -->
    <div class="test-case">
        <h3>Test 2: Filter by Authorized Users</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to Users page</li>
                <li>Click on the "Show" filter dropdown</li>
                <li>Select "Authorized"</li>
                <li>Verify only authorized users are displayed</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Filter correctly shows 15 authorized users.</p>
        <img src="User_Search_and_Filtering_step04_filter_dropdown.png" alt="Filter dropdown">
        <img src="User_Search_and_Filtering_step05_filter_authorized.png" alt="Authorized users filter">
    </div>

    <!-- Test 3 -->
    <div class="test-case">
        <h3>Test 3: Filter by Unauthorized Users</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Click on the "Show" filter dropdown</li>
                <li>Select "Unauthorized"</li>
                <li>Verify the list shows unauthorized users or "No users found" if none exist</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Filter works correctly. Shows "No users found." message since there are no unauthorized users in the system.</p>
        <img src="User_Search_and_Filtering_step06_filter_unauthorized.png" alt="Unauthorized users filter">
    </div>

    <!-- Test 4 -->
    <div class="test-case">
        <h3>Test 4: Filter by Deleted Users</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Click on the "Show" filter dropdown</li>
                <li>Select "Deleted"</li>
                <li>Verify the list shows deleted users or "No users found" if none exist</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Filter works correctly. Shows "No users found." message since there are no deleted users in the system.</p>
        <img src="User_Search_and_Filtering_step07_filter_deleted.png" alt="Deleted users filter">
    </div>

    <!-- Test 5 -->
    <div class="test-case">
        <h3>Test 5: Filter by SuperUser Status</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Click on the "Show" filter dropdown</li>
                <li>Select "Superusers"</li>
                <li>Verify only superuser accounts are displayed</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Filter correctly shows the SuperUser Account (host user).</p>
        <img src="User_Search_and_Filtering_step08_filter_superusers.png" alt="SuperUsers filter">
    </div>

    <!-- Test 6 -->
    <div class="test-case">
        <h3>Test 6: Real-time Search Updates</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Set filter to "All"</li>
                <li>Type "test" character by character in the search box</li>
                <li>Observe if results update in real-time as typing occurs</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Search results update in real-time as the user types. Results were immediately filtered to users containing "test" in their name/username/email.</p>
        <img src="User_Search_and_Filtering_step09_realtime_search.png" alt="Real-time search">
    </div>

    <!-- Test 7 -->
    <div class="test-case">
        <h3>Test 7: Combine Search with Filters</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Enter a search term (e.g., "test")</li>
                <li>Change the filter from "All" to "Authorized"</li>
                <li>Verify search text is preserved and results reflect both criteria</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Search text is preserved when changing filters. Results show users matching both the search term and the filter criteria.</p>
        <img src="User_Search_and_Filtering_step10_combined_search_filter.png" alt="Combined search and filter">
    </div>

    <!-- Test 8 -->
    <div class="test-case">
        <h3>Test 8: Clear Filters and Search</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>With search text present, clear the search box</li>
                <li>Press Enter or trigger search update</li>
                <li>Verify all users matching the current filter are displayed</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Clearing the search box restores the full list of users based on the current filter.</p>
        <img src="User_Search_and_Filtering_step11_search_cleared.png" alt="Search cleared">
    </div>

    <!-- Test 9 -->
    <div class="test-case">
        <h3>Test 9: Case-insensitive Search</h3>
        <span class="status-badge status-pass">PASS</span>
        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Enter "TESTUSER7" (uppercase) in the search box</li>
                <li>Press Enter</li>
                <li>Verify user "testuser7" (lowercase) is found</li>
            </ol>
        </div>
        <p><strong>Result:</strong> Search is case-insensitive. Uppercase search term "TESTUSER7" successfully found lowercase username "testuser7".</p>
        <img src="User_Search_and_Filtering_step12_case_insensitive.png" alt="Case-insensitive search">
    </div>

    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>Filter by Locked Users:</strong> The suggested test scenario "Filter by locked users" could not be tested because there is no "Locked" filter option in the UI. The available filters are: Authorized, Unauthorized, Deleted, Superusers, and All.</li>
            <li><strong>Reset Pagination on Filter Change:</strong> Based on code review (src/Modules/Evoq.PersonaBar.Users/EvoqUsers.Web/src/components/Body/index.jsx line 62-63), the pagination is reset when filters change (pageIndex is set to 0 and resetIndex is set to true).</li>
            <li><strong>Filter Persistence During Pagination:</strong> Not explicitly tested due to limited number of users in each filter category, but code review confirms the filter state is maintained in component state during pagination.</li>
        </ul>
    </div>

    <div class="summary" style="margin-top: 30px;">
        <h2>Conclusion</h2>
        <p>The User Search and Filtering feature is functioning correctly. All 9 testable scenarios passed successfully. The search functionality works with both name and email, is case-insensitive, and provides real-time updates. Filters work correctly for all available options (Authorized, Unauthorized, Deleted, Superusers, All). Search and filters can be combined effectively.</p>
    </div>
</body>
</html>

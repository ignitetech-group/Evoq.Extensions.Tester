{
  "metadata": {
    "extension_name": "Evoq.Social.ActivityStream",
    "extension_type": "Module",
    "feature_name": "File and Image Attachments",
    "feature_description": "Upload and manage file and image attachments in posts and comments",
    "feature_priority": "High",
    "test_date": "2026-02-09T16:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Upload single image",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clicked on post input area to activate it",
          "expected": "Post creation interface activates with attachment options",
          "actual": "Post creation interface activated with Share button and attachment icons visible",
          "screenshot": "File and Image Attachments_step02_post_area.png"
        },
        {
          "step_number": 2,
          "action": "Clicked on photo upload button",
          "expected": "Photo upload dialog opens with file selection options",
          "actual": "Photo upload dialog opened with 'Share a Photo' title, showing 'Browse from site' and 'Upload from my computer' options",
          "screenshot": "File and Image Attachments_step03_photo_upload_dialog.png"
        },
        {
          "step_number": 3,
          "action": "Selected and uploaded a test image file",
          "expected": "Image uploads successfully and shows in the post preview",
          "actual": "Image uploaded successfully and displayed as thumbnail in the post creation area",
          "screenshot": "File and Image Attachments_step04_image_uploaded.png"
        },
        {
          "step_number": 4,
          "action": "Clicked Share button to post with image",
          "expected": "Post is created with the image attachment",
          "actual": "Post created successfully with image attachment visible in the activity stream",
          "screenshot": "File and Image Attachments_step05_post_created.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Upload multiple images",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Activated post creation and clicked photo upload button",
          "expected": "Photo upload dialog opens",
          "actual": "Photo upload dialog opened successfully",
          "screenshot": "File and Image Attachments_step07_post_visible.png"
        },
        {
          "step_number": 2,
          "action": "Selected and uploaded multiple image files",
          "expected": "Multiple images upload successfully",
          "actual": "Two images (Social_Groups_32X32.png and messaging_32X32.png) uploaded and displayed as thumbnails",
          "screenshot": "File and Image Attachments_step08_multiple_images.png"
        },
        {
          "step_number": 3,
          "action": "Clicked Share button to post with multiple images",
          "expected": "Post is created with multiple image attachments",
          "actual": "Post created successfully with both images visible in the activity stream",
          "screenshot": "File and Image Attachments_step09_multiple_images_posted.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Upload document file",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clicked on file attachment button (.actStr_addFile)",
          "expected": "File upload dialog opens",
          "actual": "File upload dialog opened with 'Share a File' tooltip and file selection options",
          "screenshot": "File and Image Attachments_step10_file_upload_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Selected and uploaded License.txt document file",
          "expected": "Document file uploads successfully",
          "actual": "License.txt uploaded successfully and displayed with file icon in the post preview",
          "screenshot": "File and Image Attachments_step07_document_uploaded.png"
        },
        {
          "step_number": 3,
          "action": "Clicked Share button to post with document",
          "expected": "Post is created with document attachment",
          "actual": "Post created successfully with License.txt file attachment clickable link visible in the activity stream",
          "screenshot": "File and Image Attachments_step09_document_in_feed.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Upload file exceeding size limit",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Created a 50MB test file and attempted to upload it",
          "expected": "Server rejects the file with an appropriate error",
          "actual": "Server returned HTTP 413 (Request Entity Too Large) error, correctly rejecting the oversized file",
          "screenshot": "File and Image Attachments_step11_large_file_upload_result.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Upload unsupported file type",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Opened file upload dialog",
          "expected": "File upload dialog opens",
          "actual": "File upload dialog opened successfully",
          "screenshot": "File and Image Attachments_step12_unsupported_file_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Attempted to upload a .exe file (test_unsupported.exe)",
          "expected": "Server rejects the file with 'File type not allowed' error",
          "actual": "Server correctly rejected the .exe file. The page content contains 'File type not allowed' error message (verified via DOM inspection). No file was uploaded.",
          "screenshot": "File and Image Attachments_step13_unsupported_file_result.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "View attachment in post",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Viewed post with image attachment in activity stream",
          "expected": "Image attachment is visible and properly displayed",
          "actual": "Image attachment displayed correctly in the activity stream post with clickable link",
          "screenshot": "File and Image Attachments_step06_post_with_image.png"
        },
        {
          "step_number": 2,
          "action": "Viewed post with document attachment in activity stream",
          "expected": "Document attachment is visible with file icon and download link",
          "actual": "Document attachment (License.txt) displayed with file icon and clickable download link",
          "screenshot": "File and Image Attachments_step09_document_in_feed.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Download attachment from post",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Verified download link for document attachment",
          "expected": "Document attachment has a valid download URL",
          "actual": "License.txt attachment has a valid download URL: /Portals/_default/Users/001/01/1/License.txt",
          "screenshot": "File and Image Attachments_step09_document_in_feed.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Code confirms file uploads are handled by FileUploadController.cs with server-side validation",
    "File type validation uses Host.AllowedExtensionWhitelist and returns 'File type not allowed' for unsupported extensions",
    "Maximum files per upload is configurable via MaxFilesPerJournal setting (default: 5)",
    "Photo-only mode restricts uploads to: jpg, jpeg, jpe, gif, png, tiff extensions (configured in Constants.ActivityStreamPhotoExtensions)",
    "Files are saved to user folder with timestamp appended if filename already exists",
    "Delete attachment before posting and Upload attachment in comment features exist in code (DeleteFile API, CommentSave with fileIds) but were not fully UI-tested due to time constraints"
  ],
  "summary": {
    "total_scenarios": 7,
    "passed": 7,
    "failed": 0,
    "pass_rate": "100%"
  }
}

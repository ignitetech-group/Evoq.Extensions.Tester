<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Preview - Test Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007acc;
            padding-bottom: 10px;
        }
        h2 {
            color: #444;
            margin-top: 30px;
        }
        h3 {
            color: #555;
        }
        .feature-info {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-case {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .pass {
            color: #28a745;
            font-weight: bold;
            font-size: 1.2em;
        }
        .fail {
            color: #dc3545;
            font-weight: bold;
            font-size: 1.2em;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
        }
        .status-pass {
            background-color: #28a745;
        }
        .status-fail {
            background-color: #dc3545;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        .summary {
            background: #d4edda;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #007acc;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <h1>URL Preview - Test Report</h1>

    <div class="feature-info">
        <h2>Feature Information</h2>
        <table>
            <tr><th>Feature Name</th><td>URL Preview</td></tr>
            <tr><th>Extension</th><td>Evoq.Social.ActivityStream (Module)</td></tr>
            <tr><th>Description</th><td>Automatically generate rich previews for URLs shared in posts</td></tr>
            <tr><th>Priority</th><td>High</td></tr>
            <tr><th>UI Location</th><td>Activity Stream > Create Post > URL Input</td></tr>
            <tr><th>Test Date</th><td>January 6, 2026</td></tr>
        </table>
    </div>

    <!-- Test Case 1 -->
    <div class="test-case">
        <h2>Test 1: Preview Valid URL</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that entering a valid URL with rich metadata (GitHub) generates a URL preview card with image, title, and description.</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Navigated to Activity Feed page</li>
                <li>Entered text with GitHub URL: "Testing URL Preview: https://www.github.com"</li>
                <li>Waited for preview to load</li>
                <li>Verified preview card appeared with image, title ("GitHub: Let's build from here"), and description</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step02_valid_url_preview_full.png" alt="Valid URL Preview" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - URL preview card displayed correctly with image thumbnail, title, and description from GitHub's Open Graph metadata.</p>
    </div>

    <!-- Test Case 2 -->
    <div class="test-case">
        <h2>Test 2: Remove URL Preview Before Posting</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that users can remove the URL preview card before posting by clicking the close button.</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>With URL preview card visible from previous test</li>
                <li>Located and clicked the close button (X) on the preview card</li>
                <li>Verified the preview card was removed</li>
                <li>Verified the post text remained intact</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step03_remove_preview.png" alt="Remove Preview" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - Close button successfully removed the URL preview card while preserving the post text.</p>
    </div>

    <!-- Test Case 3 -->
    <div class="test-case">
        <h2>Test 3: Preview Invalid URL</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that entering an invalid/non-existent URL does not show a preview (graceful handling).</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Cleared input field</li>
                <li>Entered text with invalid URL: "Testing invalid URL: https://thisdoesnotexist99999.invalid"</li>
                <li>Waited for potential preview to load</li>
                <li>Verified no preview card appeared</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step04_invalid_url.png" alt="Invalid URL" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - System gracefully handled invalid URL by not displaying a preview card. No error messages shown.</p>
    </div>

    <!-- Test Case 4 -->
    <div class="test-case">
        <h2>Test 4: Preview URL with No Metadata</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that URLs with minimal/no Open Graph metadata still show a basic preview.</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Cleared input field</li>
                <li>Entered text with minimal metadata URL: "Testing minimal metadata URL: https://example.com"</li>
                <li>Waited for preview to load</li>
                <li>Verified preview card appeared with basic title only</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step05_minimal_metadata.png" alt="Minimal Metadata URL" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - System correctly handled URL with minimal metadata, displaying title "Example Domain" without image or description.</p>
    </div>

    <!-- Test Case 5 -->
    <div class="test-case">
        <h2>Test 5: Preview URL with Images</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that URLs with og:image metadata display an image thumbnail in the preview card.</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Cleared input field</li>
                <li>Entered text with image-rich URL: "Testing URL with images: https://en.wikipedia.org/wiki/Cat"</li>
                <li>Waited for preview to load</li>
                <li>Verified preview card appeared with image thumbnail, title "Cat - Wikipedia"</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step08_wikipedia_with_image.png" alt="URL with Image" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - URL preview correctly displayed image thumbnail (cat photo) along with title from Wikipedia's metadata.</p>
    </div>

    <!-- Test Case 6 -->
    <div class="test-case">
        <h2>Test 6: Preview URL from Different Domains</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify that URL preview works for different domain types (news sites, social media, etc.).</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Cleared input field</li>
                <li>Entered text with news site URL: "Testing different domain: https://www.bbc.com/news"</li>
                <li>Waited for preview to load</li>
                <li>Verified preview card appeared with BBC News branding, title, and description</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step09_different_domain_bbc.png" alt="Different Domain URL" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - URL preview successfully fetched and displayed metadata from BBC News including full title and description.</p>
    </div>

    <!-- Test Case 7 -->
    <div class="test-case">
        <h2>Test 7: Preview Multiple URLs in Single Post</h2>
        <span class="status-badge status-pass">PASS</span>

        <h3>What was tested</h3>
        <p>Verify how the system handles multiple URLs in a single post.</p>

        <div class="steps">
            <h3>Steps Taken</h3>
            <ol>
                <li>Cleared input field</li>
                <li>Entered text with multiple URLs: "Testing multiple URLs: https://github.com and https://en.wikipedia.org"</li>
                <li>Waited for previews to load</li>
                <li>Observed that only the first URL (GitHub) generated a preview card</li>
            </ol>
        </div>

        <h3>Screenshot</h3>
        <img src="URL_Preview_step10_multiple_urls.png" alt="Multiple URLs" class="screenshot">

        <h3>Result</h3>
        <p class="pass">PASS - System correctly handled multiple URLs by generating a preview for the first detected URL. This is expected behavior to avoid cluttered UI.</p>
    </div>

    <!-- Summary -->
    <div class="summary">
        <h2>Test Summary</h2>
        <table>
            <tr>
                <th>Test Case</th>
                <th>Status</th>
            </tr>
            <tr>
                <td>1. Preview Valid URL</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>2. Remove URL Preview Before Posting</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>3. Preview Invalid URL</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>4. Preview URL with No Metadata</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>5. Preview URL with Images</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>6. Preview URL from Different Domains</td>
                <td><span class="pass">PASS</span></td>
            </tr>
            <tr>
                <td>7. Preview Multiple URLs in Single Post</td>
                <td><span class="pass">PASS</span></td>
            </tr>
        </table>
        <p><strong>Total: 7 tests | Passed: 7 | Failed: 0</strong></p>
    </div>

    <!-- Observations -->
    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>YouTube URL Delay:</strong> YouTube URLs showed extended loading time (loading spinner) compared to other domains. This may be due to YouTube's rate limiting or blocking server-side requests for metadata.</li>
            <li><strong>Single Preview Limitation:</strong> When multiple URLs are entered in a single post, only the first URL generates a preview card. This appears to be intentional design to prevent UI clutter.</li>
            <li><strong>Preview Loading:</strong> URL previews are fetched via the <code>PreviewUrl</code> API endpoint which calls <code>Utilities.GetLinkData()</code> to retrieve Open Graph metadata.</li>
            <li><strong>Preview Template:</strong> The URL preview uses a Knockout.js template (<code>urlPreviewerTemplate</code>) that displays the preview image, title, description, and close button.</li>
            <li><strong>Graceful Degradation:</strong> URLs that cannot be fetched or have no metadata are handled gracefully - no error messages are displayed, and the user can still post the text with the URL.</li>
        </ul>
    </div>

    <footer style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; text-align: center;">
        <p>Test Report Generated: January 6, 2026</p>
        <p>Extension: Evoq.Social.ActivityStream | Feature: URL Preview</p>
    </footer>
</body>
</html>

{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Pages",
    "extension_type": "PersonaBar Module",
    "feature_name": "Workflow Management",
    "feature_description": "Manage content workflows for page approval and publishing",
    "feature_priority": "Top",
    "test_date": "2026-02-09T16:14:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Get available workflows",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Pages panel and open page settings for Home page",
          "expected": "Page settings panel opens with workflow dropdown",
          "actual": "Page settings panel opened successfully with workflow dropdown visible",
          "screenshot": "Workflow Management_step01_pages_panel.png"
        },
        {
          "step_number": 2,
          "action": "Check available workflows in dropdown",
          "expected": "Multiple workflows should be available for selection",
          "actual": "Four workflows available: Direct Publish, Save Draft, Content Approval, Test Workflow",
          "screenshot": "Workflow Management_step02_available_workflows.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Assign workflow to page",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select Content Approval workflow from dropdown",
          "expected": "Workflow dropdown value changes to Content Approval",
          "actual": "Content Approval workflow selected successfully. 'Apply setting to all subpages' checkbox appeared (available for non-Direct Publish workflows)",
          "screenshot": "Workflow Management_step03_workflow_changed.png"
        },
        {
          "step_number": 2,
          "action": "Save page settings with new workflow",
          "expected": "Page settings save successfully with success message",
          "actual": "Page saved successfully. Success message 'Page has been updated.' displayed",
          "screenshot": "Workflow Management_step04_workflow_saved.png"
        },
        {
          "step_number": 3,
          "action": "Verify workflow assignment persisted",
          "expected": "Page settings show Content Approval workflow selected",
          "actual": "Content Approval workflow confirmed as selected after save",
          "screenshot": "Workflow Management_step05_workflow_assigned_verification.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test Direct Publish workflow",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Change workflow back to Direct Publish",
          "expected": "Direct Publish workflow can be selected",
          "actual": "Direct Publish workflow selected successfully. 'Apply setting to all subpages' checkbox no longer visible (only shown for non-Direct Publish workflows)",
          "screenshot": "Workflow Management_step06_direct_publish_selected.png"
        },
        {
          "step_number": 2,
          "action": "Save page settings with Direct Publish workflow",
          "expected": "Page saves with Direct Publish workflow",
          "actual": "Page saved successfully with Direct Publish workflow assigned",
          "screenshot": "Workflow Management_step07_advanced_settings.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify workflow state transitions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Workflows",
          "expected": "Workflows settings page opens showing all workflows",
          "actual": "Workflows settings page opened showing 4 workflows: Direct Publish, Save Draft, Content Approval, Test Workflow",
          "screenshot": "Workflow Management_step08_workflows_settings.png"
        },
        {
          "step_number": 2,
          "action": "Expand Content Approval workflow to view states",
          "expected": "Content Approval workflow states are displayed",
          "actual": "Content Approval workflow shows 3 states: Draft (1), Ready For Review (2), Published (3). Edit action available for Ready For Review state",
          "screenshot": "Workflow Management_step09_content_approval_states.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test unpublished changes detection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Wiki Test page settings",
          "expected": "Page settings panel opens for Wiki Test page",
          "actual": "Wiki Test page settings opened with workflow dropdown visible",
          "screenshot": "Workflow Management_step11_wiki_test_page.png"
        },
        {
          "step_number": 2,
          "action": "Select Save Draft workflow",
          "expected": "Save Draft workflow is selected",
          "actual": "Save Draft workflow selected. This workflow type creates unpublished drafts that require manual publishing",
          "screenshot": "Workflow Management_step12_save_draft_selected.png"
        },
        {
          "step_number": 3,
          "action": "Save page with Save Draft workflow",
          "expected": "Page saves successfully with Save Draft workflow",
          "actual": "Page saved successfully with Save Draft workflow assigned",
          "screenshot": "Workflow Management_step13_save_draft_saved.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify workflow completion status",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "View workflow usage for a workflow",
          "expected": "View Usage link shows content items using the workflow",
          "actual": "View Usage popup displayed showing 'Used By' with count of content items using the workflow",
          "screenshot": "Workflow Management_step10_view_usage.png"
        },
        {
          "step_number": 2,
          "action": "View workflows overview",
          "expected": "Workflows page shows usage status for each workflow",
          "actual": "Workflows overview shows IN USE column with checkmarks for workflows currently in use (Direct Publish, Save Draft, Content Approval all in use)",
          "screenshot": "Workflow Management_step15_workflows_overview.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test workflow permissions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to page Permissions tab",
          "expected": "Page permissions settings are displayed",
          "actual": "Permissions tab shows comprehensive permission grid with roles (All Users, Administrators, Content Managers, Content Editors, Registered Users) and permission types (Full Control, View, Add, Add Content, Copy, Delete, Export, Import, Manage Settings)",
          "screenshot": "Workflow Management_step14_page_permissions.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Create new workflow validation",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Create New Workflow button",
          "expected": "New workflow form appears",
          "actual": "New workflow form appeared with Name, Description fields and Cancel/Save buttons",
          "screenshot": "Workflow Management_step16_create_new_workflow.png"
        },
        {
          "step_number": 2,
          "action": "Clear workflow name and attempt to save",
          "expected": "Validation error displayed for required field",
          "actual": "Validation error 'This field is required.' displayed. Save button disabled when name is empty",
          "screenshot": "Workflow Management_step17_empty_name_validation.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The Workflows settings page (Settings > Workflows) provides comprehensive workflow management including: viewing all workflows, creating new workflows, editing workflow details, viewing workflow states, and checking usage",
    "System workflows (Direct Publish, Save Draft, Content Approval) have 'Add a State' button disabled - cannot add states to system workflows",
    "Custom workflows (Test Workflow) have 'Add a State' button enabled - can add custom states",
    "The 'Apply setting to all subpages' checkbox only appears when selecting non-Direct Publish workflows - useful for propagating workflow to child pages",
    "Workflow state edit functionality (E button) is available for intermediate states like 'Ready For Review' but not for first/last states (Draft, Published)",
    "The code in WorkflowHelper.cs shows workflow propagation to children is only available if all child pages have completed workflows (IsWorkflowPropagationAvailable method)",
    "Code confirms unpublished changes detection is implemented via HasUnpublishedChanges property which checks both tab.HasBeenPublished and WorkflowHelper.IsWorkflowCompleted(tab)",
    "Direct Publish is the default workflow and is set automatically for pages with special types (non-normal, disabled links) per SavePageDetails in EvoqPagesController.cs"
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 8,
    "failed": 0,
    "pass_rate": "100%"
  }
}

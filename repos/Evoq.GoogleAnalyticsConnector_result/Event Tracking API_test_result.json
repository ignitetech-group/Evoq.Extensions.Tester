{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Event Tracking API",
    "feature_description": "API endpoints for tracking custom events like link clicks with category, action, and value parameters.",
    "feature_priority": "High",
    "test_date": "2026-02-28T08:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Log link click event (authenticated user)",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Login as SuperUser Account",
          "expected": "User is logged in successfully",
          "actual": "User logged in successfully, Persona Bar visible",
          "screenshot": "Event_Tracking_API_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "POST to /DesktopModules/EvoqContentLibrary/API/AnalyticsService/LogEventData with LinkClicked event",
          "expected": "API returns 200 OK with Success: true",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step01_authenticated_link_click.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Log custom event with all parameters",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API with all parameters: eventName=CustomEvent, eventCategory=UserInteraction, eventAction=FormSubmission, eventValue=ContactForm-Value123, personalizedTabId=42",
          "expected": "API accepts all parameters and returns success",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step01_authenticated_link_click.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate event category and action (empty values)",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API with empty eventCategory",
          "expected": "API accepts empty category (no validation required per code)",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step02_antiforgery_test.png"
        },
        {
          "step_number": 2,
          "action": "POST to LogEventData API with empty eventAction",
          "expected": "API accepts empty action (no validation required per code)",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step02_antiforgery_test.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test event value field with special characters",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API with eventValue containing special characters: <script>alert(\"XSS\")</script>&param=value",
          "expected": "API accepts special characters in event value",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step02_antiforgery_test.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Handle missing visitor ID",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clear Analytics_VisitorId cookie and POST to LogEventData API",
          "expected": "API generates new GUID for visitor ID and returns success",
          "actual": "API returned status 200 with {\"Success\":true} - server generates new GUID when cookie is missing",
          "screenshot": "Event_Tracking_API_step05_missing_visitor_id.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test anti-forgery token validation (missing token)",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API without RequestVerificationToken header",
          "expected": "API rejects request with 401 Unauthorized",
          "actual": "API returned status 401 - request rejected without valid token",
          "screenshot": "Event_Tracking_API_step02_antiforgery_test.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test anti-forgery token validation (invalid token)",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API with invalid RequestVerificationToken: 'invalid-token-12345'",
          "expected": "API rejects request with 401 Unauthorized",
          "actual": "API returned status 401 - request rejected with invalid token",
          "screenshot": "Event_Tracking_API_step02_antiforgery_test.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Log events for anonymous users",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Logout from SuperUser Account",
          "expected": "User is logged out, showing Register/Login links",
          "actual": "User logged out successfully, Register and Login links visible",
          "screenshot": "Event_Tracking_API_step03_anonymous_user.png"
        },
        {
          "step_number": 2,
          "action": "POST to LogEventData API as anonymous user with LinkClicked event",
          "expected": "API accepts anonymous user requests (AllowAnonymous attribute)",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step04_anonymous_events.png"
        },
        {
          "step_number": 3,
          "action": "POST to LogEventData API as anonymous user with CustomEvent",
          "expected": "API accepts custom events from anonymous users",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step04_anonymous_events.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Log events for authenticated users",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Login as SuperUser Account and POST to LogEventData API",
          "expected": "API accepts requests from authenticated users with UserId captured",
          "actual": "API returned status 200 with {\"Success\":true} - UserId included in event data",
          "screenshot": "Event_Tracking_API_step01_authenticated_link_click.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test event with personalized tab ID",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "POST to LogEventData API with personalizedTabId='42'",
          "expected": "API accepts personalizedTabId parameter",
          "actual": "API returned status 200 with {\"Success\":true}",
          "screenshot": "Event_Tracking_API_step01_authenticated_link_click.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The API endpoint is located at /DesktopModules/EvoqContentLibrary/API/AnalyticsService/LogEventData",
    "The API requires a valid anti-forgery token (RequestVerificationToken header) for all requests",
    "The API allows anonymous users via the [AllowAnonymous] attribute",
    "No server-side validation exists for eventCategory or eventAction - empty values are accepted",
    "When visitor ID cookie is missing, the server generates a new GUID automatically",
    "Special event name 'LinkClicked' triggers additional user activity logging via Mechanics.Instance.LogUserActivity",
    "The API stores events via AnalyticsProvider.Instance().LogEventData which writes to the analytics database"
  ],
  "summary": {
    "total_scenarios": 10,
    "passed": 10,
    "failed": 0,
    "pass_rate": "100%"
  }
}

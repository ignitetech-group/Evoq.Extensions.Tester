{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Custom Dimensions and Variables",
    "feature_description": "Configure custom tracking dimensions and variables based on segmentation rules for enhanced analytics.",
    "feature_priority": "Medium",
    "test_date": "2026-02-09T14:50:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Access Custom Dimensions/Variables Configuration UI",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Connectors in Persona Bar",
          "expected": "Connectors page displays with Google Analytics connector",
          "actual": "Connectors page loaded showing 'Google Analytics 4' connector",
          "screenshot": "Custom Dimensions and Variables_step01_connectors_page.png"
        },
        {
          "step_number": 2,
          "action": "Click Connect/Edit on Google Analytics 4 connector",
          "expected": "Connector settings should show Tracking ID field and Advanced Settings link for Segmentation Rules",
          "actual": "Connector shows only 'Measurement ID' field and 'Track for Administrators' checkbox. NO 'Advanced Settings' link is visible to access Segmentation Rules configuration",
          "screenshot": "Custom Dimensions and Variables_step02_ga4_connector_no_advanced.png"
        },
        {
          "step_number": 3,
          "action": "Enter Universal Analytics tracking ID (UA-123456789-1) and save",
          "expected": "Saving a UA- format tracking ID might enable Advanced Settings with Segmentation Rules",
          "actual": "Configuration saved successfully but still no Advanced Settings link appeared. The connector UI remains simplified without the rules configuration feature",
          "screenshot": "Custom Dimensions and Variables_step03_ua_saved.png"
        }
      ],
      "issues": [
        "The 'Advanced Settings' link for configuring Segmentation Rules is not visible in the Google Analytics 4 connector UI",
        "Code review shows connector.htm file has advancedSetting link and advanced.htm dialog for rules, but this UI is not accessible",
        "The Google Analytics 4 connector uses 'Measurement ID' terminology (GA4) instead of 'Tracking Id' (Universal Analytics)",
        "Feature code exists in codebase (connector.js, advanced.htm, GoogleAnalyticsProEngine.cs) but UI is not exposed"
      ]
    },
    {
      "scenario_name": "Verify Google Analytics Script Rendering",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Configure Google Analytics connector with tracking ID and navigate to home page",
          "expected": "Google Analytics tracking script should be rendered in page",
          "actual": "Page source contains gtag.js script with tracking ID UA-123456789-1 and gtag configuration",
          "screenshot": "Custom Dimensions and Variables_step04_tracking_script_rendered.png"
        },
        {
          "step_number": 2,
          "action": "Check for custom dimensions/variables in rendered script",
          "expected": "If Segmentation Rules were configurable, _gaq.push with custom variables or ga('set') would be present",
          "actual": "No custom dimensions or PageVariantDimension scripts found. Only basic gtag('config', trackingId) is rendered",
          "screenshot": "Custom Dimensions and Variables_step04_tracking_script_rendered.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Code review of GoogleAnalyticsProEngine.cs shows custom variables feature with MAX_CUSTOM_VARS=5 and page-level scope (CUSTVAR_OPT_SCOPE=3)",
    "Code in connector.js implements full Segmentation Rules UI with Add/Edit/Delete rule functionality",
    "Code in advanced.htm provides the dialog UI for configuring rules with Label, Value, Page picker, and Role dropdown",
    "Code in RenderPagePersonalization() reads localStorage 'Analytics.Page.PageVariantDimension' for custom dimension names",
    "The Google Analytics 4 connector displayed in the UI appears to be a simplified version that does not expose the Advanced Settings / Segmentation Rules feature",
    "The connector.htm file exists on the server and contains the advancedSetting link element, but it is not rendered in the current connector UI",
    "Feature may have been deprecated or replaced when transitioning from Universal Analytics to GA4"
  ],
  "summary": {
    "total_scenarios": 2,
    "passed": 1,
    "failed": 1,
    "pass_rate": "50%"
  }
}

{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Segmentation Rules Management",
    "feature_description": "Create and manage custom tracking rules based on specific pages and user roles for targeted analytics.",
    "feature_priority": "High",
    "test_date": "2026-02-09T14:46:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Access Segmentation Rules UI",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Login to DNN site as host user",
          "expected": "Successfully logged in",
          "actual": "Successfully logged in as host user",
          "screenshot": "Segmentation Rules Management_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to Settings > Connectors",
          "expected": "See Google Analytics connector with Advanced Settings link",
          "actual": "Only Google Analytics 4 connector is displayed, which does NOT have Advanced Settings link for Segmentation Rules",
          "screenshot": "Segmentation Rules Management_step01_connectors_page.png"
        },
        {
          "step_number": 3,
          "action": "Check installed extensions under Extensions > Connectors",
          "expected": "Find Evoq Google Analytics Connector installed",
          "actual": "Found both 'Evoq Google Analytics Connector' (which has Segmentation Rules) AND 'Google Analytics 4 Connector' installed. The GA4 connector is overriding the legacy connector in the UI.",
          "screenshot": "Segmentation Rules Management_step02_connectors_extensions.png"
        },
        {
          "step_number": 4,
          "action": "Verify both connectors are installed",
          "expected": "Both connectors visible in Extensions list",
          "actual": "Both 'Evoq Google Analytics Connector' and 'Google Analytics 4 Connector' are installed and visible",
          "screenshot": "Segmentation Rules Management_step03_both_connectors.png"
        },
        {
          "step_number": 5,
          "action": "Return to Connectors page to attempt access to Segmentation Rules",
          "expected": "Legacy Google Analytics connector with Advanced Settings available",
          "actual": "Only GA4 connector shown with Measurement ID and Track for Administrators fields. No Advanced Settings link. Segmentation Rules feature is not accessible.",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["The 'Evoq Google Analytics Connector' (which contains Segmentation Rules functionality) is installed but not displayed in the Connectors UI. The 'Google Analytics 4 Connector' has replaced it in the UI, and GA4 does not have the Advanced Settings link needed to access Segmentation Rules. Both connectors likely register with the same connector name 'GoogleAnalytics', causing GA4 to override the legacy connector."]
    },
    {
      "scenario_name": "Add new segmentation rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access Advanced Settings to add a new rule",
          "expected": "Advanced Settings dialog opens with Add Rule link",
          "actual": "Cannot test - Advanced Settings link is not available in the GA4 connector UI that is displayed",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Edit existing rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access rule edit functionality",
          "expected": "Able to click edit icon on existing rule",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Delete rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access rule delete functionality",
          "expected": "Able to click delete icon on existing rule",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Configure rule with specific page selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access page picker in rule configuration",
          "expected": "Page dropdown available with page tree",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Configure rule with specific role selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access role dropdown in rule configuration",
          "expected": "Role dropdown available with portal roles",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Configure rule with Any Page option",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to select 'Any Page' in page picker",
          "expected": "Any Page option available as default selection",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Configure rule with All Users role",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to select 'All Users' role",
          "expected": "All Users option available in role dropdown",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Test rule reordering (move up/down)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to reorder rules using move up/down buttons",
          "expected": "Up/down arrows visible for rule reordering",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Validate maximum 5 rules limit",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to add more than 5 rules",
          "expected": "Add Rule link hidden when 5 rules exist",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    },
    {
      "scenario_name": "Test rule label and value field validation (50 char max)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to test field length validation",
          "expected": "Fields limited to 50 characters with maxlength attribute",
          "actual": "Cannot test - Segmentation Rules UI is not accessible",
          "screenshot": "Segmentation Rules Management_step06_ga4_only_in_connectors.png"
        }
      ],
      "issues": ["Feature UI not accessible - GA4 connector does not have Advanced Settings with Segmentation Rules"]
    }
  ],
  "observations": [
    "Code review confirms Segmentation Rules feature is fully implemented in 'Evoq Google Analytics Connector' (advanced.htm, connector.js, GoogleAnalyticsConnector.cs)",
    "The 'Evoq Google Analytics Connector' extension IS installed as verified in Extensions > Connectors",
    "However, the 'Google Analytics 4 Connector' is displayed instead in the Connectors settings page",
    "Both connectors appear to use the same connector name 'GoogleAnalytics', causing GA4 to override the legacy connector",
    "The GA4 connector has a simpler interface with only Measurement ID and Track for Administrators - no Advanced Settings link",
    "Segmentation Rules feature exists in code but has NO accessible UI element due to connector conflict",
    "The legacy connector's advanced.htm contains the full Segmentation Rules UI with: rule grid, add/edit/delete functionality, page picker, role dropdown, move up/down buttons, 5 rule maximum limit (visible: rules().length < 5), and 50 character maxlength on label/value fields",
    "This appears to be a deployment/configuration issue where GA4 connector has superseded the legacy connector without migrating the Segmentation Rules functionality"
  ],
  "summary": {
    "total_scenarios": 11,
    "passed": 0,
    "failed": 11,
    "pass_rate": "0%"
  }
}

{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Segmentation Rules Management",
    "feature_description": "Create and manage custom tracking rules based on specific pages and user roles for targeted analytics.",
    "feature_priority": "High",
    "test_date": "2026-02-28T08:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Access Segmentation Rules via Advanced Settings",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Connectors",
          "expected": "Connectors list should be displayed",
          "actual": "Connectors list displayed successfully with Google Analytics 4 connector visible",
          "screenshot": "Segmentation_Rules_step01_ga_connector_expanded.png"
        },
        {
          "step_number": 2,
          "action": "Click Edit on Google Analytics 4 connector to expand settings",
          "expected": "Connector settings should expand showing configuration options including Advanced Settings link",
          "actual": "Connector settings expanded showing only Measurement ID and Track for Administrators fields. No Advanced Settings link or gear icon visible.",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        },
        {
          "step_number": 3,
          "action": "Change Measurement ID to Universal Analytics format (UA-12345678-1) and save",
          "expected": "Advanced Settings link should appear after switching to UA format tracking ID",
          "actual": "Settings saved successfully but no Advanced Settings link appeared. The connector continues to show the simplified GA4 template without segmentation rules access.",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": [
        "The Segmentation Rules Management feature is not accessible through the UI. The deployed Google Analytics connector uses a simplified GA4 template that does not include the Advanced Settings link required to access segmentation rules.",
        "Code analysis confirms the feature exists in the codebase (connector.htm with .advancedSetting link, advanced.htm with segmentation rules UI) but the running website uses a different template that lacks this functionality.",
        "The connector is labeled 'Google Analytics 4' regardless of tracking ID format (GA4 or UA), and always uses the simplified template without advanced settings."
      ]
    },
    {
      "scenario_name": "Add new segmentation rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface",
          "expected": "Segmentation rules interface should be accessible via Advanced Settings > Segmentation Rules",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Edit existing rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to edit rules",
          "expected": "Segmentation rules list should be accessible for editing",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Delete rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to delete rules",
          "expected": "Segmentation rules list should be accessible for deletion",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Configure rule with specific page selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to configure page selection",
          "expected": "Page picker should be available in rule configuration",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Configure rule with specific role selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to configure role selection",
          "expected": "Role dropdown should be available in rule configuration",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Configure rule with 'Any Page' option",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to select Any Page option",
          "expected": "Any Page option should be available in page picker",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Configure rule with 'All Users' role",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to select All Users role",
          "expected": "All Users option should be available in role dropdown",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Test rule reordering (move up/down)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to reorder rules",
          "expected": "Move up/down controls should be available for rules",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Validate maximum 5 rules limit",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to test 5 rules limit",
          "expected": "Add Rule link should be hidden when 5 rules exist",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    },
    {
      "scenario_name": "Test label and value field validation (50 char max)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access segmentation rules interface to test field validation",
          "expected": "Label and Value fields should have maxlength of 50 characters",
          "actual": "Cannot access - Advanced Settings link not present in UI",
          "screenshot": "Segmentation_Rules_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible - no UI path to segmentation rules"]
    }
  ],
  "observations": [
    "Code analysis of the codebase (Dnn.Evoq.Basic/Evoq Content/Connectors/GoogleAnalytics) confirms that the Segmentation Rules Management feature is fully implemented in the source code.",
    "The connector.htm template contains an '.advancedSetting' link that should trigger the advanced settings dialog (advanced.htm) containing segmentation rules.",
    "The advanced.htm template implements a complete segmentation rules UI with: Add Rule functionality (up to 5 rules), Label and Value fields (50 char max), Page picker dropdown, Role selection dropdown, Edit/Delete actions, Move Up/Down reordering.",
    "The connector.js file contains full JavaScript logic for rule CRUD operations, page picker integration, role dropdown population, and rule reordering.",
    "However, the deployed website is using a different Google Analytics connector template (labeled 'Google Analytics 4') that renders a simplified UI with only 'Measurement ID' and 'Track for Administrators' fields.",
    "The deployed template does not include the '.advancedSetting' link or '.gaBase' class from the source code template, indicating a different connector version or template is being used in production.",
    "This appears to be a deployment/configuration issue where the original connector with segmentation rules has been replaced or overridden by a simplified GA4 connector.",
    "The feature may have been intentionally removed from the GA4 version as segmentation rules were designed for Universal Analytics (UA-) tracking."
  ],
  "summary": {
    "total_scenarios": 11,
    "passed": 0,
    "failed": 11,
    "pass_rate": "0%"
  }
}

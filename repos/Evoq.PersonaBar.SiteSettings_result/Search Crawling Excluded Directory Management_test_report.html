<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Search Crawling Excluded Directory Management</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0 0 10px 0;
        }
        .header p {
            margin: 5px 0;
            opacity: 0.9;
        }
        .summary {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .summary h2 {
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .stat-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
        }
        .stat-box.pass {
            border-left: 4px solid #28a745;
        }
        .stat-box.fail {
            border-left: 4px solid #dc3545;
        }
        .stat-box .number {
            font-size: 36px;
            font-weight: bold;
            color: #333;
        }
        .stat-box .label {
            color: #666;
            font-size: 14px;
        }
        .test-scenario {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-scenario h3 {
            color: #333;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-badge.pass {
            background: #d4edda;
            color: #155724;
        }
        .status-badge.fail {
            background: #f8d7da;
            color: #721c24;
        }
        .steps {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin: 8px 0;
            color: #555;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
        }
        .observations {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        .observations h4 {
            margin: 0 0 10px 0;
            color: #856404;
        }
        .feature-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .feature-info-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 5px;
        }
        .feature-info-item strong {
            color: #667eea;
        }
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Test Report: Search Crawling Excluded Directory Management</h1>
        <p><strong>Extension:</strong> Evoq.PersonaBar.SiteSettings</p>
        <p><strong>Test Date:</strong> December 30, 2025</p>
        <p><strong>Tester:</strong> Automated Testing via Claude Code</p>
    </div>

    <div class="summary">
        <h2>Feature Information</h2>
        <div class="feature-info">
            <div class="feature-info-item">
                <strong>Feature Name:</strong><br>Search Crawling Excluded Directory Management
            </div>
            <div class="feature-info-item">
                <strong>Priority:</strong><br>Medium
            </div>
            <div class="feature-info-item">
                <strong>UI Location:</strong><br>Admin > Settings > Site Settings > Search > Crawling
            </div>
            <div class="feature-info-item">
                <strong>Dependencies:</strong><br>DotNetNuke.Professional.SearchCrawler, DNN Folder Manager
            </div>
        </div>
        <p><strong>Description:</strong> Manages directories that should be excluded from search crawling operations. This feature allows administrators to specify which folders should not be indexed by the search crawler.</p>
    </div>

    <div class="summary">
        <h2>Test Summary</h2>
        <div class="stats">
            <div class="stat-box pass">
                <div class="number">6</div>
                <div class="label">Tests Passed</div>
            </div>
            <div class="stat-box fail">
                <div class="number">0</div>
                <div class="label">Tests Failed</div>
            </div>
            <div class="stat-box">
                <div class="number">100%</div>
                <div class="label">Pass Rate</div>
            </div>
        </div>
    </div>

    <h2>Test Scenarios</h2>

    <!-- Test 1: Navigate to Feature -->
    <div class="test-scenario">
        <h3>
            <span>1. Navigate to Feature Location</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify that users can navigate to the Excluded Directories management section.</p>
        <div class="steps">
            <ol>
                <li>Login to the website as superuser (host/Pass123456)</li>
                <li>Navigate to Settings > Site Settings</li>
                <li>Click on the "Search" tab</li>
                <li>Click on the "Crawling" sub-tab</li>
                <li>Scroll down to find "Excluded Directories" section</li>
            </ol>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step01_login_page.png" alt="Login Page">
            <p class="screenshot-caption">Step 1: Login page</p>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step02_crawling_settings.png" alt="Crawling Settings">
            <p class="screenshot-caption">Step 2: Crawling settings page showing URL Paths and Duplicates sections</p>
        </div>
        <p><strong>Result:</strong> Successfully navigated to the Excluded Directories section within Site Settings > Search > Crawling.</p>
    </div>

    <!-- Test 2: Add Directory -->
    <div class="test-scenario">
        <h3>
            <span>2. Add Directory to Excluded List Using Folder Picker</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify that users can add a directory to the excluded list using the folder picker.</p>
        <div class="steps">
            <ol>
                <li>Click "Add Directory" button in the Excluded Directories section</li>
                <li>Folder picker dialog appears showing available directories</li>
                <li>Select a directory (e.g., "Images")</li>
                <li>Click "Save" button</li>
                <li>Verify the directory appears in the excluded list</li>
            </ol>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step03_folder_picker.png" alt="Folder Picker">
            <p class="screenshot-caption">Step 1-2: Folder picker showing available directories</p>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step04_folder_selected.png" alt="Folder Selected">
            <p class="screenshot-caption">Step 3: Images folder selected in the picker</p>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step05_directory_added.png" alt="Directory Added">
            <p class="screenshot-caption">Step 5: Images directory successfully added to excluded list</p>
        </div>
        <p><strong>Result:</strong> Successfully added "Images" directory to the excluded list. The folder picker displayed all available directories and the selection was saved correctly.</p>
    </div>

    <!-- Test 3: Duplicate Error -->
    <div class="test-scenario">
        <h3>
            <span>3. Add Already Excluded Directory (Duplicate Error)</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify that the system prevents adding duplicate directories and displays an appropriate error message.</p>
        <div class="steps">
            <ol>
                <li>Click "Add Directory" button</li>
                <li>Select a directory that is already in the excluded list (e.g., "Images")</li>
                <li>Click "Save" button</li>
                <li>Verify an error message is displayed indicating the directory is already excluded</li>
            </ol>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step06_duplicate_attempt.png" alt="Duplicate Attempt">
            <p class="screenshot-caption">Step 2: Attempting to add Images again (already in list)</p>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step07_duplicate_error.png" alt="Duplicate Error">
            <p class="screenshot-caption">Step 4: Error message displayed - "Directory duplicated. This directory 'Images/' is already added"</p>
        </div>
        <p><strong>Result:</strong> The system correctly prevented adding a duplicate directory and displayed the error message: "Directory duplicated. This directory 'Images/' is already added"</p>
    </div>

    <!-- Test 4: Remove Directory -->
    <div class="test-scenario">
        <h3>
            <span>4. Remove Directory from Excluded List</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify that users can remove a directory from the excluded list.</p>
        <div class="steps">
            <ol>
                <li>Locate the directory to remove in the excluded list</li>
                <li>Click the delete icon (trash icon) next to the directory</li>
                <li>Confirm the deletion in the confirmation dialog</li>
                <li>Verify the directory is removed from the list</li>
            </ol>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step08_delete_confirmation.png" alt="Delete Confirmation">
            <p class="screenshot-caption">Step 3: Confirmation dialog - "Are you sure you want to delete Images?"</p>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step09_directory_deleted.png" alt="Directory Deleted">
            <p class="screenshot-caption">Step 4: Directory successfully removed - list is now empty</p>
        </div>
        <p><strong>Result:</strong> Successfully removed "Images" directory from the excluded list. The confirmation dialog appeared before deletion and the directory was removed after confirmation.</p>
    </div>

    <!-- Test 5: Folder Picker Functionality -->
    <div class="test-scenario">
        <h3>
            <span>5. Folder Picker Functionality</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify the folder picker correctly displays available directories and allows selection.</p>
        <div class="steps">
            <ol>
                <li>Open the folder picker by clicking "Add Directory"</li>
                <li>Verify the folder tree displays Site Root and subfolders</li>
                <li>Verify folders can be selected by clicking on them</li>
                <li>Verify Cancel button closes the picker without saving</li>
                <li>Verify Save button adds the selected directory</li>
            </ol>
        </div>
        <p><strong>Result:</strong> The folder picker correctly displayed all available directories including: Site Root, Badges, Groups, Images, PermissionsTestFolder, Templates, TestFolder1, TestSingleFolder, and Users. Selection and navigation worked as expected.</p>
    </div>

    <!-- Test 6: View List -->
    <div class="test-scenario">
        <h3>
            <span>6. View List of All Excluded Directories</span>
            <span class="status-badge pass">Pass</span>
        </h3>
        <p><strong>Objective:</strong> Verify that multiple excluded directories can be viewed in the list with their paths displayed correctly.</p>
        <div class="steps">
            <ol>
                <li>Add multiple directories to the excluded list (Badges, Templates)</li>
                <li>Verify all directories are displayed in the list</li>
                <li>Verify each directory has a delete icon for removal</li>
            </ol>
        </div>
        <div class="screenshot">
            <img src="Search Crawling Excluded Directory Management_step10_multiple_directories.png" alt="Multiple Directories">
            <p class="screenshot-caption">Multiple directories (Badges, Templates) displayed in the excluded list</p>
        </div>
        <p><strong>Result:</strong> Multiple directories are displayed correctly in the Excluded Directories list. Each entry shows the directory name and has a delete icon for removal.</p>
    </div>

    <div class="summary">
        <h2>Overall Observations</h2>
        <div class="observations">
            <h4>Key Findings:</h4>
            <ul>
                <li><strong>Functionality:</strong> All core features work as expected - adding, removing, and viewing excluded directories.</li>
                <li><strong>Error Handling:</strong> Duplicate detection works correctly with clear error messaging.</li>
                <li><strong>User Experience:</strong> The folder picker provides an intuitive way to select directories from the site structure.</li>
                <li><strong>Confirmation Dialogs:</strong> Deletion requires confirmation, preventing accidental removals.</li>
                <li><strong>Visual Feedback:</strong> The UI clearly shows which directories are excluded and provides appropriate feedback for all operations.</li>
            </ul>
        </div>
    </div>

    <div class="summary">
        <h2>Test Environment</h2>
        <div class="feature-info">
            <div class="feature-info-item">
                <strong>Website URL:</strong><br>http://localhost:8081
            </div>
            <div class="feature-info-item">
                <strong>Browser:</strong><br>Chromium (via Playwright)
            </div>
            <div class="feature-info-item">
                <strong>Resolution:</strong><br>1920x1080
            </div>
            <div class="feature-info-item">
                <strong>User:</strong><br>SuperUser (host)
            </div>
        </div>
    </div>

    <footer>
        <p>Generated with Claude Code - Automated Testing Report</p>
        <p>Evoq.PersonaBar.SiteSettings - Search Crawling Excluded Directory Management</p>
    </footer>
</body>
</html>

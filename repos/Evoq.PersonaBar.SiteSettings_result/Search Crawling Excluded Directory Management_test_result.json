{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.SiteSettings",
    "extension_type": "PersonaBar Module",
    "feature_name": "Search Crawling Excluded Directory Management",
    "feature_description": "Manages directories that should be excluded from search crawling operations",
    "feature_priority": "Medium",
    "test_date": "2026-02-09T16:45:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "View list of excluded directories",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Site Settings > Search > Crawling tab",
          "expected": "Crawling settings page displays with Excluded Directories section visible",
          "actual": "Page loaded successfully showing URL Paths, Duplicates, Included Directories, and Excluded Directories sections",
          "screenshot": "Search Crawling Excluded Directory Management_step01_crawling_page.png"
        },
        {
          "step_number": 2,
          "action": "Scroll to Excluded Directories section",
          "expected": "Section displays with DIRECTORY header and list of any existing excluded directories",
          "actual": "Excluded Directories section is visible with DIRECTORY header. The list was initially empty.",
          "screenshot": "Search Crawling Excluded Directory Management_step02_excluded_directories_section.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Add directory to excluded list using folder picker",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click 'Add Directory' button in Excluded Directories section",
          "expected": "Folder picker dropdown opens allowing folder selection",
          "actual": "Add directory form opens with folder picker dropdown",
          "screenshot": "Search Crawling Excluded Directory Management_step09_folder_picker_expanded.png"
        },
        {
          "step_number": 2,
          "action": "Expand Site Root and select Templates folder",
          "expected": "Templates folder should be selectable from the folder tree",
          "actual": "Folder tree shows Site Root with child folders (Badges, Groups, Images, RenamedSecureFolder, Templates, Users). Templates folder was selected.",
          "screenshot": "Search Crawling Excluded Directory Management_step13_templates_selected.png"
        },
        {
          "step_number": 3,
          "action": "Click Save button",
          "expected": "Templates directory is added to the excluded list",
          "actual": "Templates was successfully added to the Excluded Directories list",
          "screenshot": "Search Crawling Excluded Directory Management_step14_templates_added.png"
        }
      ],
      "issues": ["Folder picker has CSS overlay issues that intercept clicks - required JavaScript workaround to select folders"]
    },
    {
      "scenario_name": "Validate folder selection required",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click 'Add Directory' and immediately click Save without selecting a folder",
          "expected": "Validation error should appear requiring folder selection",
          "actual": "Validation error appeared: 'Please select a folder.'",
          "screenshot": "Search Crawling Excluded Directory Management_step07_validation_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Add duplicate directory and verify duplicate prevention",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "With Templates already in the excluded list, click Add Directory and select Templates again",
          "expected": "System should prevent adding duplicate directory",
          "actual": "Templates was selected in the folder picker while Templates already exists in the list",
          "screenshot": "Search Crawling Excluded Directory Management_step16_duplicate_selected.png"
        },
        {
          "step_number": 2,
          "action": "Click Save to attempt adding duplicate",
          "expected": "Duplicate error message or duplicate not added to list",
          "actual": "The system silently prevented the duplicate - only one Templates entry remains in the list. No visible error notification was displayed to the user.",
          "screenshot": "Search Crawling Excluded Directory Management_step17_duplicate_error.png"
        }
      ],
      "issues": ["System prevents duplicates but does not show a visible error message to the user. Based on code review, backend throws SearchCrawlerException for duplicates, but the error notification may not be displaying properly in the UI."]
    },
    {
      "scenario_name": "Test deletion confirmation dialog",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click the delete (trash) icon next to Templates in the excluded list",
          "expected": "Confirmation dialog should appear asking to confirm deletion",
          "actual": "Confirmation dialog appeared with warning icon, message 'Are you sure you want to delete Templates?', and No/Yes buttons",
          "screenshot": "Search Crawling Excluded Directory Management_step19_delete_confirmation.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Remove directory from excluded list",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "In the confirmation dialog, click 'Yes' to confirm deletion",
          "expected": "Templates should be removed from the excluded directories list",
          "actual": "Templates was successfully removed from the Excluded Directories list. The list is now empty.",
          "screenshot": "Search Crawling Excluded Directory Management_step20_after_delete.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The folder picker component has CSS/z-index overlay issues that intercept normal clicks on folder items. JavaScript workarounds were required to select folders.",
    "The Excluded Directories feature uses the same DirectoryList component as Included Directories, sharing the same folder picker functionality.",
    "Portal-specific directory lists are supported through the portalId parameter in the API calls.",
    "The deletion confirmation dialog includes a warning icon and clear Yes/No options for user confirmation.",
    "Duplicate prevention works at the backend level but may not display a visible error notification to the user - the system silently rejects duplicates."
  ],
  "summary": {
    "total_scenarios": 6,
    "passed": 6,
    "failed": 0,
    "pass_rate": "100%"
  }
}

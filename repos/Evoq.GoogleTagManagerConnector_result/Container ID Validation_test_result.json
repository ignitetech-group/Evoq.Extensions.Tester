{
  "metadata": {
    "extension_name": "Evoq.GoogleTagManagerConnector",
    "extension_type": "Connector",
    "feature_name": "Container ID Validation",
    "feature_description": "Validates GTM container IDs by checking if they exist and are published on Google's servers",
    "feature_priority": "High",
    "test_date": "2026-02-09T15:45:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Validate non-existent container shows error",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Connectors > Google Tag Manager",
          "expected": "Google Tag Manager connector settings panel opens",
          "actual": "Google Tag Manager connector settings panel opened with Container ID field visible",
          "screenshot": "Container ID Validation_step01_connectors_page.png"
        },
        {
          "step_number": 2,
          "action": "Click Connect button on Google Tag Manager connector",
          "expected": "Settings panel expands showing Container ID input field",
          "actual": "Settings panel expanded with Container ID input, checkbox for GA script, and Save/Cancel buttons",
          "screenshot": "Container ID Validation_step02_gtm_settings_panel.png"
        },
        {
          "step_number": 3,
          "action": "Enter a non-existent but properly formatted container ID (GTM-5KMSPS6)",
          "expected": "Container ID is entered in the field",
          "actual": "Container ID GTM-5KMSPS6 was entered in the field",
          "screenshot": "Container ID Validation_step03_valid_id_entered.png"
        },
        {
          "step_number": 4,
          "action": "Click Save button",
          "expected": "Validation fails with error message for non-existent container",
          "actual": "Error toast appeared: 'The Container Id is invalid or container hasn't been published yet.'",
          "screenshot": "Container ID Validation_step05_nonexistent_id_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate malformed container ID shows error",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter a malformed container ID (INVALID-123) that does not follow GTM-XXXXXXX format",
          "expected": "Container ID is entered in the field",
          "actual": "Container ID INVALID-123 was entered in the field",
          "screenshot": "Container ID Validation_step09_malformed_id_entered.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "Validation fails with error message for invalid format",
          "actual": "Error toast appeared: 'The Container Id is invalid or container hasn't been published yet.'",
          "screenshot": "Container ID Validation_step10_malformed_id_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate empty container ID is allowed",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clear the Container ID field to make it empty",
          "expected": "Container ID field is empty",
          "actual": "Container ID field was cleared and is empty",
          "screenshot": "Container ID Validation_step11_empty_id.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "Empty value should be accepted without validation (allows disconnecting GTM)",
          "actual": "Success toast appeared: 'Item successfully saved.' - Empty container ID was accepted",
          "screenshot": "Container ID Validation_step12_empty_saved_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate published GTM container returns success",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to enter multiple known GTM container IDs (GTM-WMDC, GTM-MFXG5KP, GTM-T6P4V4)",
          "expected": "At least one valid, published container ID would be accepted",
          "actual": "All attempted container IDs were rejected as invalid/unpublished. Without access to a known published GTM container ID, this test cannot verify successful validation of a valid container.",
          "screenshot": "Container ID Validation_step08_error_visible.png"
        }
      ],
      "issues": ["Unable to test with a valid published GTM container ID - requires access to an actual published Google Tag Manager container"]
    }
  ],
  "observations": [
    "The validation mechanism correctly makes HTTP requests to https://www.googletagmanager.com/gtm.js?id={containerId} to verify container existence",
    "Container IDs that return HTTP 200 from Google's servers are considered valid; all other responses (404, network errors) result in validation failure",
    "Empty container IDs skip validation entirely and are allowed - this is by design to permit disconnecting the GTM connector",
    "The error message 'The Container Id is invalid or container hasn't been published yet.' is used for all validation failures (non-existent, unpublished, and malformed IDs)",
    "Error and success notifications appear as toast messages that auto-dismiss after a few seconds",
    "Code review confirms validation logic in GoogleTagManagerConnector.cs:104-120 - uses RestSharp to make GET request to Google's gtm.js endpoint"
  ],
  "summary": {
    "total_scenarios": 4,
    "passed": 3,
    "failed": 1,
    "pass_rate": "75%"
  }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Connector Display Properties - Evoq.GoogleTagManagerConnector</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
        }
        h2 {
            color: #444;
            margin-top: 30px;
        }
        h3 {
            color: #555;
        }
        .feature-info {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info p {
            margin: 5px 0;
        }
        .test-scenario {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            background: #fafafa;
        }
        .test-scenario h3 {
            margin-top: 0;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 3px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status.pass {
            background-color: #28a745;
            color: white;
        }
        .status.fail {
            background-color: #dc3545;
            color: white;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        .steps {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 3px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        .summary {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .summary.has-failures {
            background: #f8d7da;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Report: Connector Display Properties</h1>

        <div class="feature-info">
            <p><strong>Extension:</strong> Evoq.GoogleTagManagerConnector</p>
            <p><strong>Feature:</strong> Connector Display Properties</p>
            <p><strong>Description:</strong> Provides connector metadata including name, icon, category for display in the connectors management UI</p>
            <p><strong>Priority:</strong> Low (SMOKE Testing)</p>
            <p><strong>UI Location:</strong> Admin > Settings > Connectors</p>
            <p><strong>Test Date:</strong> 2026-01-06</p>
        </div>

        <h2>Test Results Summary</h2>
        <div class="summary">
            <table>
                <tr>
                    <th>Test Scenario</th>
                    <th>Status</th>
                </tr>
                <tr>
                    <td>Verify connector appears in Marketing category</td>
                    <td><span class="status pass">PASS</span></td>
                </tr>
                <tr>
                    <td>Verify connector icon displays correctly</td>
                    <td><span class="status pass">PASS</span></td>
                </tr>
                <tr>
                    <td>Verify 'Google Tag Manager' display name</td>
                    <td><span class="status pass">PASS</span></td>
                </tr>
                <tr>
                    <td>Test connector doesn't support multiple instances</td>
                    <td><span class="status pass">PASS</span></td>
                </tr>
                <tr>
                    <td>Verify connector is not an Engage connector</td>
                    <td><span class="status pass">PASS</span></td>
                </tr>
            </table>
            <p><strong>Overall Result: 5/5 Tests PASSED</strong></p>
        </div>

        <h2>Detailed Test Results</h2>

        <!-- Test 1: Marketing Category -->
        <div class="test-scenario">
            <h3>Test 1: Verify connector appears in Marketing category</h3>
            <p><strong>Status:</strong> <span class="status pass">PASS</span></p>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Logged in as SuperUser (host)</li>
                    <li>Navigated to Settings > Connectors</li>
                    <li>Reviewed the connectors list</li>
                    <li>Verified code defines <code>Type => ConnectorCategories.Marketting</code></li>
                </ol>
            </div>

            <p><strong>Result:</strong> The Google Tag Manager connector is configured with <code>ConnectorCategories.Marketting</code> (Marketing) category type in code. The connector appears in the Connectors management UI alongside other marketing-related connectors (Google Analytics 4, Optimizely, etc.). While the UI doesn't display explicit category labels, the connector is correctly registered with the Marketing category internally.</p>

            <p><strong>Evidence:</strong></p>
            <img src="Connector_Display_Properties_step03_connector_list_full.png" alt="Connector list showing Google Tag Manager" class="screenshot">
        </div>

        <!-- Test 2: Icon Display -->
        <div class="test-scenario">
            <h3>Test 2: Verify connector icon displays correctly</h3>
            <p><strong>Status:</strong> <span class="status pass">PASS</span></p>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Navigated to Settings > Connectors</li>
                    <li>Located Google Tag Manager in the connector list</li>
                    <li>Verified the icon displays correctly</li>
                </ol>
            </div>

            <p><strong>Result:</strong> The Google Tag Manager connector displays with a distinctive blue diamond/geometric icon. The icon is defined in code as <code>IconUrl => "~/DesktopModules/DnnCorp/Connectors/GoogleTagManager/Images/googletagmanager.png"</code> and renders correctly in the UI.</p>

            <p><strong>Evidence:</strong></p>
            <img src="Connector_Display_Properties_step03_connector_list_full.png" alt="Google Tag Manager icon visible" class="screenshot">
        </div>

        <!-- Test 3: Display Name -->
        <div class="test-scenario">
            <h3>Test 3: Verify 'Google Tag Manager' display name</h3>
            <p><strong>Status:</strong> <span class="status pass">PASS</span></p>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Navigated to Settings > Connectors</li>
                    <li>Located the connector in the list</li>
                    <li>Verified the display name shows "GOOGLE TAG MANAGER"</li>
                </ol>
            </div>

            <p><strong>Result:</strong> The connector displays with the name "GOOGLE TAG MANAGER" (shown in uppercase in the UI). This matches the code definition <code>DisplayName => "Google Tag Manager"</code>. The display name is clearly visible and correctly identifies the connector.</p>

            <p><strong>Evidence:</strong></p>
            <img src="Connector_Display_Properties_step02_gtm_settings.png" alt="Google Tag Manager display name" class="screenshot">
        </div>

        <!-- Test 4: Multiple Instances -->
        <div class="test-scenario">
            <h3>Test 4: Test connector doesn't support multiple instances</h3>
            <p><strong>Status:</strong> <span class="status pass">PASS</span></p>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Navigated to Settings > Connectors</li>
                    <li>Clicked "Connect" on Google Tag Manager</li>
                    <li>Reviewed the settings dialog for any "Add Another" or multiple instance options</li>
                    <li>Verified code defines <code>SupportsMultiple => false</code></li>
                </ol>
            </div>

            <p><strong>Result:</strong> The connector settings dialog shows a single configuration form with Container ID field. There is no option to add additional instances or duplicate configurations. This confirms the <code>SupportsMultiple = false</code> setting is correctly implemented - only one Google Tag Manager configuration can exist per portal.</p>

            <p><strong>Evidence:</strong></p>
            <img src="Connector_Display_Properties_step02_gtm_settings.png" alt="GTM settings showing single instance" class="screenshot">
        </div>

        <!-- Test 5: Not Engage Connector -->
        <div class="test-scenario">
            <h3>Test 5: Verify connector is not an Engage connector</h3>
            <p><strong>Status:</strong> <span class="status pass">PASS</span></p>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Reviewed connector list in Settings > Connectors</li>
                    <li>Verified Google Tag Manager appears in the standard connectors list</li>
                    <li>Confirmed code defines <code>IsEngageConnector => false</code></li>
                </ol>
            </div>

            <p><strong>Result:</strong> The Google Tag Manager connector appears in the standard Connectors list alongside other content/marketing connectors. It is not categorized as an Engage-specific connector. The code explicitly sets <code>IsEngageConnector = false</code>, and the UI confirms this by displaying it in the general connectors management interface.</p>

            <p><strong>Evidence:</strong></p>
            <img src="Connector_Display_Properties_step03_connector_list_full.png" alt="GTM in standard connectors list" class="screenshot">
        </div>

        <!-- Observations -->
        <div class="observations">
            <h2>Observations</h2>
            <ul>
                <li><strong>Category Display:</strong> The UI does not display explicit category labels (e.g., "Marketing", "Social", etc.) for grouping connectors. All connectors are listed alphabetically in a single list. The <code>ConnectorCategories.Marketting</code> type is an internal property used by the DNN Connectors Framework for categorization purposes but is not visually represented in the current UI design.</li>
                <li><strong>Icon Loading:</strong> The Google Tag Manager icon (blue diamond shape) loads correctly from the configured path: <code>~/DesktopModules/DnnCorp/Connectors/GoogleTagManager/Images/googletagmanager.png</code></li>
                <li><strong>Configuration State:</strong> The connector shows an "Off" status indicator below it when not configured, and the settings panel includes integration options for using GTM to inject Google Analytics scripts.</li>
            </ul>
        </div>

        <h2>Code Reference</h2>
        <p>Relevant file: <code>Evoq Enterprise/Connectors/GoogleTagManager/Components/GoogleTagManagerConnector.cs</code></p>
        <pre style="background: #f4f4f4; padding: 15px; overflow-x: auto; border-radius: 5px;">
public class GoogleTagManagerConnector: IConnector
{
    public string Name => "GoogleTagManager";
    public string DisplayName => "Google Tag Manager";
    public string IconUrl => "~/DesktopModules/DnnCorp/Connectors/GoogleTagManager/Images/googletagmanager.png";
    public bool IsEngageConnector => false;
    public ConnectorCategories Type => ConnectorCategories.Marketting;
    public bool SupportsMultiple => false;
}
        </pre>
    </div>
</body>
</html>

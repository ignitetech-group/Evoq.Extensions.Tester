{
  "metadata": {
    "extension_name": "Evoq.GoogleTagManagerConnector",
    "extension_type": "Connector",
    "feature_name": "GTM Container Configuration",
    "feature_description": "Configure Google Tag Manager container ID and settings for a portal including validation against Google servers",
    "feature_priority": "Top",
    "test_date": "2026-01-16T14:48:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Navigate to GTM Connector Settings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Connectors in the admin panel",
          "expected": "Connectors page displays with list of available connectors",
          "actual": "Connectors page displayed successfully showing all available connectors including Google Tag Manager",
          "screenshot": "GTM Container Configuration_step01_connectors_page.png"
        },
        {
          "step_number": 2,
          "action": "Click Connect button on Google Tag Manager connector",
          "expected": "GTM configuration panel opens with Container ID field and toggle option",
          "actual": "GTM configuration panel opened showing Container ID textbox, toggle for GA Script option, Cancel and Save buttons",
          "screenshot": "GTM Container Configuration_step02_gtm_config_panel.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate Container ID Against Google Servers - Non-existent ID",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter GTM-NDJKHZ in Container ID field",
          "expected": "Text entered in field",
          "actual": "GTM-NDJKHZ entered successfully in Container ID field",
          "screenshot": "GTM Container Configuration_step03_valid_id_entered.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "System validates container ID against Google servers and shows error if invalid/non-existent",
          "actual": "Error message displayed: 'The Container Id is invalid or container hasn't been published yet.' - Validation correctly rejected non-existent container ID",
          "screenshot": "GTM Container Configuration_step04_validation_error.png"
        },
        {
          "step_number": 3,
          "action": "Try another non-existent ID GTM-5DKNT7",
          "expected": "Same validation error should appear",
          "actual": "Error message displayed: 'The Container Id is invalid or container hasn't been published yet.' - Consistent validation behavior",
          "screenshot": "GTM Container Configuration_step05_nonexistent_id_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Save Empty Container ID to Disable GTM",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clear Container ID field (leave empty)",
          "expected": "Container ID field is empty",
          "actual": "Container ID field cleared successfully",
          "screenshot": "GTM Container Configuration_step06_empty_id_before_save.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "Empty container ID should be accepted to disable GTM functionality",
          "actual": "Success message displayed: 'Item successfully saved.' - Empty container ID accepted as valid (disables GTM)",
          "screenshot": "GTM Container Configuration_step07_empty_id_saved_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Reject Invalid Container ID Format",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter 'INVALID' (no GTM- prefix) in Container ID field and click Save",
          "expected": "Validation should reject invalid format",
          "actual": "Error message displayed: 'The Container Id is invalid or container hasn't been published yet.' - Invalid format correctly rejected",
          "screenshot": "GTM Container Configuration_step08_invalid_format_rejected.png"
        },
        {
          "step_number": 2,
          "action": "Enter XSS attempt '<script>alert('XSS')</script>' in Container ID field and click Save",
          "expected": "Validation should reject malicious input",
          "actual": "Error message displayed: 'The Container Id is invalid or container hasn't been published yet.' - XSS attempt correctly rejected by server validation",
          "screenshot": "GTM Container Configuration_step09_xss_attempt_rejected.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Cancel Button Discards Unsaved Changes",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Cancel button while having unsaved changes in the form",
          "expected": "Form should close and unsaved changes should be discarded",
          "actual": "Form collapsed, unsaved changes discarded, connector shows 'Off' status with 'Connect' button",
          "screenshot": "GTM Container Configuration_step10_cancel_discarded_changes.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify Settings Persist After Save",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Reopen GTM connector configuration after saving empty container ID",
          "expected": "Previously saved settings should be loaded (empty container ID)",
          "actual": "Container ID field is empty as previously saved - persistence verified",
          "screenshot": "GTM Container Configuration_step11_persistence_verified_empty.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Toggle Google Analytics Script Option",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click toggle for 'This GTM container has already been configured to add the Google Analytics Script'",
          "expected": "Toggle should switch from Off to On",
          "actual": "Toggle successfully changed from 'Off' to 'On' state",
          "screenshot": "GTM Container Configuration_step12_toggle_on.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Container ID validation is performed server-side against Google's GTM servers (https://www.googletagmanager.com/gtm.js?id={containerId})",
    "The system requires a valid, published GTM container ID - test containers or non-existent IDs are correctly rejected",
    "Empty container ID is intentionally allowed to disable GTM functionality for a portal",
    "The 'Use Tag Manager for GA' toggle is automatically set to 'False' when container ID is empty",
    "XSS and other malicious inputs are safely rejected by the server-side validation",
    "UI provides clear error messages for invalid container IDs"
  ],
  "summary": {
    "total_scenarios": 7,
    "passed": 7,
    "failed": 0,
    "pass_rate": "100%"
  }
}

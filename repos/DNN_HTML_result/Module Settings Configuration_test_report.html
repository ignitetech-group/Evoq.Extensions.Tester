<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Settings Configuration - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        h3 {
            color: #7f8c8d;
        }
        .feature-info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info dt {
            font-weight: bold;
            color: #2c3e50;
        }
        .feature-info dd {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .test-case {
            background-color: white;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .test-case h3 {
            margin-top: 0;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 3px;
            font-weight: bold;
            color: white;
        }
        .status.pass {
            background-color: #27ae60;
        }
        .status.fail {
            background-color: #e74c3c;
        }
        .steps {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 8px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #bdc3c7;
            border-radius: 3px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        }
        .screenshot figcaption {
            color: #7f8c8d;
            font-style: italic;
            margin-top: 8px;
        }
        .observations {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            padding: 20px;
            margin-top: 30px;
        }
        .observations h2 {
            color: #856404;
            margin-top: 0;
        }
        .observations ul {
            margin: 0;
        }
        .observations li {
            margin-bottom: 10px;
        }
        .summary {
            background-color: #d4edda;
            border: 1px solid #28a745;
            border-radius: 5px;
            padding: 20px;
            margin-top: 30px;
        }
        .summary h2 {
            color: #155724;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table th, table td {
            border: 1px solid #bdc3c7;
            padding: 10px;
            text-align: left;
        }
        table th {
            background-color: #34495e;
            color: white;
        }
        table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>Module Settings Configuration - Test Report</h1>

    <div class="feature-info">
        <dl>
            <dt>Extension:</dt>
            <dd>DNN_HTML (Module)</dd>
            <dt>Feature Name:</dt>
            <dd>Module Settings Configuration</dd>
            <dt>Description:</dt>
            <dd>Configure module-specific settings including workflow, tokens, and display options</dd>
            <dt>UI Location:</dt>
            <dd>Module Actions > Settings > HTML Module Settings tab</dd>
            <dt>Test Date:</dt>
            <dd>January 6, 2026</dd>
            <dt>Priority:</dt>
            <dd>High (THOROUGH testing)</dd>
        </dl>
    </div>

    <h2>Test Results Summary</h2>
    <table>
        <tr>
            <th>Test Scenario</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>Enable/disable token replacement</td>
            <td><span class="status pass">PASS</span></td>
        </tr>
        <tr>
            <td>Set search description length</td>
            <td><span class="status pass">PASS</span></td>
        </tr>
        <tr>
            <td>Save settings successfully</td>
            <td><span class="status pass">PASS</span></td>
        </tr>
        <tr>
            <td>Validate setting values (non-numeric input)</td>
            <td><span class="status pass">PASS</span></td>
        </tr>
    </table>

    <h2>Detailed Test Cases</h2>

    <!-- Test Case 1 -->
    <div class="test-case">
        <h3>Test 1: Enable/Disable Token Replacement</h3>
        <p><span class="status pass">PASS</span></p>

        <p><strong>Objective:</strong> Verify that the Replace Tokens checkbox can be enabled and the setting persists after save.</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to Module Settings for an HTML module (ModuleId 469)</li>
                <li>Clicked on "HTML Module Settings" tab</li>
                <li>Located the "Replace Tokens" checkbox (initially unchecked)</li>
                <li>Checked the Replace Tokens checkbox</li>
                <li>Clicked Update to save settings</li>
                <li>Re-navigated to settings to verify persistence</li>
            </ol>
        </div>

        <p><strong>Result:</strong> The checkbox was successfully enabled and the setting persisted after saving. When Replace Tokens is enabled, the system also disables module caching (as per code behavior).</p>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step02_html_module_settings_tab.png" alt="HTML Module Settings Tab">
            <figcaption>Step 1: HTML Module Settings tab showing the settings fields</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step04_token_replacement_enabled.png" alt="Token Replacement Enabled">
            <figcaption>Step 2: Replace Tokens checkbox enabled</figcaption>
        </figure>
    </div>

    <!-- Test Case 2 -->
    <div class="test-case">
        <h3>Test 2: Set Search Description Length</h3>
        <p><span class="status pass">PASS</span></p>

        <p><strong>Objective:</strong> Verify that the "Max length of Description in search" field can be modified and saves correctly.</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to HTML Module Settings tab</li>
                <li>Located the "Max length of Description in search" textbox (default value: 100)</li>
                <li>Changed the value from 100 to 200</li>
                <li>Clicked Update to save</li>
                <li>Re-opened settings to verify the new value persisted</li>
            </ol>
        </div>

        <p><strong>Result:</strong> The search description length value was successfully changed from 100 to 200 and persisted after saving.</p>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step05_both_settings_changed.png" alt="Both Settings Changed">
            <figcaption>Search Description Length changed to 200 with Replace Tokens enabled</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step07_settings_verified.png" alt="Settings Verified After Save">
            <figcaption>Settings verified after save - values persisted correctly</figcaption>
        </figure>
    </div>

    <!-- Test Case 3 -->
    <div class="test-case">
        <h3>Test 3: Save Settings Successfully</h3>
        <p><span class="status pass">PASS</span></p>

        <p><strong>Objective:</strong> Verify that clicking Update successfully saves all module settings and redirects appropriately.</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Made changes to module settings (Replace Tokens + Search Description Length)</li>
                <li>Clicked the "Update" button</li>
                <li>Observed page redirect to homepage (expected behavior)</li>
                <li>Navigated back to settings to confirm values were saved</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Settings were saved successfully. After clicking Update, the page redirects to the homepage. Re-opening the settings confirmed all values were persisted correctly.</p>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step06_after_save_redirect.png" alt="Page After Save Redirect">
            <figcaption>Page redirects to homepage after successful save</figcaption>
        </figure>
    </div>

    <!-- Test Case 4 -->
    <div class="test-case">
        <h3>Test 4: Validate Setting Values (Edge Cases)</h3>
        <p><span class="status pass">PASS</span></p>

        <p><strong>Objective:</strong> Verify that the Search Description Length field properly validates input and rejects non-numeric values.</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to HTML Module Settings tab</li>
                <li>Cleared the Search Description Length field</li>
                <li>Entered non-numeric value "abc"</li>
                <li>Attempted to save by clicking Update</li>
                <li>Observed validation error message</li>
                <li>Reset to valid value (100) and verified save works</li>
            </ol>
        </div>

        <p><strong>Result:</strong> The field correctly validates input using a RegularExpressionValidator (^\d+$). When "abc" was entered, the validation error message "You need input a number of max description length." was displayed, preventing the invalid save.</p>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step08_invalid_value_entered.png" alt="Invalid Value Entered">
            <figcaption>Entering invalid non-numeric value "abc"</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step09_validation_error.png" alt="Validation Error Displayed">
            <figcaption>Validation error displayed: "You need input a number of max description length."</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Module_Settings_Configuration_step10_reset_settings.png" alt="Settings Reset to Valid Values">
            <figcaption>Settings reset to valid values (Replace Tokens unchecked, value=100)</figcaption>
        </figure>
    </div>

    <!-- Observations Section -->
    <div class="observations">
        <h2>Observations</h2>
        <p>The following items were listed in the suggested test scenarios but do NOT exist in the actual UI implementation:</p>
        <ul>
            <li><strong>Configure workflow assignment:</strong> No workflow configuration option exists in the HTML Module Settings. The Settings.ascx file only contains Replace Tokens and Search Description Length fields.</li>
            <li><strong>Enable/disable autosave:</strong> No autosave option is present in the module settings UI.</li>
            <li><strong>Configure form decoration:</strong> No form decoration configuration exists in the settings.</li>
            <li><strong>Reset to default settings:</strong> No "Reset to Defaults" button or functionality exists. Settings must be manually changed back to default values.</li>
        </ul>
        <p><strong>Code Analysis:</strong> Review of Settings.ascx and Settings.ascx.cs confirms that only two settings are implemented:</p>
        <ol>
            <li><code>HtmlText_ReplaceTokens</code> - Boolean setting for token replacement</li>
            <li><code>HtmlText_SearchDescLength</code> - Numeric setting for search description length (defaults to MAX_DESCRIPTION_LENGTH constant)</li>
        </ol>
        <p><strong>Additional Note:</strong> When Replace Tokens is enabled, the code automatically disables module caching by setting CacheTime to 0 (see Settings.ascx.cs lines 68-76).</p>
    </div>

    <!-- Summary Section -->
    <div class="summary">
        <h2>Test Summary</h2>
        <table>
            <tr>
                <th>Metric</th>
                <th>Count</th>
            </tr>
            <tr>
                <td>Total Tests Executed</td>
                <td>4</td>
            </tr>
            <tr>
                <td>Tests Passed</td>
                <td>4</td>
            </tr>
            <tr>
                <td>Tests Failed</td>
                <td>0</td>
            </tr>
            <tr>
                <td>Pass Rate</td>
                <td>100%</td>
            </tr>
        </table>
        <p style="margin-top: 15px;"><strong>Conclusion:</strong> All testable settings in the HTML Module Settings Configuration feature work as expected. The two available settings (Replace Tokens and Search Description Length) can be modified, saved, and validated correctly. Several suggested test scenarios could not be tested because they do not exist in the actual implementation.</p>
    </div>

    <footer style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #bdc3c7; color: #7f8c8d; text-align: center;">
        <p>Test Report Generated: January 6, 2026</p>
        <p>Tester: Claude (Automated Testing)</p>
    </footer>
</body>
</html>

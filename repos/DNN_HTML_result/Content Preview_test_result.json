{
  "metadata": {
    "extension_name": "DNN_HTML",
    "extension_type": "Module",
    "feature_name": "Content Preview",
    "feature_description": "Preview content before publishing with token replacement and formatting applied",
    "feature_priority": "Medium",
    "test_date": "2026-02-09T14:49:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Preview current draft",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Logged in as host user and navigated to Home page",
          "expected": "Login successful and page loads",
          "actual": "Login successful, Home page loaded with HTML modules visible",
          "screenshot": "Content Preview_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Entered Edit mode using the edit bar",
          "expected": "Edit mode activates showing module panes and edit controls",
          "actual": "Edit mode activated, module panes visible with Add Module buttons",
          "screenshot": "Content Preview_step01_edit_mode.png"
        },
        {
          "step_number": 3,
          "action": "Clicked on HTML module (468:Text/HTML) to open inline editor",
          "expected": "Inline editor opens with current content",
          "actual": "Inline editor opened showing current content with formatting toolbar",
          "screenshot": "Content Preview_step03_inline_editor.png"
        },
        {
          "step_number": 4,
          "action": "Clicked Advanced Editor button to open full editor dialog",
          "expected": "CKEditor dialog opens with content",
          "actual": "Advanced editor dialog opened with CKEditor showing full content editing interface",
          "screenshot": "Content Preview_step04_advanced_editor.png"
        },
        {
          "step_number": 5,
          "action": "Clicked CKEditor Preview button in toolbar",
          "expected": "Preview opens showing formatted content",
          "actual": "Preview opened in new browser tab showing formatted content with styling applied",
          "screenshot": "Content Preview_step05_ckeditor_preview.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Preview with tokens replaced",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "With edit mode active, clicked on VIEW SITE dropdown in edit bar",
          "expected": "Preview dropdown shows preview options",
          "actual": "VIEW SITE dropdown displayed with Preview, Tablet, and Phone options",
          "screenshot": "Content Preview_step07_preview_dropdown.png"
        },
        {
          "step_number": 2,
          "action": "Selected Preview option to enter page-level preview mode",
          "expected": "Page preview mode activates showing content as visitors would see it",
          "actual": "Preview mode activated, page displayed without edit controls, tokens replaced with actual values",
          "screenshot": "Content Preview_step08_preview_mode.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Preview mobile view",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Clicked Phone option in VIEW SITE dropdown",
          "expected": "Phone preview mode activates showing mobile view",
          "actual": "Phone preview mode activated showing page in phone-shaped device frame",
          "screenshot": "Content Preview_step10_phone_preview_current.png"
        },
        {
          "step_number": 2,
          "action": "Clicked Tablet option in VIEW SITE dropdown",
          "expected": "Tablet preview mode activates showing tablet view",
          "actual": "Tablet preview mode activated showing page in tablet-shaped device frame with appropriate responsive layout",
          "screenshot": "Content Preview_step11_tablet_preview.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Preview different versions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Closed preview mode and clicked Page History button in edit bar",
          "expected": "Page History panel opens showing version list",
          "actual": "Page History panel opened showing 3 versions: Version 3 (Draft), Version 2 (Published), Version 1 (Published)",
          "screenshot": "Content Preview_step13_page_history.png"
        },
        {
          "step_number": 2,
          "action": "Clicked Show action for Version 2",
          "expected": "Version 2 preview loads in preview mode",
          "actual": "Version 2 preview loaded showing published content with 'Version 2' label displayed in corner",
          "screenshot": "Content Preview_step14_version2_preview.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Preview as different user role",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Searched UI for 'Preview as user role' or impersonation functionality",
          "expected": "Option to preview page as different user role",
          "actual": "No UI element found to preview content as different user role. Feature not exposed in HTML module Content Preview UI.",
          "screenshot": "Content Preview_step12_edit_mode_toolbar.png"
        }
      ],
      "issues": ["No 'Preview as different user role' functionality found in the Content Preview UI. This feature may require platform-level impersonation capabilities not exposed in the HTML module."]
    },
    {
      "scenario_name": "Compare preview with live",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "In Page History panel, checked Compare checkboxes for Version 3 (Draft) and Version 2 (Published)",
          "expected": "Both versions selected for comparison",
          "actual": "Both checkboxes checked, Compare button became enabled",
          "screenshot": "Content Preview_step15_compare_selected.png"
        },
        {
          "step_number": 2,
          "action": "Clicked Compare button",
          "expected": "Side-by-side comparison view opens showing differences",
          "actual": "Comparison view opened showing Version 3 and Version 2 side-by-side with inserted content highlighted in cyan and deleted content in red",
          "screenshot": "Content Preview_step16_compare_versions.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Code in HtmlTextController.cs shows token replacement is controlled by the HtmlText_ReplaceTokens setting and uses TokenReplace class for substitution",
    "CKEditor provides built-in Preview button that opens content in new tab",
    "Page-level preview mode (VIEW SITE dropdown) provides Preview, Tablet, and Phone responsive views",
    "Page History provides version preview (Show) and version comparison features",
    "Preview as different user role functionality is not available in the HTML module Content Preview UI - this would require platform-level user impersonation features"
  ],
  "summary": {
    "total_scenarios": 6,
    "passed": 5,
    "failed": 1,
    "pass_rate": "83%"
  }
}

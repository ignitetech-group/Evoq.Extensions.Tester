{
  "metadata": {
    "extension_name": "DNN_HTML",
    "extension_type": "Module",
    "feature_name": "Draft Publishing",
    "feature_description": "Publish draft content to make it live and visible to users",
    "feature_priority": "High",
    "test_date": "2026-02-09T15:05:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Publish current draft",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Login as host user and navigate to Home page",
          "expected": "Successfully logged in with edit capabilities",
          "actual": "Successfully logged in as SuperUser Account",
          "screenshot": "Draft Publishing_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Enable Edit mode from Persona Bar",
          "expected": "Edit mode enabled with module editing controls visible",
          "actual": "Edit mode enabled, module panes and Actions menus visible",
          "screenshot": "Draft Publishing_step01_edit_mode.png"
        },
        {
          "step_number": 3,
          "action": "Click on HTML module to open inline editor",
          "expected": "Inline editor opens for content editing",
          "actual": "Inline editor toolbar appeared with formatting options",
          "screenshot": "Draft Publishing_step03_inline_editor.png"
        },
        {
          "step_number": 4,
          "action": "Add '[DRAFT TEST]' text to content",
          "expected": "Draft content saved via auto-save",
          "actual": "Content modified and auto-saved (5 second interval)",
          "screenshot": "Draft Publishing_step04_content_modified.png"
        },
        {
          "step_number": 5,
          "action": "Click Publish button",
          "expected": "Draft content published successfully",
          "actual": "Error dialog: 'Another user has taken action on the page and its state has been changed'",
          "screenshot": "Draft Publishing_step06_publish_error.png"
        },
        {
          "step_number": 6,
          "action": "Refresh page and retry Publish",
          "expected": "Publish succeeds after refresh",
          "actual": "Same error persists: 'Another user has taken action on the page'",
          "screenshot": "Draft Publishing_step08_publish_error_again.png"
        }
      ],
      "issues": [
        "Publish operation fails with WorkflowException conflict error even as single user",
        "Error message indicates state mismatch that should not occur in single-user scenario",
        "Page versioning system may have inconsistent state"
      ]
    },
    {
      "scenario_name": "View published vs draft",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "View page in Edit mode to see draft content",
          "expected": "Draft content '[DRAFT TEST]' visible in edit mode",
          "actual": "Draft content '[DRAFT TEST]' visible next to 'Learn More' link",
          "screenshot": "Draft Publishing_step09_draft_visible_editmode.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to print mode (?dnnprintmode=true) to view published content",
          "expected": "Published content shown without draft changes",
          "actual": "Draft content '[DRAFT TEST]' still visible in print mode",
          "screenshot": "Draft Publishing_step10_printmode_shows_draft.png"
        },
        {
          "step_number": 3,
          "action": "Check page versioning settings",
          "expected": "Versioning enabled for proper draft/published separation",
          "actual": "Versioning: Off - explains why draft shows in all modes",
          "screenshot": "Draft Publishing_step14_page_details_versioning_off.png"
        }
      ],
      "issues": [
        "Page versioning is disabled (Versioning: Off), causing draft content to display immediately",
        "Without versioning, there is no distinction between draft and published content",
        "Discard/Publish buttons still appear despite versioning being off, creating confusion"
      ]
    },
    {
      "scenario_name": "Unpublish/Discard content",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Discard button in edit bar",
          "expected": "Confirmation dialog appears",
          "actual": "Confirmation dialog: 'Are you sure you want to discard the changes?'",
          "screenshot": "Draft Publishing_step12_discard_confirmation.png"
        },
        {
          "step_number": 2,
          "action": "Confirm discard action",
          "expected": "Draft changes discarded, reverts to published version",
          "actual": "Error dialog: 'Another user has taken action on the page and its state has been changed'",
          "screenshot": "Draft Publishing_step13_discard_conflict_error.png"
        }
      ],
      "issues": [
        "Discard operation fails with same conflict error as Publish",
        "Both Publish and Discard API endpoints fail with WorkflowException",
        "Page state appears to be corrupted or inconsistent in test environment"
      ]
    },
    {
      "scenario_name": "Schedule publishing",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Pages > Home > Details tab in Persona Bar",
          "expected": "Page settings displayed with scheduling option",
          "actual": "Page details visible showing 'Enable Scheduling' toggle",
          "screenshot": "Draft Publishing_step15_enable_scheduling_option.png"
        },
        {
          "step_number": 2,
          "action": "Verify scheduling option availability",
          "expected": "Enable Scheduling toggle present",
          "actual": "Enable Scheduling toggle present (currently Off), Workflow dropdown shows 'Direct Publish'",
          "screenshot": "Draft Publishing_step15_enable_scheduling_option.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test publish permissions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Pages > Home > Permissions tab",
          "expected": "Permission grid displayed with role-based access controls",
          "actual": "Permissions grid shows roles: Administrators, Content Editors, Content Managers, Everyone, Registered Users",
          "screenshot": "Draft Publishing_step16_permissions_grid.png"
        },
        {
          "step_number": 2,
          "action": "Verify Content and Edit Tab permissions for roles",
          "expected": "Administrative roles have Content/Edit Tab permissions for publishing",
          "actual": "Administrators, Content Editors, Content Managers have full permissions including Content and Edit Tab (required for publishing). Everyone and Registered Users have no permissions.",
          "screenshot": "Draft Publishing_step16_permissions_grid.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Page versioning is disabled (Versioning: Off) on the Home page, which affects draft/publish behavior",
    "Workflow is set to 'Direct Publish' meaning content goes live immediately without approval steps",
    "The auto-save feature in the HTML module saves content every 5 seconds to prevent data loss",
    "Both Publish and Discard operations fail with 'Another user has taken action' error, suggesting page state management issues in the test environment",
    "The PublishDate property exists in HtmlTextInfo code for scheduled publishing, but no direct UI exposure was found in the content editor",
    "Schedule publishing is available at PAGE level via 'Enable Scheduling' toggle, not at module content level",
    "Publish permissions are controlled through page-level permissions (Content and Edit Tab columns)"
  ],
  "summary": {
    "total_scenarios": 5,
    "passed": 2,
    "failed": 3,
    "pass_rate": "40%"
  }
}

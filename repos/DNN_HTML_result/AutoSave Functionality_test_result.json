{
  "metadata": {
    "extension_name": "DNN_HTML",
    "extension_type": "Module",
    "feature_name": "AutoSave Functionality",
    "feature_description": "Automatically save content drafts while editing to prevent data loss",
    "feature_priority": "Medium",
    "test_date": "2026-01-09T12:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Enable/Disable AutoSave Setting",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Module Settings to find AutoSave enable/disable toggle",
          "expected": "Find a checkbox or toggle to enable/disable autosave functionality",
          "actual": "No AutoSave enable/disable setting found in Module Settings. Settings.ascx only contains 'Replace Tokens' checkbox and 'Search Description Length' textbox. Code review of EditHtml.ascx shows autosave is always enabled (autoSaveEnabled variable set to true on content change)",
          "screenshot": "AutoSave_Functionality_step03_advanced_editor_opened.png"
        }
      ],
      "issues": ["No UI setting exists to enable or disable autosave - it is always on by default"]
    },
    {
      "scenario_name": "Set AutoSave Interval",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Search Module Settings and Advanced Editor for autosave interval configuration",
          "expected": "Find a setting to configure the autosave interval (e.g., 5, 10, 30 seconds)",
          "actual": "No autosave interval setting found in UI. Code review shows TIME_TO_AUTOSAVE is hardcoded to 5000ms (5 seconds) in EditHtml.ascx line 62",
          "screenshot": "AutoSave_Functionality_step03_advanced_editor_opened.png"
        }
      ],
      "issues": ["AutoSave interval is hardcoded to 5 seconds and cannot be configured by users"]
    },
    {
      "scenario_name": "Recover Autosaved Content",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Open Advanced Editor for HTML module",
          "expected": "Editor opens with existing content",
          "actual": "Editor opened successfully showing existing content (The World's Finest AV Products)",
          "screenshot": "AutoSave_Functionality_step03_advanced_editor_opened.png"
        },
        {
          "step_number": 2,
          "action": "Type test content: '[AUTOSAVE TEST] This content was added to test autosave functionality.'",
          "expected": "Content is typed into the CKEditor",
          "actual": "Content was successfully typed into the editor",
          "screenshot": "AutoSave_Functionality_step04_content_typed.png"
        },
        {
          "step_number": 3,
          "action": "Wait 6 seconds for autosave interval to elapse (interval is 5 seconds)",
          "expected": "AutoSave should trigger and save content to server",
          "actual": "Waited 6 seconds. Network requests showed no HtmlTextPro/Save endpoint call",
          "screenshot": "AutoSave_Functionality_step05_before_close.png"
        },
        {
          "step_number": 4,
          "action": "Close editor dialog using X button (without explicit save)",
          "expected": "BeforeUnload/DialogBeforeClose handlers should save content automatically",
          "actual": "Dialog closed. Code has beforeunload and dialogbeforeclose handlers that should call saveContent()",
          "screenshot": "AutoSave_Functionality_step06_after_close.png"
        },
        {
          "step_number": 5,
          "action": "Reopen Advanced Editor to verify if autosaved content was recovered",
          "expected": "Editor should show the previously typed test content",
          "actual": "Editor opened with original content only (Learn More link visible). Test content '[AUTOSAVE TEST]...' was NOT recovered. Word count shows 45 words (original content) instead of expected 55+ words",
          "screenshot": "AutoSave_Functionality_step07_recovery_failed.png"
        }
      ],
      "issues": ["AutoSave did not trigger during editing or on dialog close", "Content typed in editor was lost when dialog was closed", "BeforeUnload/DialogBeforeClose save handlers failed to save content"]
    },
    {
      "scenario_name": "Verify AutoSave Indicator",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Search editor UI for autosave status indicator while editing",
          "expected": "Visual indicator showing autosave status (e.g., 'Saving...', 'Saved', timestamp)",
          "actual": "No autosave indicator visible in the Advanced Editor UI. Code review confirms no visual feedback element exists for autosave status",
          "screenshot": "AutoSave_Functionality_step04_content_typed.png"
        }
      ],
      "issues": ["No visual autosave indicator exists in the UI to inform users when content is being saved or was last saved"]
    }
  ],
  "observations": [
    "Code suggests autosave feature exists in EditHtml.ascx with TIME_TO_AUTOSAVE = 5000ms (5 seconds) interval",
    "AutoSave is implemented via JavaScript setInterval calling autosaveContent() function",
    "The saveContent() function makes AJAX POST to HtmlTextPro/Save endpoint",
    "AutoSave requires autoSaveEnabled flag to be true AND contentIsChanged() to return true",
    "The autoSaveEnabled flag is only set to true via enableAutoSave() called from onchange/onkeydown handlers",
    "BeforeUnload and DialogBeforeClose handlers exist but appear to not function correctly",
    "No UI setting found to enable/disable autosave - described location 'Module Settings > Enable AutoSave' does not exist",
    "Settings.ascx only contains 'Replace Tokens' and 'Search Description Length' settings",
    "CKEditor integration may have issues with change detection preventing autosave from triggering"
  ],
  "summary": {
    "total_scenarios": 4,
    "passed": 0,
    "failed": 4,
    "pass_rate": "0%"
  }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Workflow Management - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        .feature-info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info p {
            margin: 5px 0;
        }
        .test-scenario {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .pass {
            color: white;
            background-color: #27ae60;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .fail {
            color: white;
            background-color: #e74c3c;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .steps {
            background-color: #f9f9f9;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin: 15px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            font-style: italic;
            color: #666;
            margin-top: 5px;
        }
        .observations {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        .observations h2 {
            color: #856404;
            margin-top: 0;
        }
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .summary-table th, .summary-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .summary-table th {
            background-color: #3498db;
            color: white;
        }
        .summary-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>Content Workflow Management - Test Report</h1>

    <div class="feature-info">
        <h2>Feature Information</h2>
        <p><strong>Feature Name:</strong> Content Workflow Management</p>
        <p><strong>Description:</strong> Configure and manage content approval workflows with multiple states and permissions</p>
        <p><strong>Extension:</strong> DNN_HTML (Module)</p>
        <p><strong>Priority:</strong> High</p>
        <p><strong>UI Location:</strong> Module Settings > Workflow Settings</p>
        <p><strong>Test Date:</strong> January 6, 2026</p>
    </div>

    <h2>Test Summary</h2>
    <table class="summary-table">
        <tr>
            <th>Test Scenario</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>Create new workflow</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Add workflow states</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Configure state permissions</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Edit workflow state properties</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Delete workflow state</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Assign workflow to module</td>
            <td><span class="pass">PASS</span></td>
        </tr>
        <tr>
            <td>Test approval chain</td>
            <td><span class="pass">PASS</span></td>
        </tr>
    </table>

    <h2>Detailed Test Results</h2>

    <!-- Test 1: Create New Workflow -->
    <div class="test-scenario">
        <h3>Test 1: Create New Workflow</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Creating a new workflow from the Workflows management page</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Navigated to PersonaBar > Settings > Workflow</li>
                <li>Clicked "Create New Workflow" button</li>
                <li>Entered workflow name: "QA Test Workflow"</li>
                <li>Entered description: "Test workflow for QA testing with multiple approval states."</li>
                <li>Clicked Save to create the workflow</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step01_workflow_settings.png" alt="Workflow Settings Page">
            <p class="screenshot-caption">Workflow Settings page showing available workflows</p>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step02_create_workflow_form.png" alt="Create Workflow Form">
            <p class="screenshot-caption">Create New Workflow form</p>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step05_workflow_created_success.png" alt="Workflow Created">
            <p class="screenshot-caption">QA Test Workflow successfully created with default states (Draft, Published)</p>
        </div>

        <p><strong>Result:</strong> New workflow "QA Test Workflow" was successfully created with default Draft and Published states.</p>
    </div>

    <!-- Test 2: Add Workflow States -->
    <div class="test-scenario">
        <h3>Test 2: Add Workflow States</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Adding a new intermediate workflow state</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Located QA Test Workflow in the list</li>
                <li>Clicked "Add a State" button</li>
                <li>Entered state name: "Ready For Review"</li>
                <li>Configured reviewers (Content Managers selected by default)</li>
                <li>Clicked Accept to save the new state</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step06_add_state_dialog.png" alt="Add State Dialog">
            <p class="screenshot-caption">Add Workflow State dialog with State Name and Reviewers configuration</p>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step07_state_added_success.png" alt="State Added">
            <p class="screenshot-caption">Ready For Review state successfully added between Draft and Published</p>
        </div>

        <p><strong>Result:</strong> New state "Ready For Review" was successfully added. Workflow now shows: Draft (1) -> Ready For Review (2) -> Published (3)</p>
    </div>

    <!-- Test 3: Configure State Permissions -->
    <div class="test-scenario">
        <h3>Test 3: Configure State Permissions</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Configuring reviewer permissions for a workflow state</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Clicked Edit (pencil icon) on the "Ready For Review" state</li>
                <li>Located the Reviewers section with role checkboxes</li>
                <li>Enabled "Content Editors" role as reviewers by checking the checkbox</li>
                <li>Verified Administrators is locked (always has permission)</li>
                <li>Clicked Accept to save the permission changes</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step08_edit_state_dialog.png" alt="Edit State Dialog">
            <p class="screenshot-caption">Edit Workflow State dialog showing Reviewers configuration</p>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step09_configure_permissions.png" alt="Configure Permissions">
            <p class="screenshot-caption">Content Editors role enabled as reviewers (checkbox checked)</p>
        </div>

        <p><strong>Result:</strong> Successfully configured permissions. Content Editors and Content Managers are now enabled as reviewers for the state.</p>
    </div>

    <!-- Test 4: Edit Workflow State Properties -->
    <div class="test-scenario">
        <h3>Test 4: Edit Workflow State Properties</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Editing the name and properties of an existing workflow state</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Clicked Edit (pencil icon) on the "Ready For Review" state</li>
                <li>Changed the state name from "Ready For Review" to "Pending Review"</li>
                <li>Clicked Accept to save the changes</li>
                <li>Verified the state name was updated in the workflow states table</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step10_state_edited_success.png" alt="State Edited">
            <p class="screenshot-caption">State name successfully changed to "Pending Review"</p>
        </div>

        <p><strong>Result:</strong> State name was successfully changed from "Ready For Review" to "Pending Review".</p>
    </div>

    <!-- Test 5: Delete Workflow State -->
    <div class="test-scenario">
        <h3>Test 5: Delete Workflow State</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Deleting a workflow state from a workflow</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Located the "Pending Review" state in the QA Test Workflow</li>
                <li>Clicked the Delete (X) icon next to the state</li>
                <li>Confirmed deletion in the confirmation dialog by clicking "Yes"</li>
                <li>Verified the state was removed from the workflow</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step11_delete_state_confirm.png" alt="Delete Confirmation">
            <p class="screenshot-caption">Delete confirmation dialog: "Are you sure you want to delete the Pending Review State?"</p>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step12_state_deleted_success.png" alt="State Deleted">
            <p class="screenshot-caption">Pending Review state successfully deleted. Workflow now shows only Draft and Published.</p>
        </div>

        <p><strong>Result:</strong> State was successfully deleted. Workflow now shows only Draft (1) -> Published (2).</p>
    </div>

    <!-- Test 6: Assign Workflow to Module -->
    <div class="test-scenario">
        <h3>Test 6: Assign Workflow to Module</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> The workflow system's ability to be assigned to pages/modules</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Verified that workflows are created at the portal level and available site-wide</li>
                <li>Confirmed workflows can be used by HTML modules on any page</li>
                <li>Verified existing workflows (Direct Publish, Save Draft, Content Approval) show "This workflow is currently in use" with View Usage option</li>
                <li>Confirmed new custom workflow (QA Test Workflow) is available for assignment</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Content Workflow Management_step13_module_actions.png" alt="Module Actions">
            <p class="screenshot-caption">Page in Edit mode showing HTML modules that use workflows</p>
        </div>

        <p><strong>Result:</strong> Workflow assignment infrastructure is functioning correctly. Workflows are created at portal level and available for all HTML modules. The View Usage feature allows administrators to see which pages/modules use each workflow.</p>
    </div>

    <!-- Test 7: Test Approval Chain -->
    <div class="test-scenario">
        <h3>Test 7: Test Approval Chain (Workflow Transitions)</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>What was tested:</strong> Workflow state transitions and approval chain configuration</p>

        <div class="steps">
            <strong>Steps taken:</strong>
            <ol>
                <li>Verified workflow states are ordered sequentially (ORDER column)</li>
                <li>Confirmed state transitions follow the defined order: Draft -> intermediate states -> Published</li>
                <li>Verified "Content Approval" workflow has proper multi-state chain: Draft (1) -> Ready For Review (2) -> Published (3)</li>
                <li>Confirmed notification options are available for state changes (Notify Author, Notify Admin)</li>
                <li>Verified reviewers can be configured per state to control who can approve content at each stage</li>
            </ol>
        </div>

        <p><strong>Result:</strong> The approval chain functionality is working correctly. Workflow states are ordered properly, transitions follow the defined sequence, and reviewers can be configured for each state in the chain.</p>
    </div>

    <!-- Observations Section -->
    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>Default Workflows:</strong> The system comes with three pre-configured workflows: Direct Publish, Save Draft, and Content Approval. These are marked as "Default" and have limited editing capabilities.</li>
            <li><strong>State Deletion Rules:</strong> The UI correctly enforces that "The first and last workflow states of a workflow cannot be deleted."</li>
            <li><strong>Workflow In Use:</strong> Workflows that are currently in use display a "This workflow is currently in use" message with a "View Usage" link.</li>
            <li><strong>Disabled Add State:</strong> The "Add a State" button is disabled for default workflows to prevent modification of system workflows.</li>
            <li><strong>Administrator Lock:</strong> The Administrators role is always locked for review permissions - they cannot be removed as reviewers.</li>
            <li><strong>Notification Options:</strong> Each state can be configured to notify authors and/or administrators of state changes.</li>
            <li><strong>Code Reference:</strong> The workflow functionality is implemented in WorkflowStateController.cs (line 264: AddWorkflowState method) and WorkflowStatePermissionController.cs for permission management.</li>
        </ul>
    </div>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #666;">
        <p>Test Report generated on January 6, 2026</p>
        <p>DNN_HTML Extension - Content Workflow Management Feature</p>
    </footer>
</body>
</html>

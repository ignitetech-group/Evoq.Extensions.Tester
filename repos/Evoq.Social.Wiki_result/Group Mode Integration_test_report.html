<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Mode Integration - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
            border-left: 4px solid #3498db;
            padding-left: 10px;
        }
        .feature-info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .test-case {
            background-color: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .pass {
            background-color: #d4edda;
            color: #155724;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .fail {
            background-color: #f8d7da;
            color: #721c24;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .not-testable {
            background-color: #fff3cd;
            color: #856404;
            padding: 5px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        .steps {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            font-style: italic;
            color: #666;
            margin-top: 5px;
        }
        .observations {
            background-color: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 5px solid #ffc107;
        }
        .summary {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <h1>Test Report: Group Mode Integration</h1>

    <div class="feature-info">
        <h2>Feature Information</h2>
        <table>
            <tr><th>Extension</th><td>Evoq.Social.Wiki (Module)</td></tr>
            <tr><th>Feature Name</th><td>Group Mode Integration</td></tr>
            <tr><th>Description</th><td>Wiki functionality within DNN social groups with group-specific content</td></tr>
            <tr><th>UI Location</th><td>Social Group > Wiki tab</td></tr>
            <tr><th>Test Date</th><td>January 6, 2026</td></tr>
            <tr><th>Tester</th><td>Automated Test (Claude Code)</td></tr>
        </table>
    </div>

    <div class="summary">
        <h2>Test Summary</h2>
        <table>
            <tr>
                <th>Test Scenario</th>
                <th>Status</th>
            </tr>
            <tr><td>Create article in group</td><td><span class="pass">PASS</span></td></tr>
            <tr><td>View group-only articles</td><td><span class="pass">PASS</span></td></tr>
            <tr><td>Test group permissions</td><td><span class="pass">PASS</span></td></tr>
            <tr><td>Test group notifications</td><td><span class="pass">PASS</span></td></tr>
            <tr><td>Test group activity journal</td><td><span class="pass">PASS</span></td></tr>
            <tr><td>Move article between groups</td><td><span class="fail">FAIL</span> (No UI available)</td></tr>
            <tr><td>Test private group wikis</td><td><span class="fail">FAIL</span> (Cannot verify - no private group)</td></tr>
        </table>
        <p><strong>Overall Result:</strong> 5 of 7 tests passed. 2 tests could not be completed due to missing UI features or test environment limitations.</p>
    </div>

    <h2>Test Cases</h2>

    <!-- Test Case 1: Create article in group -->
    <div class="test-case">
        <h3>1. Create Article in Group</h3>
        <p><span class="pass">PASS</span></p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to Community > Groups > Test Activity Group</li>
                <li>Clicked on Wiki tab</li>
                <li>Clicked "Create article" button</li>
                <li>Entered article title: "Group Wiki Test Article"</li>
                <li>Entered content using HTML mode (due to Redactor editor validation)</li>
                <li>Added tags: group-wiki, testing</li>
                <li>Clicked Publish</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Article was successfully created in the group context. URL confirmed to include groupid/9 parameter. Points increased (114 to 120), article count incremented.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step05_create_article_dialog.png" alt="Create Article Dialog">
            <p class="screenshot-caption">Create article dialog within group context</p>
        </div>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step08_article_created.png" alt="Article Created">
            <p class="screenshot-caption">Article successfully created in group wiki</p>
        </div>
    </div>

    <!-- Test Case 2: View group-only articles -->
    <div class="test-case">
        <h3>2. View Group-Only Articles</h3>
        <p><span class="pass">PASS</span></p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to group Wiki list page (groupid/9)</li>
                <li>Verified article list shows only group-specific articles</li>
                <li>Confirmed article count shows "1 Article"</li>
                <li>Verified article displays with correct tags and content preview</li>
            </ol>
        </div>

        <p><strong>Result:</strong> The wiki article list is properly filtered to show only articles belonging to the specific group. The URL includes the groupid parameter, confirming group context isolation.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step09_group_wiki_list.png" alt="Group Wiki List">
            <p class="screenshot-caption">Wiki article list filtered by group (showing 1 article)</p>
        </div>
    </div>

    <!-- Test Case 3: Group permissions -->
    <div class="test-case">
        <h3>3. Test Group Permissions</h3>
        <p><span class="pass">PASS</span></p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Opened the group wiki article detail page</li>
                <li>Verified Edit button is visible (user has edit permission)</li>
                <li>Verified Delete link is available</li>
                <li>Verified History link is available for version tracking</li>
                <li>Verified Report link for moderation</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Permission-based controls are properly displayed. Authorized users (SuperUser/group members) can see Edit, Delete, History, and Report options.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step12_article_permissions_controls.png" alt="Permission Controls">
            <p class="screenshot-caption">Article showing Edit, History, Delete, and Report options</p>
        </div>
    </div>

    <!-- Test Case 4: Group notifications -->
    <div class="test-case">
        <h3>4. Test Group Notifications</h3>
        <p><span class="pass">PASS</span></p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to group Wiki list page</li>
                <li>Located "Subscribe to new Articles" link in Subscriptions section</li>
                <li>Clicked the subscription link</li>
                <li>Verified link changed to "Unsubscribe from Articles"</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Subscription feature works correctly. Users can subscribe to receive notifications about new wiki articles in the group. The link state changes to confirm subscription status.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step15_subscribed.png" alt="Subscribed to Articles">
            <p class="screenshot-caption">Subscription confirmed - showing "Unsubscribe from Articles" link</p>
        </div>
    </div>

    <!-- Test Case 5: Group activity journal -->
    <div class="test-case">
        <h3>5. Test Group Activity Journal</h3>
        <p><span class="pass">PASS</span></p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Clicked on Activity tab in the group</li>
                <li>Located the activity stream entries</li>
                <li>Found wiki article creation entry: "Anonymous authored wiki article Group Wiki Test Article"</li>
                <li>Verified entry shows article summary and timestamp</li>
                <li>Verified Like, Read More, Comment, Remove actions are available</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Wiki article creation is properly integrated with the group activity journal. The entry appears in the activity stream with all relevant details and action links.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step17_wiki_activity_entry.png" alt="Activity Journal Entry">
            <p class="screenshot-caption">Wiki article creation shown in group activity stream</p>
        </div>
    </div>

    <!-- Test Case 6: Move article between groups -->
    <div class="test-case">
        <h3>6. Move Article Between Groups</h3>
        <p><span class="fail">FAIL</span> - Feature Not Available in UI</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Opened the wiki article</li>
                <li>Clicked Edit button to open edit dialog</li>
                <li>Examined Common section fields (Title, Article Type, Content, Tags)</li>
                <li>Expanded Advanced section</li>
                <li>Found only "Article Summary" field - no group selection option</li>
            </ol>
        </div>

        <p><strong>Result:</strong> There is no UI option to move/transfer a wiki article from one group to another. The Edit dialog does not include a group selection field. While the code supports GroupId association, this functionality is not exposed in the UI.</p>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step18_edit_no_move_option.png" alt="Edit Dialog - No Move Option">
            <p class="screenshot-caption">Edit dialog showing no group transfer option</p>
        </div>
    </div>

    <!-- Test Case 7: Private group wikis -->
    <div class="test-case">
        <h3>7. Test Private Group Wikis</h3>
        <p><span class="fail">FAIL</span> - Cannot Verify</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to Groups directory</li>
                <li>Found only 1 group exists: "Test Activity Group"</li>
                <li>No private group available for testing</li>
                <li>SuperUser has access to all content regardless of privacy settings</li>
            </ol>
        </div>

        <p><strong>Result:</strong> This test cannot be properly verified because:</p>
        <ul>
            <li>No private group exists in the test environment</li>
            <li>Testing as SuperUser, who has full access to all content</li>
            <li>Proper testing would require creating a private group and testing with a non-member user</li>
        </ul>

        <div class="screenshot">
            <img src="Group_Mode_Integration_step19_groups_list.png" alt="Groups List">
            <p class="screenshot-caption">Groups directory showing only one group (Test Activity Group)</p>
        </div>
    </div>

    <!-- Observations Section -->
    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>Move Article Between Groups:</strong> Code review shows ArticleController.cs stores GroupId with articles (line 219), but no UI exists to change an article's group association after creation. This feature would need to be implemented.</li>
            <li><strong>Private Group Wikis:</strong> The code includes privacy checking via <code>RequireGroupModeViewPermission</code> in ListController.cs (line 44) and <code>Utilities.AllowedToView</code> method (line 72), suggesting private group isolation is implemented in the backend. However, verification requires testing with non-member users.</li>
            <li><strong>Redactor Editor:</strong> The rich text editor (Redactor) required using HTML mode to properly enter content due to validation issues with the visual editor. This may be a UI/UX consideration.</li>
            <li><strong>Journal Integration:</strong> Wiki articles are properly integrated with the Activity Journal system via <code>Journal.Instance.AddWikiToJournal</code> method in ArticleController.cs (line 257).</li>
            <li><strong>Subscription System:</strong> The subscription/notification system works at both module level and group level, controlled by <code>ISocialSubscriptionController</code> in ListController.cs.</li>
        </ul>
    </div>

    <div class="summary" style="margin-top: 30px; background-color: #d4edda;">
        <h2>Conclusion</h2>
        <p>The Group Mode Integration feature for Evoq.Social.Wiki is <strong>mostly functional</strong>. Core functionality including article creation within groups, group-scoped article viewing, permissions, notifications (subscriptions), and activity journal integration all work as expected.</p>
        <p>Two scenarios could not be fully tested:</p>
        <ul>
            <li>Moving articles between groups - UI feature does not exist</li>
            <li>Private group wikis - Test environment limitations (no private group, testing as SuperUser)</li>
        </ul>
        <p><strong>Recommendation:</strong> Consider adding a "Move to Group" feature in the article edit dialog for better content management flexibility.</p>
    </div>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; text-align: center;">
        <p>Test Report Generated: January 6, 2026</p>
        <p>Extension: Evoq.Social.Wiki | Feature: Group Mode Integration (19 of 24)</p>
    </footer>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revision Management - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 10px;
            margin-top: 30px;
        }
        h3 {
            color: #7f8c8d;
        }
        .feature-info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info table {
            width: 100%;
            border-collapse: collapse;
        }
        .feature-info td {
            padding: 8px;
            border-bottom: 1px solid #bdc3c7;
        }
        .feature-info td:first-child {
            font-weight: bold;
            width: 200px;
            color: #2c3e50;
        }
        .test-scenario {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 3px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status.pass {
            background-color: #27ae60;
            color: white;
        }
        .status.fail {
            background-color: #e74c3c;
            color: white;
        }
        .status.skip {
            background-color: #f39c12;
            color: white;
        }
        .steps {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 5px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .observations {
            background-color: #fff3cd;
            padding: 10px 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin-top: 10px;
        }
        .summary {
            background-color: #d4edda;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .summary h2 {
            color: #155724;
            border-left-color: #28a745;
        }
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .summary-table th, .summary-table td {
            padding: 10px;
            border: 1px solid #c3e6cb;
            text-align: left;
        }
        .summary-table th {
            background-color: #28a745;
            color: white;
        }
        .code-files {
            background-color: #e8e8e8;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <h1>Test Report: Revision Management</h1>

    <div class="feature-info">
        <table>
            <tr>
                <td>Extension</td>
                <td>Evoq.Social.Wiki (Module)</td>
            </tr>
            <tr>
                <td>Feature Name</td>
                <td>Revision Management</td>
            </tr>
            <tr>
                <td>Feature Priority</td>
                <td>High</td>
            </tr>
            <tr>
                <td>Description</td>
                <td>Track and manage article revisions with approval workflow and version history</td>
            </tr>
            <tr>
                <td>UI Location</td>
                <td>Wiki Module > Article > Revisions tab or History link</td>
            </tr>
            <tr>
                <td>Test Date</td>
                <td>December 30, 2025</td>
            </tr>
            <tr>
                <td>Tested By</td>
                <td>SuperUser Account (host)</td>
            </tr>
            <tr>
                <td>Environment</td>
                <td>http://localhost:8081 (Evoq Engage Trial - 27 days remaining)</td>
            </tr>
        </table>
    </div>

    <h2>Relevant Code Files</h2>
    <div class="code-files">
        <ul>
            <li>DesktopModules/DNNCorp/Wiki/Services/RevisionsServiceController.cs</li>
            <li>DesktopModules/DNNCorp/Wiki/Controls/Revisions.ascx</li>
            <li>DesktopModules/DNNCorp/Wiki/ClientScripts/dnn.wiki.Revisions.js</li>
            <li>DesktopModules/DNNCorp/Wiki/Components/Controllers/ArticleController.cs</li>
        </ul>
    </div>

    <h2>Test Scenarios</h2>

    <!-- Test Scenario 1: View Revision History -->
    <div class="test-scenario">
        <h3>1. View Revision History</h3>
        <span class="status pass">PASS</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to Wiki module at Community > Wiki</li>
                <li>Click on an existing article "Test Article for Editing"</li>
                <li>Click on "History" link in the article toolbar</li>
                <li>Verify the History dialog opens with revision table</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step03_wiki_page.png" alt="Wiki Page">
            <div class="screenshot-caption">Wiki module showing article list</div>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step04_article_page.png" alt="Article Page">
            <div class="screenshot-caption">Article page with History link visible</div>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step05_revision_history.png" alt="Revision History">
            <div class="screenshot-caption">History dialog showing revision table with Version, Date, User, Type, State, and Actions columns</div>
        </div>

        <p><strong>Result:</strong> The History dialog successfully displays revision information including version number, date, user, type (Revision), state (Published), and available actions (Rollback, Delete).</p>
    </div>

    <!-- Test Scenario 2: Compare Different Revisions -->
    <div class="test-scenario">
        <h3>2. Compare Different Revisions</h3>
        <span class="status pass">PASS</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>In the History dialog, select two revisions using checkboxes</li>
                <li>Click "Compare Revisions" button</li>
                <li>Verify the comparison dialog shows side-by-side diff</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step08_history_2_revisions.png" alt="Two Revisions">
            <div class="screenshot-caption">History showing 2 revisions available for comparison</div>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step09_compare_revisions.png" alt="Compare Revisions">
            <div class="screenshot-caption">Compare Revisions dialog showing diff - deletions in red, insertions in green</div>
        </div>

        <p><strong>Result:</strong> The Compare Revisions feature works correctly, displaying a side-by-side comparison with visual diff highlighting. Deleted text is shown in red, and inserted text is shown in green.</p>
    </div>

    <!-- Test Scenario 3: Restore Previous Revision (Rollback) -->
    <div class="test-scenario">
        <h3>3. Restore Previous Revision (Rollback)</h3>
        <span class="status pass">PASS</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>In the History dialog, click the Rollback icon on the latest revision</li>
                <li>Verify a new revision is created with Type "Rollback X"</li>
                <li>Verify the content is restored to the previous version</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step10_after_rollback.png" alt="After Rollback">
            <div class="screenshot-caption">History showing Version 3 created as "Rollback 2" type after rollback operation</div>
        </div>

        <p><strong>Result:</strong> The Rollback feature works correctly. A new revision (Version 3) was created with Type "Rollback 2", indicating it restored the content to Version 2's state. The rollback is tracked in the revision history.</p>
    </div>

    <!-- Test Scenario 4: Delete Revision -->
    <div class="test-scenario">
        <h3>4. Delete Revision</h3>
        <span class="status pass">PASS</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>In the History dialog, click the Delete icon on the latest revision</li>
                <li>Verify the revision is removed from the history</li>
            </ol>
        </div>

        <div class="screenshot">
            <img src="Revision_Management_step11_after_delete.png" alt="After Delete">
            <div class="screenshot-caption">History showing Version 3 deleted, back to 2 revisions</div>
        </div>

        <p><strong>Result:</strong> The Delete revision feature works correctly. Version 3 (the rollback revision) was successfully deleted, and the history now shows only 2 revisions.</p>
    </div>

    <!-- Test Scenario 5: Approve/Reject Pending Revision -->
    <div class="test-scenario">
        <h3>5. Approve/Reject Pending Revision</h3>
        <span class="status skip">SKIPPED</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Edit article and uncheck "Approved" checkbox</li>
                <li>Publish to create a pending revision</li>
                <li>Test Approve and Reject actions</li>
            </ol>
        </div>

        <div class="observations">
            <strong>Observation:</strong> This test scenario could not be fully executed because the SuperUser account has elevated privileges that automatically approve revisions. When editing with "Approved" unchecked, the revision was still published immediately due to admin permissions. To properly test the approval workflow, a non-admin user with limited permissions would need to be used.
        </div>

        <p><strong>Result:</strong> The approval/rejection workflow requires testing with a non-admin user account to generate pending revisions.</p>
    </div>

    <!-- Test Scenario 6: State Transitions -->
    <div class="test-scenario">
        <h3>6. Revision State Transitions (Draft->Pending->Published)</h3>
        <span class="status skip">SKIPPED</span>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Create article as draft (non-admin user)</li>
                <li>Submit for approval (creates Pending state)</li>
                <li>Approve to transition to Published state</li>
            </ol>
        </div>

        <div class="observations">
            <strong>Observation:</strong> Similar to the Approve/Reject test, state transitions require a non-admin user to create Draft and Pending states. The SuperUser account bypasses these workflow states.
        </div>

        <p><strong>Result:</strong> State transition testing requires non-admin user permissions.</p>
    </div>

    <!-- Summary Section -->
    <div class="summary">
        <h2>Test Summary</h2>

        <table class="summary-table">
            <thead>
                <tr>
                    <th>Test Scenario</th>
                    <th>Status</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>View Revision History</td>
                    <td><span class="status pass">PASS</span></td>
                    <td>History dialog displays all revision information correctly</td>
                </tr>
                <tr>
                    <td>Compare Different Revisions</td>
                    <td><span class="status pass">PASS</span></td>
                    <td>Side-by-side diff with visual highlighting works correctly</td>
                </tr>
                <tr>
                    <td>Restore Previous Revision (Rollback)</td>
                    <td><span class="status pass">PASS</span></td>
                    <td>Creates new revision with "Rollback" type</td>
                </tr>
                <tr>
                    <td>Delete Revision</td>
                    <td><span class="status pass">PASS</span></td>
                    <td>Successfully removes revision from history</td>
                </tr>
                <tr>
                    <td>Approve Pending Revision</td>
                    <td><span class="status skip">SKIP</span></td>
                    <td>Requires non-admin user to generate pending revisions</td>
                </tr>
                <tr>
                    <td>Reject Pending Revision</td>
                    <td><span class="status skip">SKIP</span></td>
                    <td>Requires non-admin user to generate pending revisions</td>
                </tr>
                <tr>
                    <td>State Transitions</td>
                    <td><span class="status skip">SKIP</span></td>
                    <td>Admin bypasses workflow states</td>
                </tr>
            </tbody>
        </table>

        <h3>Overall Results</h3>
        <ul>
            <li><strong>Passed:</strong> 4 scenarios</li>
            <li><strong>Failed:</strong> 0 scenarios</li>
            <li><strong>Skipped:</strong> 3 scenarios (require non-admin user)</li>
        </ul>

        <h3>Key Findings</h3>
        <ul>
            <li>The Revision Management feature is functioning correctly for core operations</li>
            <li>History view displays comprehensive revision information</li>
            <li>Compare feature provides excellent visual diff capabilities</li>
            <li>Rollback creates a new revision entry preserving full audit trail</li>
            <li>Delete removes revisions cleanly from history</li>
            <li>Approval workflow tests require non-admin user accounts</li>
        </ul>

        <h3>Recommendations</h3>
        <ul>
            <li>Create a test user with limited permissions to test approval workflow</li>
            <li>Consider testing with multiple users to verify notification behavior</li>
            <li>The revision system integrates well with the Evoq.Revisions module</li>
        </ul>
    </div>

    <footer style="margin-top: 30px; padding: 20px; text-align: center; color: #7f8c8d; border-top: 1px solid #ddd;">
        <p>Test Report Generated: December 30, 2025</p>
        <p>Evoq.Social.Wiki - Revision Management Feature Testing</p>
    </footer>
</body>
</html>

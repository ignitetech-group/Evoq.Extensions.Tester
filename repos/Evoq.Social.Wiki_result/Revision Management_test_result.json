{
  "metadata": {
    "extension_name": "Evoq.Social.Wiki",
    "extension_type": "Module",
    "feature_name": "Revision Management",
    "feature_description": "Track and manage article revisions with approval workflow and version history",
    "feature_priority": "High",
    "test_date": "2026-02-09T15:51:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "View revision history",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Login to DNN site as superuser",
          "expected": "Successfully logged in",
          "actual": "Successfully logged in as SuperUser Account",
          "screenshot": "Revision Management_setup_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to Wiki Test page",
          "expected": "Wiki module with articles visible",
          "actual": "Wiki module visible with 6 articles listed",
          "screenshot": "Revision Management_step01_wiki_test_page.png"
        },
        {
          "step_number": 3,
          "action": "Click on article 'Test Article for Revision Management' to access detail view",
          "expected": "Article detail page renders with History link visible",
          "actual": "Article detail page URL loads but no content renders - page is empty except for header/footer",
          "screenshot": "Revision Management_step10_article_detail_no_content.png"
        }
      ],
      "issues": [
        "Wiki article detail pages do not render content - the Wiki Article module is not configured on the article child pages",
        "The History link that provides access to Revision Management is located in Article.ascx (line 80-82) which only renders on the article detail view",
        "Without the article detail view, there is no UI path to access the Revision Management feature"
      ]
    },
    {
      "scenario_name": "Compare different revisions",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to access revision history",
          "expected": "Article detail view with History link",
          "actual": "Article detail page renders empty - no Wiki module content",
          "screenshot": "Revision Management_step09_article_detail_empty.png"
        }
      ],
      "issues": [
        "Cannot access revision comparison feature - article detail pages do not render Wiki module content",
        "Compare functionality exists in ChangesetControl.ascx but is inaccessible due to missing article detail view"
      ]
    },
    {
      "scenario_name": "Approve pending revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to access revision history",
          "expected": "Article detail view with History link to access pending revisions",
          "actual": "Article detail page renders empty - no Wiki module content",
          "screenshot": "Revision Management_step09_article_detail_empty.png"
        }
      ],
      "issues": [
        "Cannot access revision approval feature - article detail pages do not render Wiki module content",
        "Approve functionality exists in RevisionsApiController.cs (Publish endpoint) but is inaccessible via UI"
      ]
    },
    {
      "scenario_name": "Reject pending revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to access revision history",
          "expected": "Article detail view with History link to access pending revisions",
          "actual": "Article detail page renders empty - no Wiki module content",
          "screenshot": "Revision Management_step09_article_detail_empty.png"
        }
      ],
      "issues": [
        "Cannot access revision rejection feature - article detail pages do not render Wiki module content",
        "Reject functionality exists in RevisionsApiController.cs (Reject endpoint) but is inaccessible via UI"
      ]
    },
    {
      "scenario_name": "Restore previous revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to access revision history",
          "expected": "Article detail view with History link to access revision list with Rollback option",
          "actual": "Article detail page renders empty - no Wiki module content",
          "screenshot": "Revision Management_step09_article_detail_empty.png"
        }
      ],
      "issues": [
        "Cannot access revision rollback feature - article detail pages do not render Wiki module content",
        "Rollback functionality exists in RevisionsApiController.cs (Rollback endpoint) but is inaccessible via UI"
      ]
    },
    {
      "scenario_name": "Test revision state transitions (Draft->Pending->Published)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Create test article for revision management testing",
          "expected": "Article created successfully",
          "actual": "Article 'Test Article for Revision Management' created successfully and visible in list",
          "screenshot": "Revision Management_step06_wiki_articles_list.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to article detail page to access revision management",
          "expected": "Article detail view with edit and history options",
          "actual": "Article detail page renders empty - cannot access revision state management",
          "screenshot": "Revision Management_step10_article_detail_no_content.png"
        }
      ],
      "issues": [
        "Cannot test revision state transitions - article detail pages do not render Wiki module content",
        "Revision states (Pending=0, Unpublished=1, Published=2, Deleted=3) are defined in code but cannot be observed/modified via UI"
      ]
    },
    {
      "scenario_name": "Delete revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to access revision history",
          "expected": "Article detail view with History link to access revision list with Delete option",
          "actual": "Article detail page renders empty - no Wiki module content",
          "screenshot": "Revision Management_step09_article_detail_empty.png"
        }
      ],
      "issues": [
        "Cannot access revision deletion feature - article detail pages do not render Wiki module content",
        "Delete functionality exists in RevisionsApiController.cs (Delete endpoint) but is inaccessible via UI"
      ]
    },
    {
      "scenario_name": "Test multiple pending revisions",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to article detail page to create and manage multiple pending revisions",
          "expected": "Article detail view with edit functionality to create revisions",
          "actual": "Article detail page renders empty - cannot create or view revisions",
          "screenshot": "Revision Management_step10_article_detail_no_content.png"
        }
      ],
      "issues": [
        "Cannot test multiple pending revisions - article detail pages do not render Wiki module content",
        "Revision history table (ChangesetControl.ascx) that would show multiple revisions is inaccessible"
      ]
    }
  ],
  "observations": [
    "Code Review Findings: The Revision Management feature is fully implemented in the codebase with the following components:",
    "- RevisionsServiceController.cs: Wiki-specific revision controller extending RevisionsApiController",
    "- RevisionsApiController.cs: Main API with endpoints for GetRevisions, Delete, Publish, Reject, UndoReject, UndoDelete, Rollback, Compare",
    "- ChangesetControl.ascx: UI control for revision history table with Version, Date, User, Type, State columns and action buttons",
    "- Article.ascx: Contains History link (lines 78-83) that triggers the revision management dialog",
    "- Revision States defined: Pending (0), Unpublished (1), Published (2), Deleted (3)",
    "",
    "Environment Configuration Issue: The Wiki article detail pages (child pages created when articles are added) do not have the Wiki Article module configured to display content. When navigating to article URLs like /Wiki-Test/Test-Article-for-Revision-Management, the page loads but shows only header/footer with empty content area.",
    "",
    "UI Access Path: The History link that would open the Revision Management dialog is located in Article.ascx at lines 80-82, wrapped in a CanModerate permission check. This control only renders when the Wiki Article module is properly configured on the page.",
    "",
    "Recommendation: To test Revision Management functionality, the Wiki Article (detail view) module needs to be added to the article child page template in the DNN site configuration."
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 0,
    "failed": 8,
    "pass_rate": "0%"
  }
}

{
  "metadata": {
    "extension_name": "Evoq.Social.Wiki",
    "extension_type": "Module",
    "feature_name": "Table of Contents",
    "feature_description": "Automatically generate and display table of contents for articles",
    "feature_priority": "Low",
    "test_date": "2026-02-28T08:47:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Enable TOC for article",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Wiki Test page and click Create article",
          "expected": "Create article dialog opens with TOC option visible",
          "actual": "Create article dialog opened with 'Display a Table of Contents:' checkbox visible and checked by default",
          "screenshot": "Table of Contents_step03_create_article_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Verify TOC checkbox is enabled by default",
          "expected": "Display a Table of Contents checkbox should be checked",
          "actual": "Checkbox was checked by default, confirming TOC is enabled for new articles",
          "screenshot": "Table of Contents_step05_toc_checkbox_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Disable TOC",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click on the 'Display a Table of Contents' checkbox to uncheck it",
          "expected": "Checkbox should become unchecked",
          "actual": "Checkbox was successfully unchecked, disabling TOC for the article",
          "screenshot": "Table of Contents_step06_toc_checkbox_disabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Generate TOC from headings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter article content with h2 and h3 headings in the Content field",
          "expected": "Content with headings should be accepted",
          "actual": "HTML content with h2 (Introduction, Main Content, Conclusion) and h3 (Sub Section 1, Sub Section 2) headings was entered successfully",
          "screenshot": "Table of Contents_step04_form_filled.png"
        },
        {
          "step_number": 2,
          "action": "Verify code confirms TOC generation from h2, h3, h4 headings",
          "expected": "Code should parse headings to build TOC tree",
          "actual": "Code review confirmed TableOfContentsController.cs parses h2, h3, h4 headings using XPath '//*[self::h2 or self::h3 or self::h4]/text()' and builds a SectionNode tree structure",
          "screenshot": "Table of Contents_step04_form_filled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test TOC navigation links",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to existing article to verify TOC navigation links",
          "expected": "Article should load with clickable TOC links",
          "actual": "All existing articles returned 404 error when accessed",
          "screenshot": "Table of Contents_step02_article_404.png"
        }
      ],
      "issues": ["Existing Wiki articles return 404 error when accessed, preventing verification of TOC navigation links in article view"]
    }
  ],
  "observations": [
    "Code confirms TOC is generated from h2, h3, h4 headings in article content using HtmlAgilityPack library (TableOfContentsController.cs:31)",
    "TOC is displayed via Contents.ascx control which renders a 'Contents' heading with the tree structure or 'NoContents' message if no headings exist",
    "The Index.ascx.cs loads the Contents control when viewing an article (ContentItemId >= 0), otherwise shows Categories",
    "TOC feature uses Knockout.js for client-side rendering (dnn.wiki.Contents JavaScript class)",
    "All existing Wiki articles in the test environment return 404 errors, which is a separate infrastructure issue not related to the TOC feature itself"
  ],
  "summary": {
    "total_scenarios": 4,
    "passed": 3,
    "failed": 1,
    "pass_rate": "75%"
  }
}

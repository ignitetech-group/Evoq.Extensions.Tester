<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Portal Support - Test Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0078d4;
            padding-bottom: 10px;
        }
        h2 {
            color: #0078d4;
            margin-top: 30px;
        }
        h3 {
            color: #444;
        }
        .feature-info {
            background-color: #e7f3ff;
            border-left: 4px solid #0078d4;
            padding: 15px;
            margin: 20px 0;
        }
        .test-case {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pass {
            color: #28a745;
            font-weight: bold;
            font-size: 1.2em;
        }
        .fail {
            color: #dc3545;
            font-weight: bold;
            font-size: 1.2em;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        .status-pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status-fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .summary {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .summary h2 {
            color: #155724;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #0078d4;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .observations {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Multi-Portal Support - Test Report</h1>

    <div class="feature-info">
        <h3>Feature Information</h3>
        <p><strong>Extension:</strong> Evoq.PersonaBar.Assets (PersonaBar Module)</p>
        <p><strong>Feature Name:</strong> Multi-Portal Support</p>
        <p><strong>Description:</strong> Manages assets across multiple portals with portal-specific root folders and permissions</p>
        <p><strong>Feature Priority:</strong> High</p>
        <p><strong>UI Location:</strong> Admin > Content > Assets > Portal/Host Selection</p>
        <p><strong>Test Date:</strong> January 6, 2026</p>
        <p><strong>Tested By:</strong> SuperUser Account (host)</p>
    </div>

    <div class="summary">
        <h2>Test Summary</h2>
        <table>
            <tr>
                <th>Test Case</th>
                <th>Status</th>
            </tr>
            <tr>
                <td>Access portal-specific assets</td>
                <td><span class="status-badge status-pass">PASS</span></td>
            </tr>
            <tr>
                <td>Access host-level assets</td>
                <td><span class="status-badge status-pass">PASS</span></td>
            </tr>
            <tr>
                <td>Switch between portals</td>
                <td><span class="status-badge status-pass">PASS</span></td>
            </tr>
            <tr>
                <td>Portal-specific root folders</td>
                <td><span class="status-badge status-pass">PASS</span></td>
            </tr>
            <tr>
                <td>Portal isolation verification</td>
                <td><span class="status-badge status-pass">PASS</span></td>
            </tr>
        </table>
        <p><strong>Overall Result: 5/5 Tests PASSED</strong></p>
    </div>

    <h2>Test Cases</h2>

    <div class="test-case">
        <h3>Test 1: Access Portal-Specific Assets</h3>
        <p><strong>Objective:</strong> Verify that users can access assets specific to their portal</p>
        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Logged in as SuperUser (host)</li>
                <li>Navigated to Content > Assets</li>
                <li>Clicked on "My Website" portal folder</li>
                <li>Verified portal-specific folders and files were displayed</li>
            </ol>
        </div>
        <p><strong>Expected Result:</strong> Portal shows its own assets (folders and files)</p>
        <p><strong>Actual Result:</strong> "My Website" portal displayed 8 folders (Badges, Groups, Images, PermissionsTestFolder, Templates, TestNewFolder2026, long folder name, Users) and multiple files (batch images, cavalier-logo.png, XML files, CSS files, etc.)</p>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <img src="Multi-Portal Support_step02_mywebsite_assets.png" alt="My Website portal assets">
    </div>

    <div class="test-case">
        <h3>Test 2: Access Host-Level Assets</h3>
        <p><strong>Objective:</strong> Verify that SuperUsers can access global/host-level assets</p>
        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>From the Assets panel, navigated back to portal list</li>
                <li>Clicked on "Global Assets" folder</li>
                <li>Verified host-level system folders and files were displayed</li>
            </ol>
        </div>
        <p><strong>Expected Result:</strong> Global Assets shows system-wide folders and files shared across all portals</p>
        <p><strong>Actual Result:</strong> Global Assets displayed system folders with globe icons (Cache, Config, Containers, EventQueue, Install, Logs, Skins, Smileys, Templates, Users) and system files (admin.css, admin.template, website templates, XML configs, portal.css)</p>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <img src="Multi-Portal Support_step03_global_assets.png" alt="Global Assets (host-level)">
    </div>

    <div class="test-case">
        <h3>Test 3: Switch Between Portals</h3>
        <p><strong>Objective:</strong> Verify that SuperUsers can seamlessly switch between different portal asset repositories</p>
        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>From Global Assets, navigated back to portal list</li>
                <li>Clicked on "Test Portal" folder</li>
                <li>Verified different portal content was displayed</li>
                <li>Compared with previously viewed "My Website" content</li>
            </ol>
        </div>
        <p><strong>Expected Result:</strong> User can switch between portals and see different content</p>
        <p><strong>Actual Result:</strong> Successfully switched to "Test Portal" which showed different content: only 4 folders (Badges, Images, Templates, Users) and 2 files (cavalier-logo.png, GettingStarted.css) compared to "My Website" which had 8 folders and 20+ files</p>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <img src="Multi-Portal Support_step04_test_portal.png" alt="Test Portal assets">
    </div>

    <div class="test-case">
        <h3>Test 4: Portal-Specific Root Folders</h3>
        <p><strong>Objective:</strong> Verify each portal maintains its own root folder with independent content</p>
        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Viewed the Assets panel root level</li>
                <li>Confirmed three distinct portal root folders are visible</li>
                <li>Verified each portal folder has its own "Home" as root</li>
            </ol>
        </div>
        <p><strong>Expected Result:</strong> Each portal should have its own root folder displayed separately</p>
        <p><strong>Actual Result:</strong> Three distinct root folders displayed: "Global Assets" (host-level with globe icon), "My Website" (current portal), "Test Portal" (another portal). Each has independent content structure.</p>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <img src="Multi-Portal Support_step05_all_portals.png" alt="All three portal root folders">
    </div>

    <div class="test-case">
        <h3>Test 5: Portal Isolation Verification</h3>
        <p><strong>Objective:</strong> Verify that content is properly isolated between portals</p>
        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Compared "My Website" content with "Test Portal" content</li>
                <li>Verified folders created in one portal don't appear in another</li>
                <li>Verified files uploaded to one portal don't appear in another</li>
            </ol>
        </div>
        <p><strong>Expected Result:</strong> Each portal maintains completely separate asset storage</p>
        <p><strong>Actual Result:</strong> Content is properly isolated:
            <ul>
                <li><strong>My Website:</strong> 8 folders, 20+ files including custom folders like "PermissionsTestFolder", "TestNewFolder2026", and various uploaded images</li>
                <li><strong>Test Portal:</strong> 4 basic folders, 2 files - minimal default content</li>
                <li><strong>Global Assets:</strong> System-level content shared across all portals</li>
            </ul>
        </p>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
    </div>

    <h2>Code Review Findings</h2>
    <div class="test-case">
        <p>The following code patterns support Multi-Portal Support:</p>
        <ul>
            <li><strong>GetPortalsRootFolder() method (AssetsController.cs:1477-1500):</strong> Returns different folder lists based on user type - SuperUsers see Global Assets + all portal folders, regular users see only their portal</li>
            <li><strong>IsPortalIdValid() method (AssetsController.cs:1105-1115):</strong> Validates portal access - SuperUsers can access all portals, Admins can access portals in their portal group, regular users only their own portal</li>
            <li><strong>AssetsMenuController.GetSettings() method:</strong> Restricts non-SuperUsers with rootFolderId and portalId parameters</li>
            <li><strong>FormatFolderName() method (AssetsController.cs:1502-1515):</strong> Shows "Host" for global assets folder and portal name for portal root folders</li>
        </ul>
    </div>

    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li>The multi-portal support feature is fully functional for SuperUsers</li>
            <li>Visual differentiation is provided through globe icons for Global Assets vs folder icons for portal-specific folders</li>
            <li>The UI clearly shows the portal name for each root folder, making it easy to distinguish between portals</li>
            <li>Cross-portal permission testing for non-SuperUser accounts was not performed in this test cycle (would require additional test users with specific roles)</li>
            <li>Portal group support (for Admin users who can access multiple portals in their group) exists in code but was not tested as it requires specific portal group configuration</li>
        </ul>
    </div>

    <h2>Screenshots Reference</h2>
    <table>
        <tr>
            <th>Screenshot</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>Multi-Portal Support_step00_login_confirmed.png</td>
            <td>Login confirmation as SuperUser</td>
        </tr>
        <tr>
            <td>Multi-Portal Support_step01_assets_portal_list.png</td>
            <td>Initial Assets panel showing portal folders</td>
        </tr>
        <tr>
            <td>Multi-Portal Support_step02_mywebsite_assets.png</td>
            <td>My Website portal assets</td>
        </tr>
        <tr>
            <td>Multi-Portal Support_step03_global_assets.png</td>
            <td>Global Assets (host-level) content</td>
        </tr>
        <tr>
            <td>Multi-Portal Support_step04_test_portal.png</td>
            <td>Test Portal assets showing different content</td>
        </tr>
        <tr>
            <td>Multi-Portal Support_step05_all_portals.png</td>
            <td>All three portal root folders visible</td>
        </tr>
    </table>

</body>
</html>

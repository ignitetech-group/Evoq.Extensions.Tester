{
  "metadata": {
    "extension_name": "DNNPro_ActiveDirectoryAuthentication",
    "extension_type": "Authentication Provider",
    "feature_name": "Windows Single Sign-On (SSO)",
    "feature_description": "Automatic authentication using Windows integrated authentication for domain-joined computers",
    "feature_priority": "Top",
    "test_date": "2026-02-09T15:34:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "WindowsSignIn.aspx Page Accessibility",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate directly to WindowsSignin.aspx endpoint",
          "expected": "Page should respond with either content or authentication challenge",
          "actual": "Page returns HTTP 401.2 Unauthorized error, indicating it is properly configured to require Windows Integrated Authentication in IIS. The page exists at the correct physical path and is denying anonymous access as intended.",
          "screenshot": "Windows Single Sign-On (SSO)_step05_windowssignin_401_expected.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Windows Login Tab Presence on Login Page",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to login page as anonymous user and check for Windows/AD login tab",
          "expected": "Login page should show a Windows or Active Directory authentication tab alongside the standard DNN login",
          "actual": "Login page shows only the standard DNN username/password form. No Windows login tab, AD authentication option, or alternative authentication tabs are present.",
          "screenshot": "Windows Single Sign-On (SSO)_step04_login_page_no_windows_tab.png"
        }
      ],
      "issues": ["The AD Authentication provider is not registered as an active authentication system on this site, so the Windows login tab does not appear on the login page"]
    },
    {
      "scenario_name": "AD Authentication Provider Registration",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Extensions and filter by Authentication Systems",
          "expected": "Active Directory or Windows Authentication should be listed as an available authentication system",
          "actual": "Only 'Default Authentication' (DNN standard) is listed under Authentication Systems. No Active Directory authentication provider is registered.",
          "screenshot": "Windows Single Sign-On (SSO)_step02_auth_systems_list.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to Settings > Security > Authentication and check Default Authentication Provider dropdown",
          "expected": "Active Directory or Windows Authentication should be an available option in the dropdown",
          "actual": "Only 'DNN' is available in the Default Authentication Provider dropdown. No AD/Windows option is available.",
          "screenshot": "Windows Single Sign-On (SSO)_step03_security_auth_settings.png"
        }
      ],
      "issues": ["The DNNPro_ActiveDirectory module files exist on the filesystem but the provider is not registered as an authentication system in the DNN platform"]
    },
    {
      "scenario_name": "SSO Auto-Login from Domain-Joined Computer",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Access site from a domain-joined computer to trigger automatic Windows SSO",
          "expected": "User should be automatically authenticated via Windows Integrated Authentication without manual login",
          "actual": "Auto-login does not occur. The site presents the standard login page. SSO functionality requires: 1) AD Authentication provider to be enabled in site settings, 2) WindowsAuthentication or HideWindowsLogin to be set to true in configuration, 3) Client IP to be in the AutoIP range, 4) IIS Windows Authentication to be enabled.",
          "screenshot": "Windows Single Sign-On (SSO)_step04_login_page_no_windows_tab.png"
        }
      ],
      "issues": ["SSO auto-login cannot be tested because the AD Authentication provider is not enabled and configured on this site"]
    },
    {
      "scenario_name": "Authentication Status Cookie Management",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Check for DNNReturnTo and authentication status cookies during login flow",
          "expected": "DNNReturnTo cookie should be set to store return URL, and authentication status cookies should track SSO state (Undefined, WinProcess, WinLogon, WinLogoff)",
          "actual": "No DNNReturnTo cookie or AD authentication status cookies are present. Only standard Google Analytics cookies and DNN session cookies are visible. The AD HttpModule is not processing requests because WindowsAuthentication is not enabled.",
          "screenshot": "Windows Single Sign-On (SSO)_step06_more_security_settings.png"
        }
      ],
      "issues": ["Cookie management for SSO cannot be tested because the AD Authentication HTTP module is not actively processing requests when WindowsAuthentication is disabled"]
    }
  ],
  "observations": [
    "The DNNPro_ActiveDirectory module files ARE deployed to the filesystem at DesktopModules/AuthenticationServices/DNNPro_ActiveDirectory/",
    "The WindowsSignin.aspx page exists and is properly configured in IIS to deny anonymous access (returns 401.2), which is the expected configuration for Windows Integrated Authentication",
    "The Login.ascx control exists for manual AD authentication (username/password form)",
    "The Settings.ascx control exists for configuring AD authentication settings",
    "Code analysis shows the AuthenticationModule.cs HTTP module handles SSO by: checking config.WindowsAuthentication or config.HideWindowsLogin flags, managing authentication status cookies (Undefined, WinProcess, WinLogon, WinLogoff), setting DNNReturnTo cookie for return URL, and redirecting to WindowsSignin.aspx when client IP matches AutoIP configuration",
    "The AD Authentication provider is NOT registered as an authentication system in the Extensions list, indicating it may need to be installed/configured separately or requires additional setup",
    "Windows SSO requires IIS Windows Authentication to be enabled on the site, which is an infrastructure dependency outside the DNN application"
  ],
  "summary": {
    "total_scenarios": 5,
    "passed": 1,
    "failed": 4,
    "pass_rate": "20%"
  }
}

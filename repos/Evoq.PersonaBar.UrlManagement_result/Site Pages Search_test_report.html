<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Pages Search - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0078d4;
            padding-bottom: 10px;
        }
        h2 {
            color: #444;
            margin-top: 30px;
        }
        .feature-info {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info p {
            margin: 5px 0;
        }
        .test-scenario {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 20px;
            background-color: #fafafa;
        }
        .test-scenario h3 {
            margin-top: 0;
            color: #333;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 3px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status.pass {
            background-color: #4caf50;
            color: white;
        }
        .status.fail {
            background-color: #f44336;
            color: white;
        }
        .steps {
            background-color: #f9f9f9;
            padding: 10px 15px;
            border-left: 3px solid #0078d4;
            margin: 15px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            font-style: italic;
            color: #666;
            margin-top: 5px;
        }
        .observations {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        .summary {
            background-color: #e8f5e9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .summary h2 {
            margin-top: 0;
            color: #2e7d32;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Site Pages Search - Test Report</h1>

        <div class="feature-info">
            <p><strong>Extension:</strong> Evoq.PersonaBar.UrlManagement (PersonaBar Module)</p>
            <p><strong>Feature Name:</strong> Site Pages Search</p>
            <p><strong>Description:</strong> Search and retrieve site pages for URL management operations</p>
            <p><strong>Feature Priority:</strong> Low (SMOKE testing)</p>
            <p><strong>UI Location:</strong> Admin > Persona Bar > Settings > SEO > URL Management > TEST URL > Page to Test</p>
            <p><strong>Test Date:</strong> January 6, 2026</p>
        </div>

        <h2>Test Scenarios</h2>

        <!-- Test 1: Retrieve All Pages Without Filter -->
        <div class="test-scenario">
            <h3>Test 1: Retrieve All Pages Without Search Filter</h3>
            <span class="status pass">PASS</span>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Navigated to Settings > SEO > URL Management > TEST URL tab</li>
                    <li>Clicked on the "Page to Test" dropdown</li>
                    <li>Observed the page list displayed without any filter applied</li>
                    <li>Verified the count showed "28 Results"</li>
                </ol>
            </div>

            <p><strong>Expected Result:</strong> All site pages should be listed when no search filter is applied.</p>
            <p><strong>Actual Result:</strong> All 28 pages were displayed in the dropdown list including Home, Our Products, Activity Feed, News, Community, Admin, various test pages, and more.</p>

            <div class="screenshot">
                <img src="Site_Pages_Search_step05_all_pages_displayed.png" alt="All pages displayed without filter">
                <p class="screenshot-caption">Screenshot showing all 28 pages displayed in the page picker dropdown</p>
            </div>
        </div>

        <!-- Test 2: Search Pages by Title -->
        <div class="test-scenario">
            <h3>Test 2: Search Pages by Title (Exact Match)</h3>
            <span class="status pass">PASS</span>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Opened the "Page to Test" dropdown</li>
                    <li>Typed "Home" in the search box</li>
                    <li>Observed the filtered results</li>
                    <li>Verified only the "Home" page was displayed</li>
                </ol>
            </div>

            <p><strong>Expected Result:</strong> Only pages matching the exact search term should be displayed.</p>
            <p><strong>Actual Result:</strong> The search returned "1 Results" showing only the "Home" page, confirming exact title search works correctly.</p>

            <div class="screenshot">
                <img src="Site_Pages_Search_step06_search_by_title_home.png" alt="Search by title - Home">
                <p class="screenshot-caption">Screenshot showing search for "Home" returning 1 result</p>
            </div>
        </div>

        <!-- Test 3: Partial Text Match Search -->
        <div class="test-scenario">
            <h3>Test 3: Search Pages by Partial Text Match</h3>
            <span class="status pass">PASS</span>

            <div class="steps">
                <strong>Steps Taken:</strong>
                <ol>
                    <li>Cleared the previous search</li>
                    <li>Typed "Test" in the search box</li>
                    <li>Observed the filtered results</li>
                    <li>Verified all pages containing "Test" were displayed</li>
                </ol>
            </div>

            <p><strong>Expected Result:</strong> All pages containing the search term anywhere in their title should be displayed (case-insensitive).</p>
            <p><strong>Actual Result:</strong> The search returned "22 Results" including: HubSpot Forms Test, Marketo Forms Test, BulkTestPage1, BulkTestPage2, Workflow Test Page, Publish Test Page, URL Test Page, Test Normal Page, TestParentPage, Test & &lt;Special&gt; Page!, and more. This confirms partial text matching works correctly.</p>

            <div class="screenshot">
                <img src="Site_Pages_Search_step07_partial_text_search.png" alt="Partial text search - Test">
                <p class="screenshot-caption">Screenshot showing search for "Test" returning 22 matching results</p>
            </div>
        </div>

        <!-- Summary -->
        <div class="summary">
            <h2>Test Summary</h2>
            <table>
                <thead>
                    <tr>
                        <th>Test Scenario</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Retrieve all pages without search filter</td>
                        <td><span class="status pass">PASS</span></td>
                    </tr>
                    <tr>
                        <td>Search pages by title (exact match)</td>
                        <td><span class="status pass">PASS</span></td>
                    </tr>
                    <tr>
                        <td>Search pages by partial text match</td>
                        <td><span class="status pass">PASS</span></td>
                    </tr>
                </tbody>
            </table>

            <p><strong>Overall Result:</strong> <span class="status pass">ALL TESTS PASSED</span></p>
            <p><strong>Tests Passed:</strong> 3 / 3</p>
            <p><strong>Tests Failed:</strong> 0</p>
        </div>

        <!-- Observations -->
        <div class="observations">
            <h2>Observations</h2>
            <ul>
                <li><strong>Feature Location:</strong> The Site Pages Search feature is accessible through Settings > SEO > URL Management > TEST URL tab, in the "Page to Test" dropdown. This allows users to search for pages when testing URL generation.</li>
                <li><strong>API Implementation:</strong> Based on code review (UrlManagementServiceController.cs), the GetSitePages API endpoint supports:
                    <ul>
                        <li>Retrieval of all portal pages where DisableLink is false</li>
                        <li>Case-insensitive search using IndexOf with StringComparison.InvariantCultureIgnoreCase</li>
                        <li>Returns pages sorted alphabetically by LocalizedTabName</li>
                    </ul>
                </li>
                <li><strong>UI Components:</strong> The page picker dropdown includes:
                    <ul>
                        <li>A search input field with placeholder "Search pages.."</li>
                        <li>A hierarchical list showing page structure with expand/collapse icons</li>
                        <li>Real-time result count display (e.g., "28 Results", "1 Results")</li>
                    </ul>
                </li>
                <li><strong>Performance:</strong> Search results appeared instantly with no noticeable delay.</li>
            </ul>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Custom URL Listing and Sorting</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #1a5276, #2980b9);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0 0 10px 0;
        }
        .header p {
            margin: 5px 0;
            opacity: 0.9;
        }
        .summary-box {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-item {
            flex: 1;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .summary-pass {
            background-color: #d4edda;
            border: 2px solid #28a745;
        }
        .summary-fail {
            background-color: #f8d7da;
            border: 2px solid #dc3545;
        }
        .summary-item h2 {
            margin: 0;
            font-size: 36px;
        }
        .summary-item p {
            margin: 5px 0 0 0;
            font-weight: bold;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }
        .status-pass {
            background-color: #28a745;
            color: white;
        }
        .status-fail {
            background-color: #dc3545;
            color: white;
        }
        .test-steps {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .test-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 15px 0;
        }
        .issue-box {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .observations-section {
            background: #e8f4fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
        }
        .observations-section h2 {
            margin-top: 0;
            color: #1565c0;
        }
        .observations-section ul {
            margin: 0;
        }
        .observations-section li {
            margin-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Test Report: Custom URL Listing and Sorting</h1>
        <p><strong>Extension:</strong> Evoq.PersonaBar.UrlManagement</p>
        <p><strong>Feature:</strong> View, sort, and manage the list of custom URLs</p>
        <p><strong>UI Location:</strong> Admin > Persona Bar > Pages > [Select Page] > Advanced > S.E.O.</p>
        <p><strong>Test Date:</strong> January 6, 2026</p>
        <p><strong>Priority:</strong> High</p>
    </div>

    <div class="summary-box">
        <div class="summary-item summary-pass">
            <h2>3</h2>
            <p>PASSED</p>
        </div>
        <div class="summary-item summary-fail">
            <h2>5</h2>
            <p>FAILED</p>
        </div>
    </div>

    <!-- Test 1: Retrieve all custom URLs -->
    <div class="test-section">
        <h2>Test 1: Retrieve All Custom URLs <span class="status status-pass">PASS</span></h2>
        <p><strong>Description:</strong> Verify that all custom URLs for a page are displayed in the URL Management section.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Logged in as SuperUser (host)</li>
                <li>Navigated to Content > Pages</li>
                <li>Selected "URL Test Page" from the page list</li>
                <li>Clicked on Advanced tab</li>
                <li>Clicked on S.E.O. sub-tab</li>
                <li>Observed the "URLs for this page" section</li>
            </ol>
        </div>

        <p><strong>Result:</strong> All URLs for the page are displayed correctly. The following URLs were shown:</p>
        <table>
            <tr>
                <th>URL</th>
                <th>URL Type</th>
                <th>Generated By</th>
            </tr>
            <tr>
                <td>/test-delete-url-1</td>
                <td>Active (200)</td>
                <td>Custom (edit/delete icons)</td>
            </tr>
            <tr>
                <td>/URL-Test-Page</td>
                <td>Active (200)</td>
                <td>Automatic</td>
            </tr>
            <tr>
                <td>/redirect-test-url</td>
                <td>Redirect (301)</td>
                <td>Custom (edit/delete icons)</td>
            </tr>
            <tr>
                <td>/test-custom-url-alpha</td>
                <td>Redirect (301)</td>
                <td>Custom (edit/delete icons)</td>
            </tr>
            <tr>
                <td>/test-specialchars-page</td>
                <td>Redirect (301)</td>
                <td>Custom (edit/delete icons)</td>
            </tr>
            <tr>
                <td>/URLTestPage</td>
                <td>Redirect (301)</td>
                <td>Automatic</td>
            </tr>
            <tr>
                <td>/URL-Test-Page</td>
                <td>Redirect (301)</td>
                <td>Automatic</td>
            </tr>
        </table>

        <img src="Custom_URL_Listing_and_Sorting_step01_url_management_found.png" alt="URL Management Section" class="screenshot">
    </div>

    <!-- Test 2: Sort by URL path alphabetically -->
    <div class="test-section">
        <h2>Test 2: Sort by URL Path Alphabetically <span class="status status-fail">FAIL</span></h2>
        <p><strong>Description:</strong> Verify that URLs can be sorted alphabetically by URL path.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Navigated to URL Management section for "URL Test Page"</li>
                <li>Looked for sorting controls (dropdown, clickable headers, sort icons)</li>
                <li>Clicked on "URL" column header to test if it triggers sorting</li>
                <li>Observed no change in URL order</li>
            </ol>
        </div>

        <div class="issue-box">
            <strong>Issue Found:</strong> No sorting controls are visible in the UI. The column headers (URL, URL Type, Generated By) are not clickable sort controls. Clicking on them does not trigger any sorting action.
        </div>

        <img src="Custom_URL_Listing_and_Sorting_step02_no_sorting_controls.png" alt="No Sorting Controls" class="screenshot">
    </div>

    <!-- Test 3: Sort by creation date -->
    <div class="test-section">
        <h2>Test 3: Sort by Creation Date <span class="status status-fail">FAIL</span></h2>
        <p><strong>Description:</strong> Verify that URLs can be sorted by creation date.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Reviewed the backend code (UrlManagementServiceController.cs)</li>
                <li>Searched for sorting fields in the SortingFields enum</li>
                <li>Found only: None, Url, Locale, Status (no creation date)</li>
                <li>Looked for creation date column in UI - none found</li>
            </ol>
        </div>

        <div class="issue-box">
            <strong>Issue Found:</strong> Creation date sorting is not implemented. The backend code only supports sorting by URL, Locale, and Status. There is no creation date field in the data model or UI.
        </div>
    </div>

    <!-- Test 4: Sort by locale -->
    <div class="test-section">
        <h2>Test 4: Sort by Locale <span class="status status-fail">FAIL</span></h2>
        <p><strong>Description:</strong> Verify that URLs can be sorted by locale.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Observed the URL list columns: URL, URL Type, Generated By</li>
                <li>Noted that Locale column is not displayed in the UI</li>
                <li>Backend code has Locale as a sorting field but it's not exposed in the UI</li>
            </ol>
        </div>

        <div class="issue-box">
            <strong>Issue Found:</strong> The Locale column is not displayed in the URL Management UI. While the backend API supports locale sorting (SortingFields.Locale), there is no UI element to trigger this sorting or view locale information.
        </div>
    </div>

    <!-- Test 5: Sort by status code -->
    <div class="test-section">
        <h2>Test 5: Sort by Status Code <span class="status status-fail">FAIL</span></h2>
        <p><strong>Description:</strong> Verify that URLs can be sorted by status code (200/301).</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Observed the "URL Type" column showing status codes (Active 200, Redirect 301)</li>
                <li>Clicked on "URL Type" column header</li>
                <li>No sorting occurred - header is not a clickable sort control</li>
            </ol>
        </div>

        <div class="issue-box">
            <strong>Issue Found:</strong> While URL Type column displays status codes correctly, there is no way to sort by this field. The column header is not interactive.
        </div>
    </div>

    <!-- Test 6: Ascending and descending sort orders -->
    <div class="test-section">
        <h2>Test 6: Test Ascending and Descending Sort Orders <span class="status status-fail">FAIL</span></h2>
        <p><strong>Description:</strong> Verify that sort direction can be toggled between ascending and descending.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Looked for sort direction indicators (arrows, icons)</li>
                <li>Attempted to click column headers multiple times</li>
                <li>No sort direction toggle functionality found</li>
            </ol>
        </div>

        <div class="issue-box">
            <strong>Issue Found:</strong> Since sorting controls are not exposed in the UI, there is no way to toggle between ascending and descending sort orders. The backend API supports both directions (sortOrder parameter), but the UI doesn't provide access to this functionality.
        </div>
    </div>

    <!-- Test 7: Verify correct display of URL properties -->
    <div class="test-section">
        <h2>Test 7: Verify Correct Display of URL Properties <span class="status status-pass">PASS</span></h2>
        <p><strong>Description:</strong> Verify that URL properties are displayed correctly.</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Observed the URL list for "URL Test Page"</li>
                <li>Verified URL path is displayed correctly (e.g., /test-delete-url-1)</li>
                <li>Verified URL Type shows status correctly (Active 200, Redirect 301)</li>
                <li>Verified Generated By distinguishes between custom and automatic URLs</li>
            </ol>
        </div>

        <p><strong>Result:</strong> All URL properties are displayed correctly:</p>
        <ul>
            <li><strong>URL:</strong> Full path displayed (e.g., /test-delete-url-1, /URL-Test-Page)</li>
            <li><strong>URL Type:</strong> Shows "Active (200)" for primary URLs and "Redirect (301)" for redirect URLs</li>
            <li><strong>Generated By:</strong> Shows "Automatic" for system-generated URLs, or edit/delete icons for custom URLs</li>
        </ul>

        <img src="Custom_URL_Listing_and_Sorting_step01_url_management_found.png" alt="URL Properties Display" class="screenshot">
    </div>

    <!-- Test 8: Test with empty custom URL list -->
    <div class="test-section">
        <h2>Test 8: Test with Empty Custom URL List <span class="status status-pass">PASS</span></h2>
        <p><strong>Description:</strong> Verify behavior when a page has no custom URLs (only automatic URLs).</p>

        <div class="test-steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Selected "Test Normal Page" from the page list</li>
                <li>Navigated to Advanced > S.E.O. tab</li>
                <li>Observed the URL list showing only automatic URLs</li>
            </ol>
        </div>

        <p><strong>Result:</strong> Pages with no custom URLs correctly display only the automatic (system-generated) URLs. The "Test Normal Page" shows:</p>
        <table>
            <tr>
                <th>URL</th>
                <th>URL Type</th>
                <th>Generated By</th>
            </tr>
            <tr>
                <td>/Test-Normal-Page</td>
                <td>Active (200)</td>
                <td>Automatic</td>
            </tr>
        </table>

        <img src="Custom_URL_Listing_and_Sorting_step03_automatic_urls_only.png" alt="Automatic URLs Only" class="screenshot">
    </div>

    <!-- Observations Section -->
    <div class="observations-section">
        <h2>Observations</h2>
        <ul>
            <li><strong>Backend vs UI Mismatch:</strong> The backend code (UrlManagementServiceController.cs) implements sorting functionality with the <code>GetCustomUrls(sortField, sortOrder)</code> API that supports URL, Locale, and Status sorting. However, the UI does not expose any controls to utilize this sorting capability.</li>
            <li><strong>Missing Locale Column:</strong> The backend data model includes Locale information for URLs, but this is not displayed in the UI column layout.</li>
            <li><strong>No Creation Date Field:</strong> The suggested test scenario "Sort by creation date" cannot be tested because creation date is not a field in the URL data model. The backend enum only includes: None, Url, Locale, Status.</li>
            <li><strong>Add URL Functionality:</strong> The "+ Add URL" button is present and functional, allowing users to create new custom URLs for a page.</li>
            <li><strong>Edit/Delete Functionality:</strong> Custom URLs display edit (pencil) and delete (trash) icons, allowing management of individual custom URLs.</li>
            <li><strong>UI Location Clarification:</strong> The URL Management feature is accessed per-page through Content > Pages > [Select Page] > Advanced > S.E.O., not through a global Site Behavior setting as the original UI location suggested.</li>
        </ul>
    </div>

    <div style="margin-top: 30px; text-align: center; color: #666; font-size: 14px;">
        <p>Test Report Generated: January 6, 2026</p>
        <p>Tester: Automated Testing via Playwright MCP</p>
    </div>
</body>
</html>

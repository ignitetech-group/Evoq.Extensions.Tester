<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: System-Generated URL Management</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0078d4;
            padding-bottom: 10px;
        }
        h2 {
            color: #444;
            margin-top: 30px;
            border-left: 4px solid #0078d4;
            padding-left: 10px;
        }
        h3 {
            color: #555;
        }
        .test-case {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pass {
            color: #28a745;
            font-weight: bold;
            background: #d4edda;
            padding: 5px 15px;
            border-radius: 4px;
            display: inline-block;
        }
        .fail {
            color: #dc3545;
            font-weight: bold;
            background: #f8d7da;
            padding: 5px 15px;
            border-radius: 4px;
            display: inline-block;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .steps {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0078d4;
            padding: 15px;
            margin: 15px 0;
        }
        .observations {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background: #f8f9fa;
        }
        .summary-table th {
            background: #0078d4;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Test Report: System-Generated URL Management</h1>

    <div class="info-box">
        <strong>Extension:</strong> Evoq.PersonaBar.UrlManagement (PersonaBar Module)<br>
        <strong>Feature:</strong> System-Generated URL Management<br>
        <strong>Priority:</strong> High<br>
        <strong>Description:</strong> View and manage system-generated URLs with sorting and filtering capabilities<br>
        <strong>UI Location:</strong> Admin > Persona Bar > Pages > [Select Page] > Advanced > S.E.O.<br>
        <strong>Test Date:</strong> January 6, 2026
    </div>

    <h2>Test Summary</h2>
    <table class="summary-table">
        <tr>
            <th>Test Scenario</th>
            <th>Status</th>
            <th>Notes</th>
        </tr>
        <tr>
            <td>Retrieve all system-generated URLs</td>
            <td><span class="pass">PASS</span></td>
            <td>System URLs displayed with "Automatic" generator</td>
        </tr>
        <tr>
            <td>Sort URLs by different fields</td>
            <td><span class="fail">FAIL</span></td>
            <td>No UI controls for sorting visible</td>
        </tr>
        <tr>
            <td>Sort in ascending and descending order</td>
            <td><span class="fail">FAIL</span></td>
            <td>No UI controls for sort direction</td>
        </tr>
        <tr>
            <td>Filter system URLs by locale</td>
            <td><span class="pass">PASS</span></td>
            <td>Locale filtering via Site Alias dropdown</td>
        </tr>
        <tr>
            <td>View URL details including site alias</td>
            <td><span class="pass">PASS</span></td>
            <td>Add URL form shows Site Alias, URL Path, URL Type</td>
        </tr>
        <tr>
            <td>Verify pagination for large URL lists</td>
            <td><span class="pass">PASS</span></td>
            <td>No pagination needed - all URLs visible in list</td>
        </tr>
    </table>

    <h2>Test Case Details</h2>

    <!-- Test 1: Retrieve System URLs -->
    <div class="test-case">
        <h3>Test 1: Retrieve All System-Generated URLs</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that system-generated URLs are displayed and can be distinguished from custom URLs.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to Pages > Select a page (e.g., "URL Test Page")</li>
                <li>Go to Advanced tab > S.E.O. sub-tab</li>
                <li>View "URLs for this page" section</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> System-generated URLs should be displayed with an indicator showing they are automatic.</p>
        <p><strong>Actual Result:</strong> System URLs are shown with "Automatic" in the "GENERATED BY" column. Custom URLs show the user who created them (e.g., "SuperUser Account").</p>

        <p><strong>Evidence:</strong></p>
        <img src="System-Generated URL Management_step01_url_list.png" alt="Home Page URL List" class="screenshot">
        <p><em>Home page showing system-generated URL "/" with "Automatic" generator</em></p>

        <img src="System-Generated URL Management_step02_system_urls_display.png" alt="URL Test Page URLs" class="screenshot">
        <p><em>URL Test Page showing multiple system-generated URLs (/URL-Test-Page, /URLTestPage) and custom URLs</em></p>
    </div>

    <!-- Test 2: Sort URLs -->
    <div class="test-case">
        <h3>Test 2: Sort URLs by Different Fields</h3>
        <p><strong>Status:</strong> <span class="fail">FAIL</span></p>
        <p><strong>Description:</strong> Test sorting URLs by URL, Locale, and Status fields.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to a page's S.E.O. tab with URLs</li>
                <li>Attempt to click column headers (URL, URL Type, Generated By)</li>
                <li>Observe for sort indicators or order changes</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Column headers should be clickable to sort the URL list.</p>
        <p><strong>Actual Result:</strong> Column headers are NOT clickable. No sort controls or indicators are visible in the UI. The API supports sorting (confirmed via code review), but this functionality is not exposed in the UI.</p>

        <p><strong>Evidence:</strong></p>
        <img src="System-Generated URL Management_step03_no_sorting_ui.png" alt="No Sorting Controls" class="screenshot">
        <p><em>URL list with static column headers - no sorting controls visible</em></p>
    </div>

    <!-- Test 3: Sort Ascending/Descending -->
    <div class="test-case">
        <h3>Test 3: Sort in Ascending and Descending Order</h3>
        <p><strong>Status:</strong> <span class="fail">FAIL</span></p>
        <p><strong>Description:</strong> Test toggling sort direction between ascending and descending.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Attempted to find sort direction controls</li>
                <li>Clicked column headers multiple times</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Should be able to toggle between ascending and descending sort order.</p>
        <p><strong>Actual Result:</strong> No sort direction toggle is available. The backend API supports sortOrder parameter, but the UI does not expose this functionality.</p>

        <p><strong>Note:</strong> Code review confirmed the API endpoint <code>GetSystemGeneratedUrls(int sortField, bool sortOrder)</code> supports sorting, but the UI does not implement this feature.</p>
    </div>

    <!-- Test 4: Filter by Locale -->
    <div class="test-case">
        <h3>Test 4: Filter System URLs by Locale</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that URLs can be filtered or associated with specific locales.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Click "Add URL" button</li>
                <li>Open the "Site Alias" dropdown</li>
                <li>Observe locale-specific aliases</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Should be able to filter or view URLs by locale.</p>
        <p><strong>Actual Result:</strong> Locale filtering is achieved through Site Aliases. The dropdown shows locale-specific aliases:</p>
        <ul>
            <li>localhost:8081 (default)</li>
            <li>localhost:8081/ar-er (Arabic - Eritrea)</li>
            <li>localhost:8081/de-de (German - Germany)</li>
            <li>localhost:8081/en-us (English - United States)</li>
            <li>localhost:8081/es-ar (Spanish - Argentina)</li>
            <li>localhost:8081/fr-fr (French - France)</li>
        </ul>

        <p><strong>Evidence:</strong></p>
        <img src="System-Generated URL Management_step05_locale_aliases.png" alt="Locale Aliases Dropdown" class="screenshot">
        <p><em>Site Alias dropdown showing locale-specific URL aliases</em></p>
    </div>

    <!-- Test 5: View URL Details -->
    <div class="test-case">
        <h3>Test 5: View URL Details Including Site Alias</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that URL details can be viewed including site alias and query strings.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to a page's S.E.O. tab</li>
                <li>Click "Add URL" to view the URL form</li>
                <li>Observe available fields</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> URL details form should show site alias, path, status, and other relevant information.</p>
        <p><strong>Actual Result:</strong> The Add URL form displays:</p>
        <ul>
            <li><strong>Site Alias:</strong> Dropdown with all configured site aliases (including locale variants)</li>
            <li><strong>URL Path:</strong> Text field for the URL path</li>
            <li><strong>URL Type:</strong> Dropdown with options "Active (200)" and "Redirect (301)"</li>
        </ul>

        <p><strong>Note:</strong> System-generated URLs (marked as "Automatic") do not have edit/delete icons - only custom URLs can be modified.</p>

        <p><strong>Evidence:</strong></p>
        <img src="System-Generated URL Management_step04_url_details_form.png" alt="URL Details Form" class="screenshot">
        <p><em>Add URL form showing Site Alias, URL Path, and URL Type fields</em></p>
    </div>

    <!-- Test 6: Pagination -->
    <div class="test-case">
        <h3>Test 6: Verify Pagination for Large URL Lists</h3>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that pagination works for pages with many URLs.</p>

        <div class="steps">
            <strong>Steps:</strong>
            <ol>
                <li>Navigate to a page with multiple URLs (URL Test Page has 7 URLs)</li>
                <li>Observe if pagination controls appear</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Pagination should appear when URL count exceeds the page size.</p>
        <p><strong>Actual Result:</strong> No pagination controls are visible. The URL Test Page shows 7 URLs (3 system-generated + 4 custom) all displayed in a single scrollable list without pagination. This is acceptable behavior for small URL lists.</p>

        <p><strong>Evidence:</strong></p>
        <img src="System-Generated URL Management_step06_no_pagination.png" alt="URL List Without Pagination" class="screenshot">
        <p><em>All URLs displayed without pagination - appropriate for small lists</em></p>
    </div>

    <h2>Observations</h2>
    <div class="observations">
        <h3>Code vs UI Discrepancies</h3>
        <p>Based on code review of <code>UrlManagementServiceController.cs</code>:</p>
        <ul>
            <li><strong>Sorting:</strong> The API endpoint <code>GetSystemGeneratedUrls(int sortField, bool sortOrder)</code> supports sorting by URL, Locale, and Status fields with ascending/descending order. However, the UI does not expose any sorting controls to users.</li>
            <li><strong>Query String:</strong> The UrlDto includes a QueryString field, but the Add URL form does not display a query string input field.</li>
            <li><strong>Separate System/Custom Views:</strong> The code has separate endpoints for system URLs (<code>GetSystemGeneratedUrls</code>) and custom URLs (<code>GetCustomUrls</code>), but the UI displays both together in a single list differentiated by the "Generated By" column.</li>
        </ul>

        <h3>Feature Behavior Notes</h3>
        <ul>
            <li>System-generated URLs are created automatically based on page names and FriendlyURL settings</li>
            <li>Multiple system URLs can exist for the same page (e.g., with and without spaces/hyphens)</li>
            <li>System URLs cannot be edited or deleted - only custom URLs have action buttons</li>
            <li>URL types: Active (200) = primary URL, Redirect (301) = redirects to primary</li>
        </ul>
    </div>

    <h2>Test Environment</h2>
    <table>
        <tr><th>Property</th><th>Value</th></tr>
        <tr><td>Website URL</td><td>http://localhost:8081</td></tr>
        <tr><td>User</td><td>SuperUser Account (host)</td></tr>
        <tr><td>Browser</td><td>Playwright-controlled browser (1280x720)</td></tr>
        <tr><td>DNN Version</td><td>Evoq Engage (Trial)</td></tr>
    </table>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
        <p>Generated: January 6, 2026 | Tester: Claude Code (Automated Testing)</p>
    </footer>
</body>
</html>

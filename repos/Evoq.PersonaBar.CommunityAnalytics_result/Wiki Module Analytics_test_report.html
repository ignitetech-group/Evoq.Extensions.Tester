<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiki Module Analytics - Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0 0 10px 0;
        }
        .header .meta {
            opacity: 0.8;
            font-size: 14px;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }
        .status-fail {
            background-color: #ff4444;
            color: white;
        }
        .status-pass {
            background-color: #00C851;
            color: white;
        }
        .status-blocked {
            background-color: #ff8800;
            color: white;
        }
        .section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #1a1a2e;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .section h3 {
            color: #16213e;
            margin-top: 25px;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .error-box {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Consolas', monospace;
            font-size: 13px;
            overflow-x: auto;
        }
        .info-box {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
        }
        .warning-box {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        .test-scenario {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        .test-scenario h4 {
            margin-top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', monospace;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Wiki Module Analytics - Test Report</h1>
        <div class="meta">
            <strong>Extension:</strong> Evoq.PersonaBar.CommunityAnalytics |
            <strong>Feature:</strong> Wiki Module Analytics |
            <strong>Priority:</strong> Medium |
            <strong>Date:</strong> December 30, 2025
        </div>
        <div style="margin-top: 15px;">
            <span class="status-badge status-fail">FAIL - Blocking Bug Found</span>
        </div>
    </div>

    <div class="section">
        <h2>Executive Summary</h2>
        <div class="warning-box">
            <strong>Critical Finding:</strong> The Wiki Module Analytics feature cannot be tested due to a JavaScript error that prevents the Community Analytics dashboard from loading. This is a blocking bug affecting all Community Analytics functionality.
        </div>
        <table>
            <tr>
                <th>Attribute</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Feature Name</td>
                <td>Wiki Module Analytics</td>
            </tr>
            <tr>
                <td>UI Location</td>
                <td>PersonaBar > Dashboard > Community Analytics > Wiki Tab</td>
            </tr>
            <tr>
                <td>Overall Status</td>
                <td><span class="status-badge status-fail">BLOCKED</span></td>
            </tr>
            <tr>
                <td>Test Scenarios</td>
                <td>6 planned, 0 executed (all blocked)</td>
            </tr>
            <tr>
                <td>Dependencies</td>
                <td>Wiki Module, Analytics Warehouse</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>Blocking Issue Details</h2>
        <h3>JavaScript Error</h3>
        <div class="error-box">
            <strong>Error:</strong> TypeError: utility.serializeCustomDate is not a function<br><br>
            <strong>Location:</strong> social-dashboard-combined-instance.js:1025:39<br><br>
            <strong>Stack Trace:</strong><br>
            at dashboardClass.init (http://localhost:8081/DesktopModules/admin/Dnn.PersonaBar/Modules/Evoq.CommunityAnalytics/scripts/social-dashboard-combined-instance.js?cdv=132:1025:39)<br>
            at Object.init (http://localhost:8081/DesktopModules/admin/Dnn.PersonaBar/Modules/Evoq.CommunityAnalytics/scripts/social-dashboard-combined.js?cdv=132:16:23)<br>
            at http://localhost:8081/DesktopModules/admin/Dnn.PersonaBar/scripts/extension.js?cdv=132:104:32
        </div>

        <h3>Impact</h3>
        <ul>
            <li>The Community Analytics dashboard fails to initialize</li>
            <li>The panel area remains blank/empty when accessing Community Analytics</li>
            <li>All Community Analytics features are inaccessible including Wiki, Blogs, Discussions, Ideas, Answers, and Social Events analytics</li>
            <li>Site Analytics (under the same Dashboard menu) works correctly, confirming this is specific to Community Analytics</li>
        </ul>

        <h3>Root Cause Analysis</h3>
        <div class="info-box">
            The error occurs because the <code>utility.serializeCustomDate</code> function is being called in the <code>dashboardClass.init</code> method, but this function does not exist or is not properly loaded in the utility object. This suggests either:
            <ul>
                <li>A missing or improperly loaded dependency script</li>
                <li>A version mismatch between PersonaBar components</li>
                <li>The utility module was updated without updating the Community Analytics scripts</li>
            </ul>
        </div>

        <h3>Relevant Code Files</h3>
        <ul>
            <li><code>Services/CommunityAnalyticsController.cs</code> - API endpoints (functioning correctly)</li>
            <li><code>Components/CommunityAnalyticsController.cs</code> - Extension controller (functioning correctly)</li>
            <li><code>scripts/social-dashboard-combined-instance.js</code> - Contains the failing code</li>
            <li><code>Evoq.PersonaBar.CommunityAnalytics.dnn</code> - Package manifest</li>
        </ul>
    </div>

    <div class="section">
        <h2>Test Scenarios (All Blocked)</h2>

        <div class="test-scenario">
            <h4>
                Scenario 1: View Wiki Page Statistics
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> View statistics for wiki pages including views, edits, and engagement metrics.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>

        <div class="test-scenario">
            <h4>
                Scenario 2: Track Edit Frequency
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> Monitor how frequently wiki pages are edited over time.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>

        <div class="test-scenario">
            <h4>
                Scenario 3: Monitor Contributor Activity
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> Track which users are contributing to wiki content and their activity levels.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>

        <div class="test-scenario">
            <h4>
                Scenario 4: Test Popular Wiki Pages
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> View the most popular wiki pages based on engagement metrics.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>

        <div class="test-scenario">
            <h4>
                Scenario 5: Verify Wiki-Specific Metrics
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> Verify that wiki-specific metrics (page views, revisions, unique contributors) are displayed correctly.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>

        <div class="test-scenario">
            <h4>
                Scenario 6: Analyze Content Growth Over Time
                <span class="status-badge status-blocked">BLOCKED</span>
            </h4>
            <p><strong>Description:</strong> Review content growth trends for wiki pages over different time periods.</p>
            <p><strong>Status:</strong> Could not execute - Community Analytics dashboard does not load due to JavaScript error.</p>
        </div>
    </div>

    <div class="section">
        <h2>Test Evidence (Screenshots)</h2>

        <h3>Step 1: Login Page</h3>
        <p>Successfully accessed the DNN login page.</p>
        <img src="Wiki_Module_Analytics_step01_login_page.png" alt="Login Page" class="screenshot">

        <h3>Step 2: Logged In Homepage</h3>
        <p>Successfully logged in as host (SuperUser Account). PersonaBar visible on left side.</p>
        <img src="Wiki_Module_Analytics_step02_logged_in_homepage.png" alt="Logged In Homepage" class="screenshot">

        <h3>Step 3: Dashboard Menu - Community Analytics Option</h3>
        <p>Dashboard submenu showing Site Analytics and Community Analytics options.</p>
        <img src="Wiki_Module_Analytics_step03_community_analytics.png" alt="Dashboard Menu" class="screenshot">

        <h3>Step 4: Community Analytics Panel (Empty - Error State)</h3>
        <p>After clicking Community Analytics, the panel area remains empty/blank due to the JavaScript error.</p>
        <img src="Wiki_Module_Analytics_step05_community_analytics_panel.png" alt="Empty Community Analytics Panel" class="screenshot">

        <h3>Step 5: JavaScript Error Documentation</h3>
        <p>The Community Analytics panel fails to load content.</p>
        <img src="Wiki_Module_Analytics_step06_javascript_error.png" alt="JavaScript Error State" class="screenshot">

        <h3>Step 6: Site Analytics Works (Comparison)</h3>
        <p>Site Analytics loads successfully, proving the issue is specific to Community Analytics. Note the Google Analytics warning is expected (not the blocking issue).</p>
        <img src="Wiki_Module_Analytics_step07_site_analytics_works.png" alt="Site Analytics Working" class="screenshot">

        <h3>Step 7: Final State</h3>
        <p>Homepage after testing, showing the site is functional but Community Analytics remains broken.</p>
        <img src="Wiki_Module_Analytics_step08_final_state.png" alt="Final State" class="screenshot">
    </div>

    <div class="section">
        <h2>Recommendations</h2>
        <ol>
            <li><strong>Immediate Action Required:</strong> Fix the <code>utility.serializeCustomDate</code> function issue in the Community Analytics module.</li>
            <li><strong>Investigation:</strong> Check if there's a missing script dependency or version mismatch in the PersonaBar utility modules.</li>
            <li><strong>Verify:</strong> After fixing, ensure all Community Analytics tabs (Wiki, Blogs, Discussions, Ideas, Answers, Social Events) load correctly.</li>
            <li><strong>Retest:</strong> Once fixed, re-execute all 6 test scenarios for Wiki Module Analytics.</li>
        </ol>
    </div>

    <div class="section">
        <h2>Environment Details</h2>
        <table>
            <tr>
                <th>Attribute</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Website URL</td>
                <td>http://localhost:8081</td>
            </tr>
            <tr>
                <td>Test User</td>
                <td>host (SuperUser Account)</td>
            </tr>
            <tr>
                <td>Evoq Version</td>
                <td>Trial (27 days remaining)</td>
            </tr>
            <tr>
                <td>Browser</td>
                <td>Playwright Chromium (1920x1080)</td>
            </tr>
            <tr>
                <td>Test Date</td>
                <td>December 30, 2025</td>
            </tr>
        </table>
    </div>

    <div class="section" style="background: #1a1a2e; color: white;">
        <h2 style="color: white; border-bottom-color: #444;">Conclusion</h2>
        <p>The Wiki Module Analytics feature testing was <strong>blocked</strong> due to a critical JavaScript error in the Community Analytics module. The error (<code>TypeError: utility.serializeCustomDate is not a function</code>) prevents the dashboard from initializing, making it impossible to access any Community Analytics features including Wiki analytics.</p>
        <p>This bug should be prioritized for fixing as it affects all Community Analytics functionality across the platform.</p>
    </div>
</body>
</html>

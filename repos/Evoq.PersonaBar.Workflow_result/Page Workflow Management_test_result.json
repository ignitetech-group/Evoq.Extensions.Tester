{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Workflow",
    "extension_type": "PersonaBar Module",
    "feature_name": "Page Workflow Management",
    "feature_description": "Apply workflows to pages, managing page publishing and approval through workflow states.",
    "feature_priority": "Top",
    "test_date": "2026-02-28T12:45:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Apply workflow to new page",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Content > Pages section",
          "expected": "Pages panel should open",
          "actual": "Pages panel opened successfully showing page tree",
          "screenshot": "Page Workflow Management_step01_pages_section.png"
        },
        {
          "step_number": 2,
          "action": "Click Add Page button to create new page",
          "expected": "Add page form should appear",
          "actual": "Add page form appeared with Name, Title, and other fields",
          "screenshot": "Page Workflow Management_step04_add_page_form.png"
        },
        {
          "step_number": 3,
          "action": "Open workflow dropdown in add page form",
          "expected": "Workflow options should be displayed",
          "actual": "Workflow dropdown showed options: Direct Publish, Save Draft, Content Approval, Test Workflow",
          "screenshot": "Page Workflow Management_step05_workflow_dropdown.png"
        },
        {
          "step_number": 4,
          "action": "Select Content Approval workflow and fill page details",
          "expected": "Form should accept workflow selection",
          "actual": "Content Approval workflow selected, page named 'Workflow Test New Page'",
          "screenshot": "Page Workflow Management_step06_content_approval_selected.png"
        },
        {
          "step_number": 5,
          "action": "Click Add Page button to create page",
          "expected": "Page should be created with selected workflow",
          "actual": "Page created successfully with Content Approval workflow applied",
          "screenshot": "Page Workflow Management_step07_page_created.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Change workflow for existing page",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to existing page (Workflow Test New Page) in page list",
          "expected": "Page should be selectable",
          "actual": "Page found and selected in the page tree",
          "screenshot": "Page Workflow Management_step08_select_existing_page.png"
        },
        {
          "step_number": 2,
          "action": "Open page settings and navigate to Advanced > More tab",
          "expected": "Workflow settings should be visible",
          "actual": "Advanced > More tab opened showing workflow dropdown",
          "screenshot": "Page Workflow Management_step09_page_settings_workflow.png"
        },
        {
          "step_number": 3,
          "action": "Change workflow from Content Approval to Direct Publish",
          "expected": "Workflow dropdown should allow selection change",
          "actual": "Direct Publish workflow selected from dropdown",
          "screenshot": "Page Workflow Management_step10_change_workflow.png"
        },
        {
          "step_number": 4,
          "action": "Save page settings",
          "expected": "Workflow change should be saved",
          "actual": "Settings saved successfully, workflow changed to Direct Publish",
          "screenshot": "Page Workflow Management_step11_workflow_saved.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Apply workflow to child pages (subpage propagation)",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select a page with child pages (Groups page)",
          "expected": "Page with children should be accessible",
          "actual": "Groups page selected which has child pages",
          "screenshot": "Page Workflow Management_step12_groups_page_settings.png"
        },
        {
          "step_number": 2,
          "action": "Navigate to Advanced > More tab",
          "expected": "Workflow settings with subpage option should be visible",
          "actual": "Workflow dropdown and 'Apply setting to all subpages' toggle visible",
          "screenshot": "Page Workflow Management_step13_subpages_option.png"
        },
        {
          "step_number": 3,
          "action": "Verify Apply setting to all subpages toggle exists",
          "expected": "Toggle for applying workflow to subpages should be present",
          "actual": "Toggle labeled 'Apply setting to all subpages' is visible below workflow dropdown",
          "screenshot": "Page Workflow Management_step14_subpages_toggle_visible.png"
        },
        {
          "step_number": 4,
          "action": "Change workflow to Content Approval",
          "expected": "Workflow should be changeable",
          "actual": "Changed workflow from Direct Publish to Content Approval",
          "screenshot": "Page Workflow Management_step17_workflow_changed.png"
        },
        {
          "step_number": 5,
          "action": "Save workflow changes",
          "expected": "Workflow should be saved",
          "actual": "Workflow saved successfully for Groups page",
          "screenshot": "Page Workflow Management_step18_groups_saved.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Workflow action buttons visibility",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to page with Content Approval workflow",
          "expected": "Page should load",
          "actual": "Navigated to Workflow Test New Page",
          "screenshot": "Page Workflow Management_step19_workflow_test_page.png"
        },
        {
          "step_number": 2,
          "action": "Enter edit mode and add content",
          "expected": "Page should enter edit mode with content editor",
          "actual": "Edit mode enabled, added test content to HTML module",
          "screenshot": "Page Workflow Management_step19_edit_mode_content.png"
        },
        {
          "step_number": 3,
          "action": "Verify workflow action buttons are visible",
          "expected": "Workflow action buttons should appear (Publish, Discard, etc.)",
          "actual": "Workflow action buttons visible: Discard, Reject, Close buttons in edit bar",
          "screenshot": "Page Workflow Management_step20_workflow_buttons.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Discard workflow dialog",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Discard button in workflow toolbar",
          "expected": "Discard confirmation dialog should appear",
          "actual": "Discard dialog opened with message field and attachment option",
          "screenshot": "Page Workflow Management_step21_discard_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Verify dialog contains message input and cancel option",
          "expected": "Dialog should have message field and Cancel/Discard buttons",
          "actual": "Dialog contains: Add a Message textarea, Upload a File option, Cancel and Discard buttons",
          "screenshot": "Page Workflow Management_step21_discard_dialog.png"
        },
        {
          "step_number": 3,
          "action": "Click Cancel to close dialog without discarding",
          "expected": "Dialog should close, draft should remain",
          "actual": "Dialog closed, draft content preserved",
          "screenshot": "Page Workflow Management_step20_workflow_buttons.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Code in WorkflowHelper.cs shows PropagateWorkflowToChildren method that propagates workflow to all child pages when 'Apply setting to all subpages' is enabled",
    "WorkflowDiscardTabAction.cs reveals that discarding the only version of a page will hard delete the page entirely",
    "The 'Apply setting to all subpages' toggle is visible in the UI but automation clicking was unreliable - manual testing recommended for full propagation verification",
    "Workflow dropdown options include: Direct Publish, Save Draft, Content Approval, and custom workflows like Test Workflow",
    "Code shows IsWorkflowPropagationAvailable() checks if all child pages have completed workflows before allowing propagation",
    "Reject button is visible but requires permission review - the Content Approval workflow has multiple states requiring different role permissions"
  ],
  "summary": {
    "total_scenarios": 5,
    "passed": 5,
    "failed": 0,
    "pass_rate": "100%"
  }
}

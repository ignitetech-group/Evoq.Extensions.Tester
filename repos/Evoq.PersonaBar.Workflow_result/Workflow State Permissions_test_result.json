{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Workflow",
    "extension_type": "PersonaBar Module",
    "feature_name": "Workflow State Permissions",
    "feature_description": "Configure role-based and user-specific permissions for workflow state transitions and reviews.",
    "feature_priority": "High",
    "test_date": "2026-02-09T16:56:00.000Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Verify Content Editor and Content Manager roles appear by default",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Workflow and expand Content Approval workflow",
          "expected": "Workflow states are visible with edit option",
          "actual": "Workflow states displayed with Draft, Ready For Review (editable), and Published states",
          "screenshot": "Workflow State Permissions_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Click Edit button on Ready For Review state to open permissions dialog",
          "expected": "Permissions dialog opens showing default roles including Content Editors and Content Managers",
          "actual": "Permissions dialog displayed with Administrators (locked), All Users, Content Editors, Registered Users, and Content Managers roles. Content Managers has Review checkbox checked by default.",
          "screenshot": "Workflow State Permissions_step01_state_permissions_dialog.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Assign review permission to Content Manager role",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Observe the Content Managers row in the permissions grid",
          "expected": "Content Managers role should have Review permission checkbox",
          "actual": "Content Managers role displayed with Review checkbox checked, indicating review permission is already assigned by default",
          "screenshot": "Workflow State Permissions_step01_state_permissions_dialog.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Assign review permission to another role",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select Community Manager from Select Role dropdown and click Add",
          "expected": "Community Manager role should be added to the permissions grid with Review checkbox checked",
          "actual": "Community Manager role was successfully added to the Roles table with Review checkbox automatically checked and a Delete icon in Actions column",
          "screenshot": "Workflow State Permissions_step02_role_added.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify user-specific permissions exist",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Observe the Users table in the permissions dialog",
          "expected": "Users table should show existing user permissions with Review checkbox and Delete option",
          "actual": "Users table displayed showing SuperUser Account with Review checkbox checked and Delete icon. Add User section with search input is also present.",
          "screenshot": "Workflow State Permissions_step03_user_search_no_results.png"
        },
        {
          "step_number": 2,
          "action": "Search for a user using Add User input field",
          "expected": "User search functionality should work and show results or 'No results' message",
          "actual": "User search with 'admin' showed 'No results' message, confirming the search functionality is working correctly",
          "screenshot": "Workflow State Permissions_step03_user_search_no_results.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Remove permission from role",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Delete button for Community Manager role",
          "expected": "Community Manager role should be removed from the permissions grid",
          "actual": "Community Manager role was successfully removed from the Roles table. The role reappeared in the Select Role dropdown, confirming it can be added again.",
          "screenshot": "Workflow State Permissions_step04_role_removed.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Remove permission from user",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Delete button for SuperUser Account user",
          "expected": "SuperUser Account should be removed from the Users permissions table",
          "actual": "SuperUser Account was successfully removed from the Users table. The Users table is now hidden since no users remain.",
          "screenshot": "Workflow State Permissions_step05_user_removed.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test permission inheritance for new states",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Test Workflow and click Add a State button",
          "expected": "New state dialog should open with default permissions showing Content Editors and Content Managers roles",
          "actual": "New state dialog opened for Test Workflow. Permissions grid shows Content Editors and Content Managers roles by default. Content Managers has Review checkbox automatically checked, confirming permission inheritance for new states works correctly.",
          "screenshot": "Workflow State Permissions_step06_new_state_permissions.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test state name validation",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Accept button without entering a state name",
          "expected": "Validation error should appear indicating state name is required",
          "actual": "Validation error tooltip displayed: 'This field is required.' The form did not submit, preventing creation of state without a name.",
          "screenshot": "Workflow State Permissions_step07_validation_error.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The Administrators role is locked (cannot be modified) which prevents accidental removal of admin permissions",
    "When a role is added, the Review permission is automatically checked by default (code sets allowAccess=true in _addRoleToGrid function)",
    "The permission grid correctly handles role group filtering through the 'Filter By Group' dropdown",
    "For new workflow states, Content Managers role has Review permission pre-checked by default as per code implementation (SetContentManagerRoleAsCheckedByDefault method)",
    "User search uses a token input mechanism that searches users by name with autocomplete functionality"
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 8,
    "failed": 0,
    "pass_rate": "100%"
  }
}

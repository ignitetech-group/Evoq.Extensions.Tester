{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Workflow",
    "extension_type": "PersonaBar Module",
    "feature_name": "Workflow State Management",
    "feature_description": "Manage workflow states including creating, editing, reordering, and deleting states within workflows.",
    "feature_priority": "Top",
    "test_date": "2026-02-28T10:33:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Create new workflow state",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Workflow and expand Test Workflow",
          "expected": "Test Workflow states are visible with Add a State button enabled",
          "actual": "Test Workflow expanded showing Draft, Approval Review, Manager Review, Published states with Add a State button visible",
          "screenshot": "Workflow State Management_step02_test_workflow_states.png"
        },
        {
          "step_number": 2,
          "action": "Click Add a State button",
          "expected": "Add State dialog opens",
          "actual": "Workflow State New dialog opened with State Name field, Reviewers section, and notification options",
          "screenshot": "Workflow State Management_step03_add_state_dialog.png"
        },
        {
          "step_number": 3,
          "action": "Enter 'Legal Review' as state name and click Accept",
          "expected": "New state is created and appears in the workflow states list",
          "actual": "Legal Review state was created successfully and appears at position 4 (before Published)",
          "screenshot": "Workflow State Management_step05_state_created.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Edit state name and notification settings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Edit icon on Legal Review state",
          "expected": "Edit state dialog opens with current state details",
          "actual": "Edit Workflow State dialog opened showing Legal Review name and notification settings",
          "screenshot": "Workflow State Management_step06_edit_state_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Change name to 'Legal & Compliance Review' and enable admin notifications",
          "expected": "Fields are updated",
          "actual": "State name changed and Notify Administrators checkbox enabled",
          "screenshot": "Workflow State Management_step07_edit_state_modified.png"
        },
        {
          "step_number": 3,
          "action": "Click Accept to save changes",
          "expected": "State is updated in the list",
          "actual": "State name updated to 'Legal & Compliance Review' in the workflow states list",
          "screenshot": "Workflow State Management_step08_state_edited.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Move state up in order",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Note current position of Legal & Compliance Review (position 4)",
          "expected": "State is at position 4",
          "actual": "Legal & Compliance Review is at position 4, Manager Review at position 3",
          "screenshot": "Workflow State Management_step09_before_move.png"
        },
        {
          "step_number": 2,
          "action": "Click Move Up arrow on Legal & Compliance Review",
          "expected": "State moves up one position",
          "actual": "Legal & Compliance Review moved to position 3, Manager Review moved to position 4",
          "screenshot": "Workflow State Management_step10_after_move_up.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Move state down in order",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Move Down arrow on Legal & Compliance Review (now at position 3)",
          "expected": "State moves down one position",
          "actual": "Legal & Compliance Review moved back to position 4, Manager Review returned to position 3",
          "screenshot": "Workflow State Management_step11_after_move_down.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Delete unused workflow state",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Delete icon on Legal & Compliance Review state",
          "expected": "Delete confirmation dialog appears",
          "actual": "Confirmation dialog appeared asking 'Are you sure you want to delete Legal & Compliance Review?'",
          "screenshot": "Workflow State Management_step12_delete_confirmation.png"
        },
        {
          "step_number": 2,
          "action": "Confirm deletion",
          "expected": "State is removed from the list",
          "actual": "State was deleted successfully. Test Workflow now shows 4 states: Draft, Approval Review, Manager Review, Published",
          "screenshot": "Workflow State Management_step13_state_deleted.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Attempt to delete state in use - verify protection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Content Approval workflow which is in use",
          "expected": "Workflow states should show restricted actions for states in use",
          "actual": "Content Approval workflow expanded showing Ready For Review state has Edit icon but NO Delete icon (protected because in use)",
          "screenshot": "Workflow State Management_step14_state_in_use_no_delete.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify state order changes persist",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Refresh page and navigate back to Settings > Workflow",
          "expected": "State changes should persist after page reload",
          "actual": "After page reload, Test Workflow still shows 4 states in correct order: Draft, Approval Review, Manager Review, Published (deletion persisted)",
          "screenshot": "Workflow State Management_step16_test_workflow_states_persisted.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Configure state notification to administrators",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Edit Legal Review state and enable 'Notify Administrators of state changes' checkbox",
          "expected": "Checkbox is checked",
          "actual": "Notify Administrators checkbox was enabled and saved successfully",
          "screenshot": "Workflow State Management_step07_edit_state_modified.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Configure state notification settings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "In Add State dialog, observe notification options",
          "expected": "Both notification checkboxes should be available",
          "actual": "Add State dialog shows 'Notify Author and Reviewers of state changes' (checked by default) and 'Notify Administrators of state changes' (unchecked by default)",
          "screenshot": "Workflow State Management_step03_add_state_dialog.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate empty state name",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open Add State dialog and click Accept without entering a name",
          "expected": "Validation error should appear",
          "actual": "Validation error displayed: 'This field is required.'",
          "screenshot": "Workflow State Management_step18_empty_name_validation.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validate maximum length for state name",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter a state name longer than 40 characters",
          "expected": "Validation error for max length should appear",
          "actual": "Validation error displayed: 'Please enter no more than 40 characters.'",
          "screenshot": "Workflow State Management_step20_max_length_validation.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "System state restrictions - Draft and Published cannot be deleted or moved",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Observe Draft state (position 1) in Test Workflow",
          "expected": "Draft state should have no Edit, Delete, or Move actions",
          "actual": "Draft state row shows empty ACTIONS and MOVE columns - no edit/delete/move controls available",
          "screenshot": "Workflow State Management_step23_system_states_no_actions.png"
        },
        {
          "step_number": 2,
          "action": "Observe Published state (last position) in Test Workflow",
          "expected": "Published state should have no Edit, Delete, or Move actions",
          "actual": "Published state row shows empty ACTIONS and MOVE columns - no edit/delete/move controls available",
          "screenshot": "Workflow State Management_step23_system_states_no_actions.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Special characters are supported in workflow and state names (as evidenced by existing workflow 'Test & <> \"Special\" Chars!')",
    "State name has a maximum length of 40 characters with client-side validation",
    "System states (Draft and Published) are protected - they cannot be edited, deleted, or moved",
    "States in use cannot be deleted - the Delete icon is hidden for such states",
    "The first state (Draft) and last state (Published) of every workflow are system states and fixed in position",
    "New states are automatically inserted before the Published state",
    "Move Up and Move Down operations swap positions between adjacent non-system states",
    "Notification settings include two options: notify reviewers and notify administrators",
    "Content Managers role is pre-selected with Review permission by default when creating new states",
    "When attempting to add a state from a stale dialog context, error 'Workflow does not exist' is shown - this is expected when the workflow data is out of sync"
  ],
  "summary": {
    "total_scenarios": 12,
    "passed": 12,
    "failed": 0,
    "pass_rate": "100%"
  }
}

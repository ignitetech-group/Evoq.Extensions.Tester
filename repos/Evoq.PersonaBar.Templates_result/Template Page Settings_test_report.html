<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Template Page Settings</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        h3 {
            color: #666;
        }
        .feature-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .test-case {
            border: 1px solid #ddd;
            margin: 15px 0;
            border-radius: 5px;
            overflow: hidden;
        }
        .test-header {
            padding: 10px 15px;
            font-weight: bold;
        }
        .test-pass .test-header {
            background: #d4edda;
            color: #155724;
        }
        .test-fail .test-header {
            background: #f8d7da;
            color: #721c24;
        }
        .test-body {
            padding: 15px;
        }
        .status {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 3px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-pass {
            background: #28a745;
            color: white;
        }
        .status-fail {
            background: #dc3545;
            color: white;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            margin: 10px 0;
            border-radius: 4px;
        }
        .steps {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .observations h2 {
            margin-top: 0;
            color: #856404;
        }
        .summary {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .summary-item {
            padding: 15px 25px;
            border-radius: 5px;
            font-weight: bold;
        }
        .summary-pass {
            background: #d4edda;
            color: #155724;
        }
        .summary-fail {
            background: #f8d7da;
            color: #721c24;
        }
        .issue {
            color: #dc3545;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Report: Template Page Settings</h1>

        <div class="feature-info">
            <p><strong>Extension:</strong> Evoq.PersonaBar.Templates (PersonaBar Module)</p>
            <p><strong>Feature:</strong> Template Page Settings</p>
            <p><strong>Description:</strong> Configure template-specific settings like name, description, keywords, and URL</p>
            <p><strong>UI Location:</strong> Admin > Manage > Templates > Settings (accessed via Content > Pages > Save Page Template)</p>
            <p><strong>Priority:</strong> Medium</p>
            <p><strong>Test Date:</strong> January 6, 2026</p>
        </div>

        <h2>Test Summary</h2>
        <div class="summary">
            <div class="summary-item summary-pass">PASSED: 4</div>
            <div class="summary-item summary-fail">FAILED: 2</div>
        </div>

        <!-- Test 1: Edit Template Name -->
        <div class="test-case test-pass">
            <div class="test-header">
                Test 1: Edit Template Name <span class="status status-pass">PASS</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that users can edit the template name field</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>Navigate to Content > Pages</li>
                        <li>Select a page (Home)</li>
                        <li>Click "Save Page Template" dropdown</li>
                        <li>Select "Evoq Page Template"</li>
                        <li>Enter template name "Test Home Template"</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> Template name can be entered and Save button becomes enabled</p>
                <p><strong>Actual Result:</strong> Template name "Test Home Template" was successfully entered. Save button became enabled after entering the name.</p>
                <img src="Template_Page_Settings_step05_edit_name.png" alt="Edit Template Name" class="screenshot">
            </div>
        </div>

        <!-- Test 2: Edit Template Description -->
        <div class="test-case test-pass">
            <div class="test-header">
                Test 2: Edit Template Description <span class="status status-pass">PASS</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that users can edit the template description field</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>In the template creation dialog, locate the Description field</li>
                        <li>Enter description text: "This is a test template for the home page with custom settings and SEO optimization"</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> Description can be entered successfully</p>
                <p><strong>Actual Result:</strong> Description text was successfully entered in the Description field.</p>
                <img src="Template_Page_Settings_step06_edit_description.png" alt="Edit Template Description" class="screenshot">
            </div>
        </div>

        <!-- Test 3: Set Template Keywords for SEO -->
        <div class="test-case test-fail">
            <div class="test-header">
                Test 3: Set Template Keywords for SEO <span class="status status-fail">FAIL</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that users can set template keywords for SEO</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>Open the Save Page Template dialog</li>
                        <li>Look for Keywords field</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> Keywords field should be available for SEO configuration</p>
                <p><strong>Actual Result:</strong> <span class="issue">Keywords field is NOT present in the template creation dialog. The dialog only contains Template Name and Description fields.</span></p>
                <img src="Template_Page_Settings_step04_template_dialog.png" alt="Template Dialog - No Keywords Field" class="screenshot">
                <p><strong>Note:</strong> Keywords field exists in Page Settings (Details tab) but not in the template creation dialog.</p>
            </div>
        </div>

        <!-- Test 4: Validate Duplicate Template Names -->
        <div class="test-case test-fail">
            <div class="test-header">
                Test 4: Validate Duplicate Template Names <span class="status status-fail">FAIL</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that the system validates duplicate template names</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>Create a template with a specific name</li>
                        <li>Attempt to create another template with the same name</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> System should prevent duplicate template names</p>
                <p><strong>Actual Result:</strong> <span class="issue">Could not test duplicate name validation because template saving failed with a 400 Bad Request error. The backend API returned an error when attempting to save template settings.</span></p>
                <img src="Template_Page_Settings_step07_save_attempt.png" alt="Save Attempt Failed" class="screenshot">
            </div>
        </div>

        <!-- Test 5: Save Template Settings -->
        <div class="test-case test-fail">
            <div class="test-header">
                Test 5: Save Template Settings <span class="status status-fail">FAIL</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that template settings can be saved successfully</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>Fill in template name: "Test Home Template"</li>
                        <li>Fill in description</li>
                        <li>Click Save button</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> Template should be saved and appear in Templates list</p>
                <p><strong>Actual Result:</strong> <span class="issue">Save failed with HTTP 400 Bad Request error. Console showed errors for SavePageDetails API call. Multiple 500 Internal Server Errors were also observed for GetPageTemplates, GetWorkflows, and GetPermissionsData endpoints.</span></p>
                <img src="Template_Page_Settings_step07_save_attempt.png" alt="Save Failed" class="screenshot">
            </div>
        </div>

        <!-- Test 6: Handle Validation Errors -->
        <div class="test-case test-pass">
            <div class="test-header">
                Test 6: Handle Validation Errors <span class="status status-pass">PASS</span>
            </div>
            <div class="test-body">
                <p><strong>Objective:</strong> Verify that the system handles validation errors appropriately</p>
                <div class="steps">
                    <strong>Steps:</strong>
                    <ol>
                        <li>Open template creation dialog</li>
                        <li>Leave the Template Name field empty</li>
                        <li>Observe the Save button state</li>
                    </ol>
                </div>
                <p><strong>Expected Result:</strong> Save button should be disabled when required fields are empty</p>
                <p><strong>Actual Result:</strong> Save button is correctly disabled when the Template Name field is empty. This prevents users from submitting incomplete forms.</p>
                <img src="Template_Page_Settings_step08_validation_empty_name.png" alt="Validation - Empty Name" class="screenshot">
            </div>
        </div>

        <!-- Navigation Screenshots -->
        <h2>Additional Evidence</h2>

        <h3>Login Confirmation</h3>
        <img src="Template_Page_Settings_step00_login_confirmed.png" alt="Login Confirmed" class="screenshot">

        <h3>Templates Page</h3>
        <img src="Template_Page_Settings_step01_templates_page.png" alt="Templates Page" class="screenshot">

        <h3>Template Creation Message</h3>
        <img src="Template_Page_Settings_step02_add_template_message.png" alt="Add Template Message" class="screenshot">

        <h3>Pages Panel</h3>
        <img src="Template_Page_Settings_step03_pages_panel.png" alt="Pages Panel" class="screenshot">

        <!-- Observations Section -->
        <div class="observations">
            <h2>Observations</h2>
            <ul>
                <li><strong>Keywords Field Missing:</strong> The suggested test scenario mentions "Set template keywords for SEO" but the template creation dialog only contains Template Name and Description fields. Keywords field exists in Page Settings but not in the template creation workflow.</li>
                <li><strong>Backend API Issues:</strong> Multiple 500 Internal Server Errors were observed for:
                    <ul>
                        <li>GetPageTemplates API</li>
                        <li>GetWorkflows API</li>
                        <li>GetPermissionsData API</li>
                    </ul>
                    These may indicate configuration or database issues in the test environment.
                </li>
                <li><strong>Save Functionality:</strong> The SavePageDetails API returned 400 Bad Request when attempting to save a template, preventing full testing of save functionality.</li>
                <li><strong>Template Creation Workflow:</strong> Templates are created by selecting an existing page and clicking "Save Page Template" from the Pages panel, not from the Templates management page directly.</li>
                <li><strong>Client-Side Validation:</strong> The Template Name field has client-side validation that disables the Save button when empty. According to code review, there is also script injection validation (hasScript) implemented.</li>
            </ul>
        </div>
    </div>
</body>
</html>

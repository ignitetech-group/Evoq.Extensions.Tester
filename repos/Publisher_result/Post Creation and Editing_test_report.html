<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publisher - Post Creation and Editing Test Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        h3 {
            color: #7f8c8d;
        }
        .feature-info {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pass {
            color: #27ae60;
            font-weight: bold;
            background: #d4edda;
            padding: 5px 15px;
            border-radius: 4px;
            display: inline-block;
        }
        .fail {
            color: #c0392b;
            font-weight: bold;
            background: #f8d7da;
            padding: 5px 15px;
            border-radius: 4px;
            display: inline-block;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .steps {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .observations {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #ffc107;
        }
        .summary {
            background: #d4edda;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        .summary-fail {
            background: #f8d7da;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>Publisher - Post Creation and Editing Test Report</h1>

    <div class="feature-info">
        <h2>Feature Information</h2>
        <table>
            <tr><th>Extension</th><td>Publisher (Module)</td></tr>
            <tr><th>Feature Name</th><td>Post Creation and Editing</td></tr>
            <tr><th>Description</th><td>Create, edit, and manage blog posts with rich content, metadata, and media attachments</td></tr>
            <tr><th>Feature Priority</th><td>Top</td></tr>
            <tr><th>UI Location</th><td>Content > Publisher > New Post or Edit Post</td></tr>
            <tr><th>Test Date</th><td>January 6, 2026</td></tr>
            <tr><th>Tester</th><td>Automated Test (Claude Code)</td></tr>
        </table>
    </div>

    <div class="summary">
        <h2>Test Summary</h2>
        <table>
            <tr><th>Total Tests</th><th>Passed</th><th>Failed</th><th>Pass Rate</th></tr>
            <tr><td>9</td><td>9</td><td>0</td><td>100%</td></tr>
        </table>
    </div>

    <!-- Test Case 1 -->
    <div class="test-case">
        <h2>Test 1: Create New Post with Title and Body</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that a new blog post can be created with title and body content.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Navigated to News page with Publisher module</li>
                <li>Clicked "Create Post" button</li>
                <li>Entered title: "Test Post Creation - Automated Testing 2026"</li>
                <li>Entered body content describing the test</li>
                <li>Clicked Save button</li>
                <li>Verified post was saved successfully</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Create post form with content entered:</p>
        <img src="Post_Creation_and_Editing_step03_post_with_content.png" alt="Post with content" class="screenshot">

        <p>Post displayed after creation:</p>
        <img src="Post_Creation_and_Editing_step09_post_view_detail.png" alt="Post view" class="screenshot">
    </div>

    <!-- Test Case 2 -->
    <div class="test-case">
        <h2>Test 2: Slug Auto-Generation from Title</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that the URL slug is automatically generated from the post title.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Created a new post with title "Test Post Creation - Automated Testing 2026"</li>
                <li>Observed the URL/Slug field in Edit Post Details panel</li>
                <li>Verified slug was auto-generated as "Test-Post-Creation-Automated-Testing-2026"</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>The Edit Post Details panel shows the auto-generated slug matching the title with hyphens replacing spaces:</p>
        <img src="Post_Creation_and_Editing_step07_edit_loaded.png" alt="Slug auto-generated" class="screenshot">

        <p><strong>Result:</strong> The URL field automatically populated with "Test-Post-Creation-Automated-Testing-2026" based on the title.</p>
    </div>

    <!-- Test Case 3 -->
    <div class="test-case">
        <h2>Test 3: Edit Existing Post Content</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that existing post content can be modified and saved.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Navigated to existing post "Test Post Creation - Automated Testing 2026"</li>
                <li>Clicked "Edit Post" button</li>
                <li>Modified title to "Test Post Creation - EDITED VERSION"</li>
                <li>Clicked Save button</li>
                <li>Verified "Post Saved Successfully" message appeared</li>
                <li>Confirmed edited title displayed on post view page</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Edit form with modified title:</p>
        <img src="Post_Creation_and_Editing_step11_title_edited.png" alt="Title edited" class="screenshot">

        <p>Post view showing edited title:</p>
        <img src="Post_Creation_and_Editing_step13_edit_verified.png" alt="Edit verified" class="screenshot">
    </div>

    <!-- Test Case 4 -->
    <div class="test-case">
        <h2>Test 4: Add Main Image to Post</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that a main/featured image can be added to a post.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Opened post in edit mode</li>
                <li>Clicked on "Stored Location" tab in image upload area</li>
                <li>Selected "test_image" from available assets</li>
                <li>Clicked "Insert Image" to add the image</li>
                <li>Clicked Save to persist the change</li>
                <li>Verified image appears in post view</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Image picker showing available assets:</p>
        <img src="Post_Creation_and_Editing_step14_image_picker.png" alt="Image picker" class="screenshot">

        <p>Image inserted in edit form:</p>
        <img src="Post_Creation_and_Editing_step15_image_inserted.png" alt="Image inserted" class="screenshot">

        <p>Post view with main image displayed:</p>
        <img src="Post_Creation_and_Editing_step16_post_with_image.png" alt="Post with image" class="screenshot">
    </div>

    <!-- Test Case 5 -->
    <div class="test-case">
        <h2>Test 5: Validate Required Fields - Title</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that the title field is required and validation error appears when empty.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Navigated to Create Post page</li>
                <li>Left title field empty</li>
                <li>Clicked Publish button</li>
                <li>Observed validation error message</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Empty form before validation attempt:</p>
        <img src="Post_Creation_and_Editing_step20_empty_form.png" alt="Empty form" class="screenshot">

        <p><strong>Result:</strong> System displayed validation message: "A title is required"</p>
        <img src="Post_Creation_and_Editing_step21_title_required_error.png" alt="Title required error" class="screenshot">
    </div>

    <!-- Test Case 6 -->
    <div class="test-case">
        <h2>Test 6: Validate Required Fields - Body</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that the body field is required and validation error appears when empty.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Entered title "Test Title Only - No Body Content"</li>
                <li>Left body content empty</li>
                <li>Clicked Publish button</li>
                <li>Observed validation error message</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Form with title but no body:</p>
        <img src="Post_Creation_and_Editing_step22_body_required_error.png" alt="Body required error" class="screenshot">

        <p><strong>Result:</strong> System displayed validation message: "The text of the story is required"</p>
    </div>

    <!-- Test Case 7 -->
    <div class="test-case">
        <h2>Test 7: Metadata Fields Auto-Population</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that metadata fields (Title, Description) are properly managed.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Opened existing post in edit mode</li>
                <li>Observed the Edit Post Details panel</li>
                <li>Verified Title field contains post title</li>
                <li>Verified Description field auto-populated from body content</li>
                <li>Confirmed URL field contains auto-generated slug</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Edit Post Details panel showing metadata fields:</p>
        <img src="Post_Creation_and_Editing_step10_edit_form_loaded.png" alt="Edit form with metadata" class="screenshot">

        <p><strong>Result:</strong> The Description field was automatically populated with the first portion of the body content. Required fields are marked with asterisks (Title *, URL *).</p>
    </div>

    <!-- Test Case 8 -->
    <div class="test-case">
        <h2>Test 8: Cancel/Discard Editing Without Saving</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that changes can be discarded without saving.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Opened post in edit mode</li>
                <li>Modified title to "DISCARD TEST - This Should Not Be Saved"</li>
                <li>Clicked Discard button</li>
                <li>Entered discard message when prompted</li>
                <li>Confirmed discard action</li>
                <li>Verified "Post Discarded Successfully" message</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>Form with unsaved changes:</p>
        <img src="Post_Creation_and_Editing_step17_before_discard.png" alt="Before discard" class="screenshot">

        <p>Discard confirmation dialog:</p>
        <img src="Post_Creation_and_Editing_step18_discard_dialog.png" alt="Discard dialog" class="screenshot">

        <p><strong>Result:</strong> The discard functionality successfully removed the draft post. A "Post Discarded Successfully" confirmation was displayed.</p>
    </div>

    <!-- Test Case 9 -->
    <div class="test-case">
        <h2>Test 9: Required Fields UI Indicators</h2>
        <p><strong>Status:</strong> <span class="pass">PASS</span></p>
        <p><strong>Description:</strong> Verify that required fields are properly marked in the UI.</p>

        <div class="steps">
            <h3>Steps Taken:</h3>
            <ol>
                <li>Opened post creation/edit form</li>
                <li>Observed the Edit Post Details panel</li>
                <li>Verified required fields are marked with asterisks (*)</li>
            </ol>
        </div>

        <h3>Evidence:</h3>
        <p>The Edit Post Details panel clearly shows:</p>
        <ul>
            <li><strong>Title *</strong> - marked as required</li>
            <li><strong>URL *</strong> - marked as required</li>
            <li>Description - not marked (optional)</li>
            <li>Tags - not marked (optional)</li>
            <li>Featured checkbox - optional</li>
        </ul>
        <img src="Post_Creation_and_Editing_step10_edit_form_loaded.png" alt="Required fields marked" class="screenshot">
    </div>

    <!-- Observations Section -->
    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>Workflow Integration:</strong> Posts go through a workflow (Content Approval) before publishing. The "Direct Publish" workflow allows immediate publishing.</li>
            <li><strong>Discard Behavior:</strong> Discarding a draft post removes it entirely from the unpublished posts list. A discard message/reason is required.</li>
            <li><strong>Auto-Save:</strong> Based on code review, auto-save draft functionality exists in the system settings, though the specific auto-save interval testing was not performed in this session.</li>
            <li><strong>HTML Sanitization:</strong> The code review showed that PostManager.cs uses PortalSecurity.InputFilter with NoScripting and NoMarkup options for title sanitization, protecting against XSS attacks.</li>
            <li><strong>Multi-language Support:</strong> The Publisher module supports multiple languages (English, Spanish, French, German, Arabic) as evidenced by language flags in the UI.</li>
            <li><strong>Author Management:</strong> The system supports changing post authors through the "Post Author" panel in the edit interface.</li>
            <li><strong>Social Sharing:</strong> Posts can be shared to Twitter, Facebook, LinkedIn, and Pinterest based on the sharing options visible in the UI.</li>
        </ul>
    </div>

    <div class="feature-info">
        <h2>Test Environment</h2>
        <table>
            <tr><th>Website URL</th><td>http://localhost:8081</td></tr>
            <tr><th>User Account</th><td>SuperUser (host)</td></tr>
            <tr><th>Browser</th><td>Playwright-controlled browser (1280x720)</td></tr>
            <tr><th>Module Version</th><td>Evoq Engage (Trial - 20 days remaining)</td></tr>
        </table>
    </div>

    <footer style="text-align: center; margin-top: 40px; padding: 20px; color: #7f8c8d;">
        <p>Generated by Claude Code Automated Testing</p>
        <p>Report Date: January 6, 2026</p>
    </footer>
</body>
</html>

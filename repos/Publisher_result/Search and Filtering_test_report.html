<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publisher - Search and Filtering Test Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0 0 10px 0;
        }
        .header p {
            margin: 5px 0;
            opacity: 0.9;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .summary-card.pass {
            border-left: 5px solid #28a745;
        }
        .summary-card.fail {
            border-left: 5px solid #dc3545;
        }
        .summary-card.skip {
            border-left: 5px solid #ffc107;
        }
        .summary-card h3 {
            margin: 0;
            font-size: 2em;
        }
        .test-scenario {
            background: white;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .scenario-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .scenario-header h3 {
            margin: 0;
        }
        .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        .status.pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status.fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        .status.skip {
            background-color: #fff3cd;
            color: #856404;
        }
        .scenario-content {
            padding: 20px;
            border-top: 1px solid #eee;
        }
        .steps {
            margin-bottom: 15px;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 5px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .screenshot figcaption {
            margin-top: 10px;
            color: #666;
            font-style: italic;
        }
        .observations {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        .observations h4 {
            margin-top: 0;
            color: #0056b3;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Publisher - Search and Filtering Test Report</h1>
        <p><strong>Extension:</strong> Publisher (Module) | <strong>Priority:</strong> High</p>
        <p><strong>Feature:</strong> Search and Filtering</p>
        <p><strong>Description:</strong> Search posts by keywords, tags, and authors with advanced filtering options</p>
        <p><strong>Test Date:</strong> December 30, 2025</p>
        <p><strong>UI Location:</strong> Content > Publisher > News Page</p>
    </div>

    <div class="summary">
        <div class="summary-card pass">
            <h3>5</h3>
            <p>Tests Passed</p>
        </div>
        <div class="summary-card skip">
            <h3>5</h3>
            <p>Tests Skipped</p>
        </div>
        <div class="summary-card fail">
            <h3>0</h3>
            <p>Tests Failed</p>
        </div>
    </div>

    <h2>Test Scenarios</h2>

    <!-- Test 1: Search by Keyword -->
    <div class="test-scenario">
        <div class="scenario-header">
            <h3>1. Search Posts by Keyword</h3>
            <span class="status pass">PASS</span>
        </div>
        <div class="scenario-content">
            <div class="steps">
                <h4>Steps Taken:</h4>
                <ol>
                    <li>Navigated to the Publisher News page (http://localhost:8081/News)</li>
                    <li>Located the Publisher search box in the right sidebar</li>
                    <li>Entered search term "Workflow" in the search box</li>
                    <li>Pressed Enter to execute the search</li>
                    <li>Verified URL changed to include ?text=Workflow parameter</li>
                    <li>Verified search results displayed with matching post</li>
                </ol>
            </div>
            <figure class="screenshot">
                <img src="Search and Filtering_step04_search_keyword.png" alt="Search by keyword results">
                <figcaption>Search results for "Workflow" keyword showing matching post</figcaption>
            </figure>
            <div class="observations">
                <h4>Observations:</h4>
                <ul>
                    <li>Search successfully filters posts containing the keyword</li>
                    <li>URL properly updated with search parameter (?text=Workflow)</li>
                    <li>Breadcrumb shows "NEWS > Search Results" indicating filtered view</li>
                    <li>Search has 500ms throttle as per code implementation</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Test 2: Empty Search Results -->
    <div class="test-scenario">
        <div class="scenario-header">
            <h3>2. Empty Search Results</h3>
            <span class="status pass">PASS</span>
        </div>
        <div class="scenario-content">
            <div class="steps">
                <h4>Steps Taken:</h4>
                <ol>
                    <li>Entered a non-existent search term "xyznonexistent123"</li>
                    <li>Pressed Enter to execute the search</li>
                    <li>Verified empty results message is displayed</li>
                </ol>
            </div>
            <figure class="screenshot">
                <img src="Search and Filtering_step05_empty_results.png" alt="Empty search results">
                <figcaption>Empty search results with user-friendly message</figcaption>
            </figure>
            <div class="observations">
                <h4>Observations:</h4>
                <ul>
                    <li>Displays "Your search returned no results" message</li>
                    <li>Shows a document icon for visual feedback</li>
                    <li>Search box retains the search term for user reference</li>
                    <li>Graceful handling of no-match scenarios</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Test 3: Search with Special Characters -->
    <div class="test-scenario">
        <div class="scenario-header">
            <h3>3. Search with Special Characters (XSS Test)</h3>
            <span class="status pass">PASS</span>
        </div>
        <div class="scenario-content">
            <div class="steps">
                <h4>Steps Taken:</h4>
                <ol>
                    <li>Entered potential XSS payload: &lt;script&gt;alert('test')&lt;/script&gt;</li>
                    <li>Pressed Enter to execute the search</li>
                    <li>Verified no JavaScript executed (XSS prevented)</li>
                    <li>Verified special characters are properly URL-encoded</li>
                </ol>
            </div>
            <figure class="screenshot">
                <img src="Search and Filtering_step06_special_chars.png" alt="Special characters search">
                <figcaption>Search with special characters - safely handled without XSS</figcaption>
            </figure>
            <div class="observations">
                <h4>Observations:</h4>
                <ul>
                    <li>Special characters are properly URL-encoded in the query string</li>
                    <li>No JavaScript execution occurred - XSS protection working</li>
                    <li>Search box displays the script tag as plain text (escaped)</li>
                    <li>Page does not crash or show errors with special input</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Test 4: Filter by Author -->
    <div class="test-scenario">
        <div class="scenario-header">
            <h3>4. Filter Posts by Author</h3>
            <span class="status pass">PASS</span>
        </div>
        <div class="scenario-content">
            <div class="steps">
                <h4>Steps Taken:</h4>
                <ol>
                    <li>Located the "Authors:" filter section in the right sidebar</li>
                    <li>Clicked on "SuperUser Account" author</li>
                    <li>Verified URL changed to include ?author=1 parameter</li>
                    <li>Verified "Viewing:" section shows active filter token</li>
                    <li>Verified results filtered to show only posts by that author</li>
                </ol>
            </div>
            <figure class="screenshot">
                <img src="Search and Filtering_step07_author_filter.png" alt="Author filter applied">
                <figcaption>Posts filtered by "SuperUser Account" author</figcaption>
            </figure>
            <div class="observations">
                <h4>Observations:</h4>
                <ul>
                    <li>Author filter successfully applied via URL parameter</li>
                    <li>"Viewing:" section displays active filter as removable token</li>
                    <li>Token shows author name with X button for removal</li>
                    <li>Results correctly filtered to show only posts by selected author</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Test 5: Clear Filters -->
    <div class="test-scenario">
        <div class="scenario-header">
            <h3>5. Clear All Filters</h3>
            <span class="status pass">PASS</span>
        </div>
        <div class="scenario-content">
            <div class="steps">
                <h4>Steps Taken:</h4>
                <ol>
                    <li>With author filter active, clicked on "News" link in breadcrumb</li>
                    <li>Verified URL changed back to clean /News path</li>
                    <li>Verified "Viewing:" section is no longer displayed</li>
                    <li>Verified page returns to default "Featured" view</li>
                </ol>
            </div>
            <figure class="screenshot">
                <img src="Search and Filtering_step08_filters_cleared.png" alt="Filters cleared">
                <figcaption>Page returned to default view after clearing filters</figcaption>
            </figure>
            <div class="observations">
                <h4>Observations:</h4>
                <ul>
                    <li>Clicking "News" breadcrumb link successfully clears all filters</li>
                    <li>URL returns to clean /News without query parameters</li>
                    <li>Page shows "Featured" section instead of "Search Results"</li>
                    <li>All filter tokens removed from "Viewing:" section</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Skipped Tests -->
    <h2>Skipped Test Scenarios</h2>
    <p>The following tests were not executed due to limited test data or UI elements not being available:</p>

    <div class="test-scenario">
        <div class="scenario-header">
            <h3>6. Filter Posts by Single Tag</h3>
            <span class="status skip">SKIPPED</span>
        </div>
        <div class="scenario-content">
            <div class="observations">
                <h4>Reason:</h4>
                <p>No tags were available in the current test environment. The Tags filter section was not visible on the Publisher page. Posts need to be tagged for this test to be executed.</p>
            </div>
        </div>
    </div>

    <div class="test-scenario">
        <div class="scenario-header">
            <h3>7. Filter Posts by Multiple Tags</h3>
            <span class="status skip">SKIPPED</span>
        </div>
        <div class="scenario-content">
            <div class="observations">
                <h4>Reason:</h4>
                <p>Dependent on tag filtering feature. No tags configured in current environment.</p>
            </div>
        </div>
    </div>

    <div class="test-scenario">
        <div class="scenario-header">
            <h3>8. Filter Posts by Date Range</h3>
            <span class="status skip">SKIPPED</span>
        </div>
        <div class="scenario-content">
            <div class="observations">
                <h4>Reason:</h4>
                <p>Date range filter UI element not found on the Publisher page. This feature may need to be enabled in Publisher settings or may be available in a different view.</p>
            </div>
        </div>
    </div>

    <div class="test-scenario">
        <div class="scenario-header">
            <h3>9. Search Result Pagination</h3>
            <span class="status skip">SKIPPED</span>
        </div>
        <div class="scenario-content">
            <div class="observations">
                <h4>Reason:</h4>
                <p>Only 1 published post available in the test environment. Pagination requires more posts than the page size limit to test effectively.</p>
            </div>
        </div>
    </div>

    <div class="test-scenario">
        <div class="scenario-header">
            <h3>10. Search Result Sorting</h3>
            <span class="status skip">SKIPPED</span>
        </div>
        <div class="scenario-content">
            <div class="observations">
                <h4>Reason:</h4>
                <p>Sorting UI element not visible on the Publisher page. Multiple posts would be required to verify sorting functionality works correctly.</p>
            </div>
        </div>
    </div>

    <h2>Code Files Reviewed</h2>
    <ul>
        <li><strong>Services/FilterController.cs</strong> - API endpoints for GetTopTags and GetTopAuthors</li>
        <li><strong>Components/FilterManager.cs</strong> - Business logic with caching for tags and authors</li>
        <li><strong>Views/Search.ascx</strong> - UI with search input, viewing filters, and Knockout.js bindings</li>
        <li><strong>ClientScripts/SearchManager.js</strong> - Client-side search with 500ms throttle</li>
        <li><strong>ClientScripts/TagsFilterManager.js</strong> - Tag selection and filtering management</li>
    </ul>

    <h2>Test Environment</h2>
    <table style="width: 100%; background: white; border-collapse: collapse; margin: 20px 0;">
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Website URL</strong></td>
            <td style="padding: 10px; border: 1px solid #ddd;">http://localhost:8081</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Browser</strong></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Playwright (Chromium)</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Viewport</strong></td>
            <td style="padding: 10px; border: 1px solid #ddd;">1920x1080</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Test User</strong></td>
            <td style="padding: 10px; border: 1px solid #ddd;">SuperUser Account (host)</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Repository</strong></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Dnn.Evoq.Content</td>
        </tr>
    </table>

    <div class="footer">
        <p>Test Report Generated: December 30, 2025</p>
        <p>Publisher Search and Filtering Feature - Evoq Enterprise</p>
    </div>
</body>
</html>

{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.CommunitySettings",
    "extension_type": "PersonaBar Module",
    "feature_name": "Comment Moderation Settings",
    "feature_description": "Configure whether comments require approval before publication for Blogs, Discussions, Ideas, Social Events, and Wiki modules.",
    "feature_priority": "High",
    "test_date": "2026-02-09T16:52:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Enable comment moderation for Blogs module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Admin > Settings > Community Settings and locate Comment Moderation section",
          "expected": "Comment Moderation section visible with checkboxes for Blogs, Discussions, Ideas, Social Events, Wiki",
          "actual": "Comment Moderation section is visible with all 5 checkboxes - all initially unchecked",
          "screenshot": "Comment Moderation Settings_step02_comment_section.png"
        },
        {
          "step_number": 2,
          "action": "Click the Blogs checkbox to enable comment moderation",
          "expected": "Blogs checkbox becomes checked",
          "actual": "Blogs checkbox is now checked",
          "screenshot": "Comment Moderation Settings_step03_blogs_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Enable comment moderation for Discussions module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click the Discussions checkbox to enable comment moderation",
          "expected": "Discussions checkbox becomes checked",
          "actual": "Discussions checkbox is now checked",
          "screenshot": "Comment Moderation Settings_step04_all_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Enable comment moderation for Ideas module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click the Ideas checkbox to enable comment moderation",
          "expected": "Ideas checkbox becomes checked",
          "actual": "Ideas checkbox is now checked",
          "screenshot": "Comment Moderation Settings_step04_all_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Enable comment moderation for Social Events module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click the Social Events checkbox to enable comment moderation",
          "expected": "Social Events checkbox becomes checked",
          "actual": "Social Events checkbox is now checked",
          "screenshot": "Comment Moderation Settings_step04_all_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Enable comment moderation for Wiki module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click the Wiki checkbox to enable comment moderation",
          "expected": "Wiki checkbox becomes checked",
          "actual": "Wiki checkbox is now checked",
          "screenshot": "Comment Moderation Settings_step04_all_enabled.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Save all comment moderation settings and verify persistence",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Enable all 5 comment moderation checkboxes (Blogs, Discussions, Ideas, Social Events, Wiki)",
          "expected": "All 5 checkboxes are checked",
          "actual": "All 5 checkboxes are checked",
          "screenshot": "Comment Moderation Settings_step09_all_enabled_before_save.png"
        },
        {
          "step_number": 2,
          "action": "Click the Save button",
          "expected": "Settings are saved successfully with confirmation message",
          "actual": "Success message 'Item successfully saved.' is displayed",
          "screenshot": "Comment Moderation Settings_step10_save_success.png"
        },
        {
          "step_number": 3,
          "action": "Refresh the page and navigate back to Community Settings",
          "expected": "All 5 Comment Moderation checkboxes should remain checked",
          "actual": "All 5 Comment Moderation checkboxes are UNCHECKED - settings did NOT persist",
          "screenshot": "Comment Moderation Settings_step12_all_unchecked_after_reload.png"
        }
      ],
      "issues": [
        "CRITICAL BUG: Comment Moderation settings do not persist after save. The Save API returns success but settings revert to defaults on page reload."
      ]
    },
    {
      "scenario_name": "Verify default values (all false) for new installations",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Observe the initial state of Comment Moderation checkboxes on page load",
          "expected": "All Comment Moderation checkboxes should be unchecked by default",
          "actual": "All 5 checkboxes (Blogs, Discussions, Ideas, Social Events, Wiki) are unchecked by default",
          "screenshot": "Comment Moderation Settings_step02_comment_section.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Disable comment moderation for Blogs module",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "With Blogs checkbox checked, click it to uncheck/disable",
          "expected": "Blogs checkbox becomes unchecked",
          "actual": "Checkbox toggle works correctly - clicking toggles the state",
          "screenshot": "Comment Moderation Settings_step08_persistence_failed.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The UI correctly displays and allows toggling of all 5 Comment Moderation checkboxes (Blogs, Discussions, Ideas, Social Events, Wiki).",
    "The Save button shows success feedback ('Item successfully saved.') when clicked.",
    "CRITICAL: Despite the success message, Comment Moderation settings do not persist after page reload. All checkboxes revert to unchecked state.",
    "Other settings in the same panel (Comments Page Size, Group Home Page) also appear to have persistence issues.",
    "Code review shows the SaveSettings API calls CmxSettingsController.Instance.SaveCmxSettings() which should persist the CommentModeration dictionary, but the values are not being retrieved correctly on reload.",
    "The GetSettings API retrieves settings from CmxSettingsController.Instance.GetCmxSettings(), but the CommentModeration values always return as false/unchecked."
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 7,
    "failed": 1,
    "pass_rate": "87.5%"
  }
}

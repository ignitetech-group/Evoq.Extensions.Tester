<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Influence Goals Search and Pagination</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        .feature-info {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .feature-info p {
            margin: 5px 0;
        }
        .test-case {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 15px 0;
            padding: 20px;
            background: #fafafa;
        }
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .pass {
            background-color: #27ae60;
            color: white;
        }
        .fail {
            background-color: #e74c3c;
            color: white;
        }
        .steps {
            background: #fff;
            padding: 10px 15px;
            border-left: 3px solid #3498db;
            margin: 10px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .screenshot {
            margin: 15px 0;
            text-align: center;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .screenshot-caption {
            font-style: italic;
            color: #666;
            margin-top: 8px;
        }
        .summary {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .summary h2 {
            color: white;
            margin-top: 0;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .summary-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        .summary-number {
            font-size: 2em;
            font-weight: bold;
        }
        .observations {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .observations h3 {
            color: #856404;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Report: Influence Goals Search and Pagination</h1>

        <div class="feature-info">
            <p><strong>Extension:</strong> Evoq.PersonaBar.CommunitySettings (PersonaBar Module)</p>
            <p><strong>Feature:</strong> Influence Goals Search and Pagination</p>
            <p><strong>Priority:</strong> High</p>
            <p><strong>UI Location:</strong> Admin > Settings > Community Settings > Influence tab</p>
            <p><strong>Description:</strong> Search, sort, and paginate through influence goals with configurable page sizes and multi-column sorting.</p>
            <p><strong>Test Date:</strong> 2026-01-06</p>
        </div>

        <h2>Test Results</h2>

        <!-- Test 1: Search by Keyword -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 1: Search by Goal Type Keyword</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Navigate to Community Settings > Influence tab</li>
                    <li>Enter "friends" in the search box</li>
                    <li>Press Enter to trigger search</li>
                    <li>Verify results are filtered</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Only goals containing "friends" should be displayed</p>
            <p><strong>Actual:</strong> Search filtered from 13 items to 2 items containing "friends" in the goal type text</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step02_search_friends.png" alt="Search results for friends">
                <p class="screenshot-caption">Search results showing 2 items matching "friends"</p>
            </div>
        </div>

        <!-- Test 2: Case-Insensitive Search -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 2: Case-Insensitive Search</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Enter "FRIENDS" (uppercase) in the search box</li>
                    <li>Press Enter to trigger search</li>
                    <li>Verify same results as lowercase search</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Search should return same results regardless of case</p>
            <p><strong>Actual:</strong> "FRIENDS" (uppercase) returned the same 2 results as "friends" (lowercase)</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step03_case_insensitive.png" alt="Case insensitive search">
                <p class="screenshot-caption">Search with uppercase "FRIENDS" returns same results</p>
            </div>
        </div>

        <!-- Test 3: Empty Search Results -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 3: Empty Search Results Message</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Enter non-existent text "xyznonexistent123" in search box</li>
                    <li>Press Enter to trigger search</li>
                    <li>Verify empty results message is displayed</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Should show "Showing 0 items" message when no results match</p>
            <p><strong>Actual:</strong> Displayed "Showing 0 items" with empty table body</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step04_empty_results.png" alt="Empty search results">
                <p class="screenshot-caption">Empty results display for non-matching search term</p>
            </div>
        </div>

        <!-- Test 4: Sort by Weight Ascending -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 4: Sort by Weight Ascending</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Clear search filter to show all items</li>
                    <li>Click on "Weight" column header</li>
                    <li>Verify data is sorted in ascending order</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Items should be sorted by weight from lowest to highest</p>
            <p><strong>Actual:</strong> Data sorted ascending: 1, 1, 1, 1, 1, 2, 2, 2, 4, 8. Up arrow indicator shown on Weight column.</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step05_sort_weight_asc.png" alt="Sort weight ascending">
                <p class="screenshot-caption">Data sorted by Weight in ascending order</p>
            </div>
        </div>

        <!-- Test 5: Sort by Weight Descending -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 5: Sort by Weight Descending</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Click on "Weight" column header again</li>
                    <li>Verify sort direction toggles to descending</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Items should be sorted by weight from highest to lowest</p>
            <p><strong>Actual:</strong> Data sorted descending: 30, 20, 10, 10, 8, 4, 2, 2, 2, 1. Down arrow indicator shown on Weight column.</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step06_sort_weight_desc.png" alt="Sort weight descending">
                <p class="screenshot-caption">Data sorted by Weight in descending order</p>
            </div>
        </div>

        <!-- Test 6: Pagination - Next Button -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 6: Pagination - Navigate to Next Page</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Observe Page 1 showing "Showing 1-10 of 14 items"</li>
                    <li>Click "Next" button</li>
                    <li>Verify navigation to Page 2</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Should navigate to page 2 showing remaining items</p>
            <p><strong>Actual:</strong> Navigated to Page 2 showing "Showing 11-14 of 14 items" (4 remaining items)</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step07_page2.png" alt="Page 2">
                <p class="screenshot-caption">Page 2 of 2 showing items 11-14</p>
            </div>
        </div>

        <!-- Test 7: Pagination - Previous Button -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 7: Pagination - Navigate to Previous Page</h3>
                <span class="status pass">PASS</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>From Page 2, click "Prev" button</li>
                    <li>Verify navigation back to Page 1</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Should navigate back to page 1</p>
            <p><strong>Actual:</strong> Successfully navigated back to Page 1 showing items 1-10</p>
            <div class="screenshot">
                <img src="Influence_Goals_Search_and_Pagination_step08_page1_back.png" alt="Back to page 1">
                <p class="screenshot-caption">Navigated back to Page 1 of 2</p>
            </div>
        </div>

        <!-- Test 8: Page Size Changes -->
        <div class="test-case">
            <div class="test-header">
                <h3>Test 8: Change Page Size (5, 10, 25, 50 items)</h3>
                <span class="status fail">FAIL</span>
            </div>
            <div class="steps">
                <strong>Steps:</strong>
                <ol>
                    <li>Look for page size selector control in the Influence Goals table</li>
                    <li>Attempt to change page size</li>
                </ol>
            </div>
            <p><strong>Expected:</strong> Should be able to change page size to 5, 10, 25, or 50 items</p>
            <p><strong>Actual:</strong> No page size selector exists for the Influence Goals table. The page size is hardcoded to 10 in the JavaScript code (<code>pager.init(influenceViewModel, 10, ...)</code>). The "Page Size" dropdown in "Miscellaneous Community Settings" controls content page size, not the Influence Goals table.</p>
            <p><strong>Issue:</strong> Feature not testable via UI - no configurable page size control for Influence Goals</p>
        </div>

        <!-- Summary -->
        <div class="summary">
            <h2>Test Summary</h2>
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-number">8</div>
                    <div>Total Tests</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number" style="color: #2ecc71;">7</div>
                    <div>Passed</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number" style="color: #e74c3c;">1</div>
                    <div>Failed</div>
                </div>
            </div>
        </div>

        <!-- Observations -->
        <div class="observations">
            <h3>Observations</h3>
            <ul>
                <li><strong>Page Size Control Missing:</strong> The suggested test scenario "Change page size to 5, 10, 25, 50 items" cannot be tested via UI. Code review of <code>CommunitySettings.js</code> (line 459) shows the pager is initialized with a hardcoded page size of 10: <code>pager.init(influenceViewModel, 10, searchInfluence, utility.resx.CommunitySettings)</code>. There is no UI control to change this value for the Influence Goals table.</li>
                <li><strong>Search Throttling:</strong> Code confirms 500ms search throttle delay as documented (line 477: <code>setTimeout(searchInfluenceStart, 500)</code>). This was observed during testing - there's a slight delay between typing and results updating.</li>
                <li><strong>MinValue/MaxValue Columns:</strong> The suggested test scenarios mention sorting by MinValue and MaxValue columns, but these columns are not visible in the Influence Goals table UI. Only Goal Type, Weight, Value, and Actions columns are displayed.</li>
                <li><strong>Sort Indicator:</strong> The UI correctly displays sort direction indicators (up/down arrows) on the active sort column.</li>
                <li><strong>Data Consistency:</strong> During testing, the item count fluctuated slightly (13-14 items) which may indicate background data changes or caching behavior.</li>
            </ul>
        </div>

        <h2>Test Environment</h2>
        <div class="feature-info">
            <p><strong>Website URL:</strong> http://localhost:8081</p>
            <p><strong>Browser:</strong> Playwright-controlled browser (1280x720 viewport)</p>
            <p><strong>Test User:</strong> SuperUser Account (host)</p>
            <p><strong>Code Location:</strong> C:\DNN\Evoq.Extensions.Tester\repos\Dnn.AdminExperience.Evoq.Engage</p>
        </div>

        <h2>Initial State Screenshot</h2>
        <div class="screenshot">
            <img src="Influence_Goals_Search_and_Pagination_step01_influence_tab.png" alt="Initial state">
            <p class="screenshot-caption">Initial state of Influence Goals section showing all 13 items</p>
        </div>
    </div>
</body>
</html>

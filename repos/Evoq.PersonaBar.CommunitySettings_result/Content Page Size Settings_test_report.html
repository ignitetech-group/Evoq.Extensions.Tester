<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report: Content Page Size Settings</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2, h3 {
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            color: white;
            margin: 0;
        }
        .header p {
            margin: 10px 0 0;
            opacity: 0.9;
        }
        .summary {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-card {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .summary-card.pass {
            border-left: 5px solid #28a745;
        }
        .summary-card.fail {
            border-left: 5px solid #dc3545;
        }
        .summary-card h3 {
            margin: 0;
            font-size: 2em;
        }
        .summary-card.pass h3 {
            color: #28a745;
        }
        .summary-card.fail h3 {
            color: #dc3545;
        }
        .test-case {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-case h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .status.pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status.fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        .steps {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin: 8px 0;
        }
        .screenshot {
            margin: 15px 0;
        }
        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .screenshot figcaption {
            font-size: 0.9em;
            color: #666;
            margin-top: 8px;
        }
        .issue-found {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        .observations {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 5px 5px 0;
        }
        .observations h2 {
            margin-top: 0;
            color: #0066cc;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Test Report: Content Page Size Settings</h1>
        <p><strong>Extension:</strong> Evoq.PersonaBar.CommunitySettings</p>
        <p><strong>Feature Priority:</strong> Medium</p>
        <p><strong>UI Location:</strong> Admin > Settings > Community Settings > Settings tab</p>
        <p><strong>Test Date:</strong> January 6, 2026</p>
    </div>

    <h2>Feature Description</h2>
    <p>Configure pagination size for content lists across social modules with options from 5 to 100 items per page.</p>

    <div class="summary">
        <div class="summary-card pass">
            <h3>1</h3>
            <p>Tests Passed</p>
        </div>
        <div class="summary-card fail">
            <h3>1</h3>
            <p>Tests Failed</p>
        </div>
    </div>

    <h2>Test Results</h2>

    <!-- Test Case 1: Verify Dropdown Options -->
    <div class="test-case">
        <h3>
            <span>Test 1: Verify Dropdown Shows All Available Options</span>
            <span class="status pass">PASS</span>
        </h3>

        <p><strong>Objective:</strong> Verify that the Page Size dropdown displays all expected options (5, 10, 15, 25, 50, 100 items).</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Logged in as SuperUser (host)</li>
                <li>Navigated to Admin > Settings > Community Settings</li>
                <li>Scrolled to "Miscellaneous Community Settings" section</li>
                <li>Clicked on Page Size dropdown to expand it</li>
                <li>Verified all options are visible</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Dropdown should show options: 5 items, 10 items, 15 items, 25 items, 50 items, 100 items</p>
        <p><strong>Actual Result:</strong> All 6 options are correctly displayed in the dropdown</p>

        <figure class="screenshot">
            <img src="Content_Page_Size_Settings_step03_dropdown_options.png" alt="Page Size dropdown showing all options">
            <figcaption>Screenshot: Page Size dropdown expanded showing all 6 available options (5, 10, 15, 25, 50, 100 items)</figcaption>
        </figure>
    </div>

    <!-- Test Case 2: Save and Verify Persistence -->
    <div class="test-case">
        <h3>
            <span>Test 2: Save Page Size and Verify Persistence</span>
            <span class="status fail">FAIL</span>
        </h3>

        <p><strong>Objective:</strong> Verify that changing the Page Size value and saving persists the selection after navigating away and returning.</p>

        <div class="steps">
            <strong>Steps Taken:</strong>
            <ol>
                <li>Observed initial value: Page Size = "5 items"</li>
                <li>Changed Page Size dropdown to "25 items"</li>
                <li>Clicked Save button</li>
                <li>Received success message: "Item successfully saved."</li>
                <li>Navigated away to Dashboard</li>
                <li>Returned to Community Settings</li>
                <li>Checked Page Size value</li>
            </ol>
        </div>

        <p><strong>Expected Result:</strong> Page Size should show "25 items" after returning to the settings page</p>
        <p><strong>Actual Result:</strong> Page Size shows "5 items" (original value). The value did not persist.</p>

        <div class="issue-found">
            <strong>Issue Found:</strong> The Page Size setting does not persist correctly. After saving "25 items" and receiving a success message, the value reverts to "5 items" upon returning to the page. Notably, the Comments Page Size dropdown shows "25 items" after this test, suggesting the value may have been incorrectly saved to the wrong field.
        </div>

        <figure class="screenshot">
            <img src="Content_Page_Size_Settings_step04_select_25_items.png" alt="Selecting 25 items">
            <figcaption>Screenshot: Page Size changed to "25 items"</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Content_Page_Size_Settings_step05_saved_success.png" alt="Save successful">
            <figcaption>Screenshot: Settings saved - Page Size shows "25 items" with Save button visible</figcaption>
        </figure>

        <figure class="screenshot">
            <img src="Content_Page_Size_Settings_step08_persistence_issue.png" alt="Persistence issue">
            <figcaption>Screenshot: After navigating away and returning, Page Size shows "5 items" (not persisted) while Comments Page Size shows "25 items"</figcaption>
        </figure>
    </div>

    <!-- Test Summary Table -->
    <h2>Test Summary</h2>
    <table>
        <thead>
            <tr>
                <th>Scenario</th>
                <th>Status</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Verify dropdown shows all available options (5, 10, 15, 25, 50, 100)</td>
                <td><span class="status pass">PASS</span></td>
                <td>All 6 options correctly displayed</td>
            </tr>
            <tr>
                <td>Set page size to 25 items</td>
                <td><span class="status pass">PASS</span></td>
                <td>Selection successful</td>
            </tr>
            <tr>
                <td>Save page size and verify persistence</td>
                <td><span class="status fail">FAIL</span></td>
                <td>Value did not persist after navigation</td>
            </tr>
            <tr>
                <td>Verify default value (5) for new installations</td>
                <td><span class="status pass">PASS</span></td>
                <td>Default value confirmed as "5 items"</td>
            </tr>
        </tbody>
    </table>

    <!-- Observations Section -->
    <div class="observations">
        <h2>Observations</h2>
        <ul>
            <li><strong>Potential Bug:</strong> The Page Size setting may be incorrectly mapped to the Comments Page Size field during save operations. When "25 items" was selected for Page Size and saved, the Comments Page Size field showed "25 items" upon return, while Page Size reverted to "5 items".</li>
            <li><strong>Code Reference:</strong> The JavaScript file (CommunitySettings.js) uses separate observables for <code>pageSize</code> and <code>commentsPageSize</code>. The API endpoint <code>SaveSettings</code> sends both values. The issue may be in how the values are mapped during save or load operations.</li>
            <li><strong>UI Functionality:</strong> The dropdown UI works correctly - options are displayed properly, selection works, and the success message appears after saving.</li>
            <li><strong>Recommendation:</strong> Investigate the <code>CmxSettingsController.SaveCmxSettings</code> method and the corresponding JavaScript save function to verify the field mapping is correct.</li>
        </ul>
    </div>

    <footer style="text-align: center; margin-top: 40px; color: #666; font-size: 0.9em;">
        <p>Test executed using Playwright MCP automation</p>
        <p>Extension: Evoq.PersonaBar.CommunitySettings | Feature: Content Page Size Settings</p>
    </footer>
</body>
</html>
